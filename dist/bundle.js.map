{"version":3,"file":"bundle.js","sources":["../src/lib/utils/validator.js","../src/lib/utils/invariants.js","../src/lib/furmly_base.js","../src/lib/furmly_input.js","../src/lib/utils/memcache.js","../src/lib/actions/constants.js","../src/lib/reducers/navigation.js","../src/lib/action-enhancers/index.js","../src/lib/actions/index.js","../src/lib/furmly_process_context.js","../src/lib/furmly_view.js","../src/lib/furmly_container.js","../src/lib/utils/view.js","../src/lib/furmly_template_cache_context.js","../src/lib/furmly_navigation_context.js","../src/lib/furmly_process.js","../src/lib/furmly_section.js","../src/lib/furmly_select.js","../src/lib/furmly_selectset.js","../src/lib/furmly_list.js","../src/lib/furmly_hidden.js","../src/lib/furmly_nav.js","../src/lib/furmly_image.js","../src/lib/furmly_grid.js","../src/lib/furmly_htmlview.js","../src/lib/furmly_fileupload.js","../src/lib/furmly_actionview.js","../src/lib/furmly_label.js","../src/lib/furmly_webview.js","../src/lib/furmly_command.js","../src/lib/reducers/view.js","../src/lib/reducers/index.js","../src/lib/utils/store.js","../src/lib/furmly_provider.js","../src/lib/index.js","../src/furmly_mapping.js","../src/lib/utils/formatExpression.js","../src/lib/utils/index.js"],"sourcesContent":["export default class Validator {\r\n\tconstructor(context) {\r\n\t\tthis.run = this.run.bind(context);\r\n\t}\r\n\trun() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (\r\n\t\t\t\t(!this.props.validators || !this.props.validators.length) &&\r\n\t\t\t\t(!this.props.asyncValidators ||\r\n\t\t\t\t\t!this.props.asyncValidators.length)\r\n\t\t\t)\r\n\t\t\t\treturn resolve();\r\n\r\n\t\t\tif (this.props.validators) {\r\n\t\t\t\tlet result = this.props.validators.reduce(\r\n\t\t\t\t\t(current, element) => {\r\n\t\t\t\t\t\t// statements\r\n\t\t\t\t\t\tlet valid = current.valid,\r\n\t\t\t\t\t\t\terror = \"\";\r\n\t\t\t\t\t\tswitch (element.validatorType) {\r\n\t\t\t\t\t\t\tcase VALIDATOR_TYPES.REQUIRED:\r\n\t\t\t\t\t\t\t\tvalid = this.hasValue();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase VALIDATOR_TYPES.MAXLENGTH:\r\n\t\t\t\t\t\t\t\tvalid = this.isLessThanMaxLength(element);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase VALIDATOR_TYPES.MINLENGTH:\r\n\t\t\t\t\t\t\t\tvalid = this.isGreaterThanMinLength(element);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase VALIDATOR_TYPES.REGEX:\r\n\t\t\t\t\t\t\t\tvalid = this.matchesRegex(element);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (typeof valid == \"string\") {\r\n\t\t\t\t\t\t\terror = valid;\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\tcurrent.errors.push(error),\r\n\t\t\t\t\t\t\t\t(current.valid = false),\r\n\t\t\t\t\t\t\t\tcurrent\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn current;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{ errors: [], valid: true }\r\n\t\t\t\t);\r\n\t\t\t\tif (!result.valid) {\r\n\t\t\t\t\tthis.setState({ errors: result.errors });\r\n\t\t\t\t\treturn reject();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tthis.props.asyncValidators &&\r\n\t\t\t\tthis.props.asyncValidators.length &&\r\n\t\t\t\t!this.props.valid\r\n\t\t\t) {\r\n\t\t\t\treturn reject();\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({ errors: null });\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport const VALIDATOR_TYPES = {\r\n\tREQUIRED: \"REQUIRED\",\r\n\tMAXLENGTH: \"MAXLENGTH\",\r\n\tMINLENGTH: \"MINLENGTH\",\r\n\tREGEX: \"REGEX\"\r\n};\r\n","import { Component } from \"react\";\r\nexport default {\r\n\tvalidComponent: function(component, name) {\r\n\t\tif (!component) throw new Error(`${name} cannot be null`);\r\n\t\tif (\r\n\t\t\t!Component.prototype.isPrototypeOf(component) &&\r\n\t\t\ttypeof component !== \"function\"\r\n\t\t)\r\n\t\t\tthrow new Error(\r\n\t\t\t\t`${name} must either be a valid react Component or a Function`\r\n\t\t\t);\r\n\t\treturn true;\r\n\t}\r\n};\r\n","import React from \"react\";\r\nimport debug from \"debug\";\r\nimport hoistNonReactStatic from \"hoist-non-react-statics\";\r\n\r\nexport default WrappedComponent => {\r\n  class HOCComponent extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.log = this.log.bind(this);\r\n    }\r\n    componentWillMount() {\r\n      this.logger = debug(`furmly-client:${WrappedComponent.name}`);\r\n      this.log(\"componentWillMount\");\r\n    }\r\n    componentWillUnmount() {\r\n      this.log(\"componentWillUnmount\");\r\n      this.logger = null;\r\n    }\r\n    log(m) {\r\n      this.logger(`${m}:::${this.props.name || this.props.id || \"\"}`);\r\n    }\r\n    render() {\r\n      return <WrappedComponent {...this.props} log={this.log} />;\r\n    }\r\n  }\r\n  hoistNonReactStatic(HOCComponent, WrappedComponent);\r\n  return HOCComponent;\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ValidationHelper, { VALIDATOR_TYPES } from \"./utils/validator\";\r\nimport invariants from \"./utils/invariants\";\r\nimport withLogger from \"./furmly_base\";\r\n\r\n/**\r\n * Higher order function that recieves Platform specific implementation of Input\r\n * @param  {Function} Input Input class\r\n * @return {Function}       Wrapped class\r\n */\r\nexport default (LabelWrapper, Input, DatePicker, Checkbox) => {\r\n  invariants.validComponent(LabelWrapper, \"LabelWrapper\");\r\n  invariants.validComponent(Input, \"Input\");\r\n  invariants.validComponent(DatePicker, \"DatePicker\");\r\n  invariants.validComponent(Checkbox, \"Checkbox\");\r\n  class FurmlyInput extends React.PureComponent {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {};\r\n      this.setDefault = this.setDefault.bind(this);\r\n      this.valueChanged = this.valueChanged.bind(this);\r\n      this.runValidators = this.runValidators.bind(this);\r\n      this.hasValue = this.hasValue.bind(this);\r\n      this.isLessThanMaxLength = this.isLessThanMaxLength.bind(this);\r\n      this.isGreaterThanMinLength = this.isGreaterThanMinLength.bind(this);\r\n      this.matchesRegex = this.matchesRegex.bind(this);\r\n      this.runAsyncValidators = this.runAsyncValidators.bind(this);\r\n      this.props.validator.validate = () => {\r\n        return this.runValidators();\r\n      };\r\n      this.toValueChanged = this.toValueChanged.bind(this);\r\n      this.formatDateRange = this.formatDateRange.bind(this);\r\n      this.fromValueChanged = this.fromValueChanged.bind(this);\r\n      this.setDateFromRange = this.setDateFromRange.bind(this);\r\n      this.isDateRange = this.isDateRange.bind(this);\r\n    }\r\n    componentDidMount() {\r\n      this._mounted = true;\r\n      setTimeout(() => {\r\n        if (this._mounted) {\r\n          this.setDefault();\r\n          this.setDateFromRange();\r\n        }\r\n      }, 0);\r\n    }\r\n    componentWillReceiveProps(next) {\r\n      if (next.component_uid !== this.props.component_uid) {\r\n        this.setDefault(next);\r\n      }\r\n      if (\r\n        next.value &&\r\n        this.props.value !== next.value &&\r\n        this.isDateRange(next)\r\n      ) {\r\n        this.setDateFromRange(next);\r\n      }\r\n    }\r\n    componentWillUnmount() {\r\n      this._mounted = false;\r\n    }\r\n    isDateRange(props = this.props) {\r\n      return props.args && props.args.config && props.args.config.isRange;\r\n    }\r\n\r\n    setDateFromRange(props = this.props) {\r\n      if (props.value && this.isDateRange()) {\r\n        let [fromValue, toValue] = props.value.split(\"-\");\r\n        this.setState({\r\n          fromValue: new Date(fromValue),\r\n          toValue: new Date(toValue)\r\n        });\r\n      }\r\n    }\r\n    runValidators() {\r\n      return new ValidationHelper(this).run();\r\n    }\r\n    runAsyncValidators(value) {\r\n      this.props.runAsyncValidator(\r\n        this.props.asyncValidators[0],\r\n        value,\r\n        this.props.asyncValidators[0] + this.props.component_uid\r\n      );\r\n    }\r\n    hasValue() {\r\n      return !!this.props.value || \"is required\";\r\n    }\r\n    isRequired() {\r\n      return (\r\n        this.props.validators &&\r\n        this.props.validators.filter(\r\n          x => x.validatorType == VALIDATOR_TYPES.REQUIRED\r\n        ).length > 0\r\n      );\r\n    }\r\n    isLessThanMaxLength(element) {\r\n      return (\r\n        (this.props.value && this.props.value.length <= element.args.max) ||\r\n        element.error ||\r\n        \"The maximum number of letters/numbers is \" + element.args.max\r\n      );\r\n    }\r\n    isGreaterThanMinLength(element) {\r\n      return (\r\n        (this.props.value && this.props.value.length >= element.args.min) ||\r\n        element.error ||\r\n        \"The minimum number of letters/numbers is\" + element.args.min\r\n      );\r\n    }\r\n    matchesRegex(element) {\r\n      return (\r\n        new RegExp(element.args.exp).test(this.props.value) ||\r\n        element.error ||\r\n        \"Invalid entry\"\r\n      );\r\n    }\r\n    valueChanged(value) {\r\n      this.props.valueChanged({ [this.props.name]: value });\r\n      if (this.props.asyncValidators && this.props.asyncValidators.length)\r\n        this.runAsyncValidators(value);\r\n\r\n      this.setState({ errors: [] });\r\n    }\r\n    fromValueChanged(fromValue) {\r\n      if (this.state.toValue && fromValue < this.state.toValue) {\r\n        this.valueChanged(this.formatDateRange(fromValue));\r\n      } else {\r\n        this.valueChanged(null);\r\n      }\r\n      this.setState({\r\n        fromValue,\r\n        toValue: fromValue > this.state.toValue ? null : this.state.toValue\r\n      });\r\n    }\r\n    formatDateRange(from = this.state.fromValue, to = this.state.toValue) {\r\n      return `${from.toLocaleDateString()} - ${to.toLocaleDateString()}`;\r\n    }\r\n    toValueChanged(toValue) {\r\n      if (this.state.fromValue) {\r\n        this.valueChanged(this.formatDateRange(this.state.fromValue, toValue));\r\n      }\r\n      this.setState({\r\n        toValue\r\n      });\r\n    }\r\n    getDateConfig(args) {\r\n      let result = {};\r\n      if (args.config) {\r\n        args = args.config;\r\n        if (args.max) {\r\n          if (args.max == \"TODAY\") result.maxDate = new Date();\r\n          else result.maxDate = new Date(args.maxConfig.date);\r\n        }\r\n        if (args.min) {\r\n          if (args.min == \"TODAY\") result.minDate = new Date();\r\n          else result.minDate = new Date(args.minConfig.date);\r\n        }\r\n        if (args.isRange) {\r\n          result.toValueChanged = this.toValueChanged;\r\n          result.fromValueChanged = this.fromValueChanged;\r\n          result.toValue = this.state.toValue;\r\n          result.fromValue = this.state.fromValue;\r\n        }\r\n        result.isRange = args.isRange;\r\n      }\r\n\r\n      return result;\r\n    }\r\n    setDefault(props = this.props) {\r\n      if (!props.value && props.args && props.args.default)\r\n        this.valueChanged(props.args.default);\r\n    }\r\n    render() {\r\n      this.props.log(\"render\");\r\n      /*jshint ignore:start */\r\n      let args = this.props.args,\r\n        Result;\r\n      const { type, valueChanged, ...passThrough } = this.props;\r\n      if (\r\n        !args ||\r\n        !args.type ||\r\n        args.type == \"text\" ||\r\n        args.type == \"number\" ||\r\n        args.type == \"password\"\r\n      ) {\r\n        Result = Input;\r\n        args = args || { type: \"text\" };\r\n      }\r\n      if (args.type == \"checkbox\") Result = Checkbox;\r\n\r\n      if (args.type == \"date\") {\r\n        Result = DatePicker;\r\n        Object.assign(passThrough, this.getDateConfig(args));\r\n      }\r\n      return (\r\n        <LabelWrapper\r\n          value={this.props.label}\r\n          inner={\r\n            <Result\r\n              type={args.type}\r\n              {...passThrough}\r\n              disabled={args && args.disabled}\r\n              required={this.isRequired()}\r\n              value={this.props.value}\r\n              errors={this.state.errors}\r\n              valueChanged={this.valueChanged}\r\n            />\r\n          }\r\n        />\r\n      );\r\n      /*jshint ignore:end */\r\n    }\r\n  }\r\n  FurmlyInput.propTypes = {\r\n    valueChanged: PropTypes.func\r\n  };\r\n  return { getComponent: () => withLogger(FurmlyInput), FurmlyInput };\r\n};\r\n","export default class MemCache {\r\n\tconstructor(opts) {\r\n\t\tthis.defaultTTL = (opts && opts.ttl) || 300000;\r\n\t\tthis.store = this.store.bind(this);\r\n\t\tthis.get = this.get.bind(this);\r\n\t\tthis._items = {};\r\n\t}\r\n\tgetKey(obj) {\r\n\t\tswitch (typeof obj) {\r\n\t\t\tcase \"string\":\r\n\t\t\t\treturn obj;\r\n\t\t\tcase \"object\":\r\n\t\t\t\treturn JSON.stringify(obj);\r\n\t\t\tcase \"undefined\":\r\n\t\t\t\tthrow \"Key cannot be null\";\r\n\t\t}\r\n\t}\r\n\thasKey(key) {\r\n\t\treturn this._items.hasOwnProperty(this.getKey(key));\r\n\t}\r\n\tget(key) {\r\n\t\tlet _key = this.getKey(key);\r\n\t\treturn (this._items[_key] && this._items[_key].value) || undefined;\r\n\t}\r\n\tstore(key, value, ttl = this.defaultTTL) {\r\n\t\tlet _key = this.getKey(key);\r\n\t\tif (this._items[_key]) {\r\n\t\t\tclearTimeout(this._items[_key].handle);\r\n\t\t}\r\n\t\tlet handle = setTimeout(this.remove.bind(this, _key), ttl);\r\n\t\tthis._items[_key] = { value, handle };\r\n\t}\r\n\tremove(key) {\r\n\t\tdelete this._items[key];\r\n\t}\r\n}\r\n","export default {\r\n  SIGN_OUT: \"SIGN_OUT\",\r\n  VALUE_CHANGED: \"VALUE_CHANGED\",\r\n  GET_REFRESH_TOKEN: \"GET_REFRESH_TOKEN\",\r\n  GOT_REFRESH_TOKEN: \"GOT_REFRESH_TOKEN\",\r\n  FAILED_TO_GET_REFRESH_TOKEN: \"FAILED_TO_GET_REFRESH_TOKEN\",\r\n  CLEAR_STACK: \"CLEAR_STACK\",\r\n  REPLACE_STACK: \"REPLACE_STACK\",\r\n  SET_FURMLY_PARAMS: \"SET_FURMLY_PARAMS\",\r\n  REMOVE_LAST_FURMLY_PARAMS: \"REMOVE_LAST_FURMLY_PARAMS\",\r\n  ALREADY_VISIBLE: \"ALREADY_VISIBLE\",\r\n  CLEAR_DATA: \"CLEAR_DATA\",\r\n  ADD_NAVIGATION_CONTEXT: \"ADD_NAVIGATION_CONTEXT\",\r\n  REMOVE_NAVIGATION_CONTEXT: \"REMOVE_NAVIGATION_CONTEXT\",\r\n  FETCHED_PROCESS: \"FETCHED_PROCESS\",\r\n  FAILED_TO_FETCH_PROCESS: \"FAILED_TO_FETCH_PROCESS\",\r\n  FETCHING_PROCESS: \"FETCHING_PROCESS\",\r\n  SESSION_MAY_HAVE_EXPIRED: \"SESSION_MAY_HAVE_EXPIRED\",\r\n  FETCHING_GRID: \"FETCHING_GRID\",\r\n  GET_SINGLE_ITEM_FOR_GRID: \"GET_SINGLE_ITEM_FOR_GRID\",\r\n  GOT_SINGLE_ITEM_FOR_GRID: \"GOT_SINGLE_ITEM_FOR_GRID\",\r\n  ERROR_WHILE_GETTING_SINGLE_ITEM_FOR_GRID:\r\n    \"ERROR_WHILE_GETTING_SINGLE_ITEM_FOR_GRID\",\r\n  FURMLY_GET_MORE_FOR_GRID: \"FURMLY_GET_MORE_FOR_GRID\",\r\n  ERROR_WHILE_FETCHING_GRID: \"ERROR_WHILE_FETCHING_GRID\",\r\n  FILTERED_GRID: \"FILTERED_GRID\",\r\n  FURMLY_PROCESSOR_RUNNING: \"FURMLY_PROCESSOR_RUNNING\",\r\n  FURMLY_PROCESSOR_RAN: \"FURMLY_PROCESSOR_RAN\",\r\n  FURMLY_PROCESSOR_FAILED: \"FURMLY_PROCESSOR_FAILED\",\r\n  FURMLY_PROCESS_RUNNING: \"FURMLY_PROCESS_RUNNING\",\r\n  FURMLY_PROCESS_RAN: \"FURMLY_PROCESS_RAN\",\r\n  FURMLY_PROCESS_FAILED: \"FURMLY_PROCESS_FAILED\",\r\n  API_ERROR: \"API_ERROR\",\r\n  START_FILE_UPLOAD: \"START_FILE_UPLOAD\",\r\n  FILE_UPLOADED: \"FILE_UPLOADED\",\r\n  FILE_UPLOAD_FAILED: \"FILE_UPLOAD_FAILED\",\r\n  GET_PREVIEW: \"GET_PREVIEW\",\r\n  GOT_PREVIEW: \"GOT_PREVIEW\",\r\n  FAILED_TO_GET_PREVIEW: \"FAILED_TO_GET_PREVIEW\",\r\n  CLEAR_PREVIEW: \"CLEAR_PREVIEW\",\r\n  GET_ITEM_TEMPLATE: \"GET_ITEM_TEMPLATE\",\r\n  GOT_ITEM_TEMPLATE: \"GOT_ITEM_TEMPLATE\",\r\n  FAILED_TO_GET_ITEM_TEMPLATE: \"FAILED_TO_GET_ITEM_TEMPLATE\",\r\n  GET_FILTER_TEMPLATE: \"GET_FILTER_TEMPLATE\",\r\n  GOT_FILTER_TEMPLATE: \"GOT_FILTER_TEMPLATE\",\r\n  FAILED_TO_GET_FILTER_TEMPLATE: \"FAILED_TO_GET_FILTER_TEMPLATE\",\r\n  ADD_TO_OPEN_CHATS: \"ADD_TO_OPEN_CHATS\",\r\n  NEW_MESSAGE: \"NEW_MESSAGE\",\r\n  NEW_GROUP_MESSAGE: \"NEW_GROUP_MESSAGE\",\r\n  LOGIN: \"LOGIN\",\r\n  LOGGED_IN: \"LOGGED_IN\",\r\n  LOGIN_FAILED: \"FAILED_LOGIN\"\r\n};\r\n","import { default as ACTIONS } from \"../actions/constants\";\r\nimport _ from \"lodash\";\r\n\r\nexport default function(state = createStack(), action) {\r\n  switch (action.type) {\r\n    case ACTIONS.SET_FURMLY_PARAMS:\r\n    case ACTIONS.ALREADY_VISIBLE:\r\n      if (hasScreenAlready(state, action.payload)) {\r\n        makeTop(state, action.payload);\r\n      } else {\r\n        state.stack.push(action.payload);\r\n      }\r\n      var stack = copyStack(state);\r\n      countRef(stack, stack.stack.length - 1, action.payload);\r\n      return Object.assign({}, state, stack);\r\n    case ACTIONS.REPLACE_STACK:\r\n      var stack = createStack();\r\n      stack.stack = action.payload.slice();\r\n      stack.stack.forEach((x, index) => countRef(stack, index, x));\r\n      return Object.assign({}, state, stack);\r\n\r\n    case ACTIONS.REMOVE_LAST_FURMLY_PARAMS:\r\n      var stack = copyStack(state),\r\n        item = stack.stack.pop();\r\n      if (\r\n        item &&\r\n        (item.key == \"Furmly\" || item.$routeName == \"Furmly\") &&\r\n        stack._references[item.params.id]\r\n      ) {\r\n        let refs = stack._references[item.params.id][0];\r\n        stack._references[item.params.id][0] = refs - 1;\r\n        //clean up.\r\n        if (!stack._references[item.params.id][0])\r\n          delete stack._references[item.params.id];\r\n      }\r\n      return Object.assign({}, state, stack);\r\n    case ACTIONS.CLEAR_STACK:\r\n      return createStack();\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction copyStack(state) {\r\n  let stack = state.stack.slice(),\r\n    _references = JSON.parse(JSON.stringify(state._references));\r\n  return { stack, _references };\r\n}\r\nfunction makeTop(state, curr) {\r\n  state.stack.push(\r\n    state.stack.splice(state._references[curr.params.id][1], 1)[0]\r\n  );\r\n  state._references[curr.params.id][1] = state.stack.length - 1;\r\n}\r\nexport function hasScreenAlready(state, current) {\r\n  return state.stack.filter(x => _.isEqual(x, current)).length;\r\n}\r\n\r\nfunction countRef(stack, index, e) {\r\n  if (e.key == \"Furmly\" || e.$routeName == \"Furmly\") {\r\n    if (stack._references[e.params.id]) {\r\n      stack._references[e.params.id][0] = stack._references[e.params.id][0] + 1;\r\n    } else {\r\n      stack._references[e.params.id] = [1, index];\r\n    }\r\n  }\r\n}\r\n\r\nfunction createStack() {\r\n  let stack = [],\r\n    _references = {};\r\n  return { stack, _references };\r\n}\r\n","import { hasScreenAlready } from \"../reducers/navigation\";\r\nexport const CHECK_FOR_EXISTING_SCREEN = Symbol(\"CHECK FOR EXISTING SCREEN\");\r\nconst enhancers = [\r\n\t{\r\n\t\tid: CHECK_FOR_EXISTING_SCREEN,\r\n\t\tmapState: function(state, action) {\r\n\t\t\tif (hasScreenAlready(state.furmly.navigation, action.payload))\r\n\t\t\t\treturn { hasScreenAlready: true, ...action.payload };\r\n\t\t}\r\n\t}\r\n];\r\nexport default () => enhancers;\r\n","import config from \"client_config\";\r\nimport { RSAA as CALL_API } from \"redux-api-middleware\";\r\nimport MemCache from \"../utils/memcache\";\r\nimport { CHECK_FOR_EXISTING_SCREEN } from \"../action-enhancers\";\r\nimport debug from \"debug\";\r\nimport { default as ACTIONS } from \"./constants\";\r\nconst log = debug(\"furmly-actions\");\r\n\r\nconst preDispatch = config.preDispatch,\r\n  preRefreshToken = config.preRefreshToken,\r\n  BASE_URL = global.BASE_URL || config.baseUrl,\r\n  throttled = {},\r\n  cache = new MemCache({ ttl: config.processorsCacheTimeout });\r\n\r\nfunction copy(value) {\r\n  return JSON.parse(JSON.stringify(value));\r\n}\r\n\r\nexport function showMessage(message) {\r\n  return {\r\n    type: \"SHOW_MESSAGE\",\r\n    message\r\n  };\r\n}\r\n\r\nfunction getQueryParams(args) {\r\n  return args\r\n    ? \"?\" +\r\n        Object.keys(args)\r\n          .map((x, index, arr) => {\r\n            return `${x}=${encodeURIComponent(args[x]) +\r\n              (index != arr.length - 1 ? \"&\" : \"\")}`;\r\n          })\r\n          .join(\"\")\r\n    : \"\";\r\n}\r\nexport function setParams(args) {\r\n  return {\r\n    type: ACTIONS.SET_FURMLY_PARAMS,\r\n    [CHECK_FOR_EXISTING_SCREEN]: true,\r\n    payload: args\r\n  };\r\n}\r\n\r\nexport function replaceStack(args) {\r\n  return {\r\n    type: ACTIONS.REPLACE_STACK,\r\n    payload: args\r\n  };\r\n}\r\nexport function goBack(args) {\r\n  return { type: ACTIONS.REMOVE_LAST_FURMLY_PARAMS, payload: args };\r\n}\r\nexport function clearNavigationStack() {\r\n  return { type: ACTIONS.CLEAR_STACK };\r\n}\r\nexport function alreadyVisible(args) {\r\n  return {\r\n    type: ACTIONS.ALREADY_VISIBLE,\r\n    payload: args\r\n  };\r\n}\r\n\r\nexport function removeNavigationContext() {\r\n  return {\r\n    type: ACTIONS.REMOVE_NAVIGATION_CONTEXT\r\n  };\r\n}\r\n\r\nexport function addNavigationContext(args) {\r\n  return {\r\n    type: ACTIONS.ADD_NAVIGATION_CONTEXT,\r\n    payload: args\r\n  };\r\n}\r\nexport function openConfirmation(id, message, params) {\r\n  return {\r\n    type: ACTIONS.OPEN_CONFIRMATION,\r\n    payload: { message, params, id }\r\n  };\r\n}\r\nexport function valueChanged(payload) {\r\n  return {\r\n    type: ACTIONS.VALUE_CHANGED,\r\n    payload\r\n  };\r\n}\r\nfunction defaultError(dispatch, customType, meta, throttleEnabled) {\r\n  return {\r\n    type: customType || \"SHOW_MESSAGE\",\r\n    meta: (action, state, res) => {\r\n      if (customType && res.status !== 401) {\r\n        dispatch(\r\n          showMessage(\r\n            res.statusText ||\r\n              (res.headers &&\r\n                res.headers.map &&\r\n                res.headers.map.errormessage &&\r\n                res.headers.map.errormessage[0]) ||\r\n              \"Sorry , an error occurred while processing your request\"\r\n          )\r\n        );\r\n      }\r\n\r\n      log(\"an error occurred\");\r\n      log(action);\r\n      let args = action[CALL_API];\r\n      if (throttleEnabled) {\r\n        let throttleKey = args.endpoint + args.body;\r\n        throttled[throttleKey] = throttled[throttleKey] || [0, 1];\r\n        throttled[throttleKey][0] += config.processorRetryOffset || 500;\r\n        throttled[throttleKey][1] += 1;\r\n      }\r\n      //session expired\r\n      if (res.status == 401) {\r\n        dispatch(showMessage(\"Session may have expired\"));\r\n        dispatch({ type: ACTIONS.SESSION_MAY_HAVE_EXPIRED });\r\n      }\r\n\r\n      return meta\r\n        ? meta(action, state, res)\r\n        : res.statusText || \"An unknown error has occurred\";\r\n    }\r\n  };\r\n}\r\nexport const loginUrl = `${BASE_URL}/login`;\r\nexport const furmlyDownloadUrl = `${BASE_URL}/api/download/:id`;\r\nexport function fetchFurmlyProcess(id, args) {\r\n  if (config.cacheProcessDescription) {\r\n    let cacheKey = { id, args },\r\n      hasKey = cache.hasKey(cacheKey);\r\n    if (hasKey) {\r\n      let payload = Object.assign({}, cache.get(cacheKey));\r\n\r\n      return dispatch => {\r\n        dispatch({\r\n          type: ACTIONS.FETCHED_PROCESS,\r\n          payload\r\n        });\r\n      };\r\n    }\r\n  }\r\n  return (dispatch, getState) =>\r\n    dispatch({\r\n      [CALL_API]: preDispatch(\r\n        {\r\n          endpoint: `${BASE_URL}/api/process/describe/${id}${getQueryParams(\r\n            Object.assign({}, args || {}, { $uiOnDemand: !!config.uiOnDemand })\r\n          )}`,\r\n          types: [\r\n            { type: ACTIONS.FETCHING_PROCESS, meta: id },\r\n            {\r\n              type: ACTIONS.FETCHED_PROCESS,\r\n              payload: (action, state, res) => {\r\n                //workaround for react-native fetch.\r\n                setTimeout(() => null, 0);\r\n                return res.json().then(d => {\r\n                  let response = { id: id, data: d };\r\n                  if (config.cacheProcessDescription && !d.data) {\r\n                    cache.store({ id, args }, copy(response));\r\n                  }\r\n                  return response;\r\n                });\r\n              }\r\n            },\r\n            defaultError(dispatch, ACTIONS.FAILED_TO_FETCH_PROCESS, () => id)\r\n          ],\r\n          method: \"GET\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n          }\r\n        },\r\n        getState()\r\n      )\r\n    });\r\n}\r\nexport function clearElementData(key) {\r\n  return {\r\n    type: ACTIONS.CLEAR_DATA,\r\n    payload: key\r\n  };\r\n}\r\nexport function getMoreForGrid(id, args, key) {\r\n  return runFurmlyProcessor(id, args, key, {\r\n    requestCustomType: ACTIONS.FETCHING_GRID,\r\n    resultCustomType: ACTIONS.FURMLY_GET_MORE_FOR_GRID,\r\n    errorCustomType: ACTIONS.ERROR_WHILE_FETCHING_GRID,\r\n    disableCache: true,\r\n    disableRetry: true\r\n  });\r\n}\r\nexport function filterGrid(id, args, key) {\r\n  return runFurmlyProcessor(id, args, key, {\r\n    requestCustomType: ACTIONS.FETCHING_GRID,\r\n    resultCustomType: ACTIONS.FILTERED_GRID,\r\n    errorCustomType: ACTIONS.ERROR_WHILE_FETCHING_GRID,\r\n    disableCache: true,\r\n    disableRetry: true\r\n  });\r\n}\r\n\r\nexport function getItemTemplate(id, args, key) {\r\n  return runFurmlyProcessor(id, args, key, {\r\n    requestCustomType: ACTIONS.GET_ITEM_TEMPLATE,\r\n    resultCustomType: ACTIONS.GOT_ITEM_TEMPLATE,\r\n    errorCustomType: ACTIONS.FAILED_TO_GET_ITEM_TEMPLATE,\r\n    disableCache: true\r\n  });\r\n}\r\n\r\nexport function getFilterTemplate(id, args, key) {\r\n  return runFurmlyProcessor(id, args, key, {\r\n    requestCustomType: ACTIONS.GET_FILTER_TEMPLATE,\r\n    resultCustomType: ACTIONS.GOT_FILTER_TEMPLATE,\r\n    errorCustomType: ACTIONS.FAILED_TO_GET_FILTER_TEMPLATE,\r\n    disableCache: true\r\n  });\r\n}\r\n\r\nexport function getSingleItemForGrid(id, args, key) {\r\n  return runFurmlyProcessor(id, args, key, {\r\n    requestCustomType: ACTIONS.GET_SINGLE_ITEM_FOR_GRID,\r\n    resultCustomType: ACTIONS.GOT_SINGLE_ITEM_FOR_GRID,\r\n    errorCustomType: ACTIONS.ERROR_WHILE_GETTING_SINGLE_ITEM_FOR_GRID,\r\n    disableCache: true\r\n  });\r\n}\r\n\r\nexport function getRefreshToken() {\r\n  return (dispatch, getState) => {\r\n    dispatch({\r\n      [CALL_API]: preRefreshToken(\r\n        {\r\n          endpoint: `${BASE_URL}/api/refresh_token`,\r\n          types: [\r\n            ACTIONS.GET_REFRESH_TOKEN,\r\n            ACTIONS.GOT_REFRESH_TOKEN,\r\n            ACTIONS.FAILED_TO_GET_REFRESH_TOKEN\r\n          ],\r\n          body: null\r\n        },\r\n        getState()\r\n      )\r\n    });\r\n  };\r\n}\r\n\r\nexport function runFurmlyProcessor(\r\n  id,\r\n  args,\r\n  key,\r\n  {\r\n    requestCustomType,\r\n    resultCustomType,\r\n    errorCustomType,\r\n    returnsUI,\r\n    disableCache,\r\n    disableRetry,\r\n    retry\r\n  } = {}\r\n) {\r\n  if (config.cacheProcessorResponses && !disableCache) {\r\n    let cacheKey = { id, args },\r\n      hasKey = cache.hasKey(cacheKey);\r\n    if (hasKey) {\r\n      let payload = copy(cache.get(cacheKey));\r\n      payload.key = key;\r\n\r\n      return dispatch => {\r\n        dispatch({\r\n          type: resultCustomType || ACTIONS.FURMLY_PROCESSOR_RAN,\r\n          payload\r\n        });\r\n      };\r\n    }\r\n  }\r\n\r\n  return (dispatch, getState) => {\r\n    let body = JSON.stringify(args),\r\n      endpoint = `${BASE_URL}/api/processors/run/${id}`,\r\n      throttleKey = `${endpoint}${body}`;\r\n\r\n    if (retry) throttled[throttleKey] = [config.processorRetryOffset || 500, 0];\r\n    if (\r\n      throttled[throttleKey] &&\r\n      (config.maxProcessorRetries &&\r\n        throttled[throttleKey][1] >= config.maxProcessorRetries)\r\n    )\r\n      return dispatch(\r\n        showMessage(\r\n          \"Max attempts to reach our backend servers has been reached. Please check your internet connection\"\r\n        )\r\n      );\r\n    let waitIndex = config.waitingProcessors.length,\r\n      waitHandle = setTimeout(() => {\r\n        config.waitingProcessors.splice(waitIndex, 1);\r\n        dispatch({\r\n          [CALL_API]: preDispatch(\r\n            {\r\n              endpoint,\r\n              types: [\r\n                {\r\n                  type: requestCustomType || ACTIONS.FURMLY_PROCESSOR_RUNNING,\r\n                  meta: { id, key, args }\r\n                },\r\n                {\r\n                  type: resultCustomType || ACTIONS.FURMLY_PROCESSOR_RAN,\r\n                  payload: (action, state, res) => {\r\n                    return res.json().then(data => {\r\n                      delete throttled[throttleKey];\r\n                      if (data && typeof data.message == \"string\") {\r\n                        dispatch(showMessage(data.message));\r\n                      }\r\n                      let response = { id, data, args, key, returnsUI };\r\n                      if (config.cacheProcessorResponses && !disableCache) {\r\n                        cache.store({ id, args }, response);\r\n                      }\r\n                      return response;\r\n                    });\r\n                  }\r\n                },\r\n                defaultError(\r\n                  dispatch,\r\n                  errorCustomType || ACTIONS.FURMLY_PROCESSOR_FAILED,\r\n                  () => key,\r\n                  !config.disableProcessorRetry && !disableRetry\r\n                )\r\n              ],\r\n              method: \"POST\",\r\n              headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n              },\r\n              body\r\n            },\r\n            getState()\r\n          )\r\n        });\r\n      }, throttled[throttleKey] || 0);\r\n\r\n    config.waitingProcessors.push(waitHandle);\r\n  };\r\n}\r\n\r\nexport function runFurmlyProcess(details) {\r\n  return (dispatch, getState) =>\r\n    dispatch({\r\n      [CALL_API]: preDispatch(\r\n        {\r\n          endpoint: `${BASE_URL}/api/process/run/${details.id}`,\r\n          types: [\r\n            {\r\n              type: ACTIONS.FURMLY_PROCESS_RUNNING,\r\n              meta: {\r\n                id: details.id,\r\n                form: details.form,\r\n                currentStep: details.currentStep\r\n              }\r\n            },\r\n            {\r\n              type: ACTIONS.FURMLY_PROCESS_RAN,\r\n              payload: (action, state, res) => {\r\n                return res\r\n                  .json()\r\n                  .then(d => {\r\n                    if (d && typeof d.message == \"string\") {\r\n                      dispatch(showMessage(d.message));\r\n                    }\r\n                    let id = details.id;\r\n                    if (\r\n                      !(config.uiOnDemand && d.status == \"COMPLETED\") &&\r\n                      !(\r\n                        !config.uiOnDemand &&\r\n                        (state.furmly.view[id].description.steps.length == 1 ||\r\n                          (state.furmly.navigation.stack.length &&\r\n                            state.furmly.navigation.stack[\r\n                              state.furmly.navigation.stack.length - 1\r\n                            ].params.currentStep +\r\n                              1 >\r\n                              state.furmly.view[id].description.steps.length -\r\n                                1))\r\n                      ) &&\r\n                      !state.furmly.view[id].description\r\n                        .disableBackwardNavigation\r\n                    ) {\r\n                      let _p = copy(\r\n                        state.furmly.navigation.stack[\r\n                          state.furmly.navigation.stack.length - 1\r\n                        ]\r\n                      );\r\n                      _p.params.currentStep = (_p.params.currentStep || 0) + 1;\r\n                      dispatch(setParams(_p));\r\n                      if (config.notifyStepAdvance) {\r\n                        config.notifyStepAdvance(dispatch, state, _p);\r\n                      }\r\n                    }\r\n                    return { id: details.id, data: d };\r\n                  })\r\n                  .catch(er => {\r\n                    log(er);\r\n                    dispatch({\r\n                      type: \"SHOW_MESSAGE\",\r\n                      message:\r\n                        \"An error occurred while trying to understand a response from the server.\"\r\n                    });\r\n                  });\r\n              }\r\n            },\r\n            defaultError(\r\n              dispatch,\r\n              ACTIONS.FURMLY_PROCESS_FAILED,\r\n              () => details.id\r\n            )\r\n          ],\r\n          method: \"POST\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n          },\r\n          body: JSON.stringify(\r\n            Object.assign({}, details.form, {\r\n              $instanceId: details.instanceId,\r\n              $uiOnDemand: !!config.uiOnDemand,\r\n              $currentStep: parseInt(details.currentStep)\r\n            })\r\n          )\r\n        },\r\n        getState()\r\n      )\r\n    });\r\n}\r\nexport function getFurmlyFilePreview(id, key, fileType, query) {\r\n  return (dispatch, getState) => {\r\n    dispatch({\r\n      [CALL_API]: preDispatch(\r\n        {\r\n          endpoint: `${BASE_URL}/api/upload/preview/${id + (query || \"\")}`,\r\n          types: [\r\n            { type: ACTIONS.GET_PREVIEW, meta: key },\r\n            {\r\n              type: ACTIONS.GOT_PREVIEW,\r\n              payload: (action, state, res) => {\r\n                return res.json().then(d => {\r\n                  return { data: d, key };\r\n                });\r\n              }\r\n            },\r\n            defaultError(dispatch, ACTIONS.FAILED_TO_GET_PREVIEW, () => key)\r\n          ],\r\n          method: \"GET\",\r\n          headers: {\r\n            Accept: \"*/*\",\r\n            \"Content-Type\": \"application/json\"\r\n          }\r\n        },\r\n        getState()\r\n      )\r\n    });\r\n  };\r\n}\r\n\r\nexport function clearPreview(key) {\r\n  return {\r\n    type: ACTIONS.CLEAR_PREVIEW,\r\n    payload: { key }\r\n  };\r\n}\r\n\r\nexport function uploadFurmlyFile(file, key) {\r\n  let formData = new FormData();\r\n\r\n  formData.append(\"file\", file);\r\n\r\n  return (dispatch, getState) => {\r\n    dispatch({\r\n      [CALL_API]: preDispatch(\r\n        {\r\n          endpoint: `${BASE_URL}/api/upload`,\r\n          types: [\r\n            { type: ACTIONS.START_FILE_UPLOAD, meta: key },\r\n            {\r\n              type: ACTIONS.FILE_UPLOADED,\r\n              payload: (action, state, res) => {\r\n                return res.json().then(d => {\r\n                  return { key, id: d.id };\r\n                });\r\n              }\r\n            },\r\n            defaultError(dispatch, ACTIONS.FILE_UPLOAD_FAILED, () => key)\r\n          ],\r\n          method: \"POST\",\r\n          headers: {\r\n            Accept: \"application/json\"\r\n          },\r\n          body: formData\r\n        },\r\n        getState()\r\n      )\r\n    });\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport hoistNonReactStatic from \"hoist-non-react-statics\";\r\n\r\nconst ProcessContext = React.createContext({});\r\nexport const withProcessProvider = WrappedComponent => {\r\n  class ProcessProvider extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {};\r\n    }\r\n    componentWillReceiveProps(next) {\r\n      if (\r\n        next.id !== this.props.id ||\r\n        next.currentStep !== this.props.currentStep\r\n      ) {\r\n        this.setup(next);\r\n      }\r\n    }\r\n    componentWillMount() {\r\n      this.setup();\r\n    }\r\n    setup(props = this.props) {\r\n      this.setState({\r\n        currentProcess: props.id,\r\n        currentStep: props.currentStep || 0\r\n      });\r\n    }\r\n    render() {\r\n      return (\r\n        <ProcessContext.Provider value={this.state}>\r\n          <WrappedComponent {...this.props} />\r\n        </ProcessContext.Provider>\r\n      );\r\n    }\r\n  }\r\n  hoistNonReactStatic(ProcessProvider, WrappedComponent);\r\n  return ProcessProvider;\r\n};\r\n\r\nexport const withProcess = WrappedComponent => {\r\n  class ProcessConsumer extends React.Component {\r\n    render() {\r\n      return (\r\n        <ProcessContext.Consumer>\r\n          {processContext => (\r\n            <WrappedComponent\r\n              {...this.props}\r\n              currentProcess={processContext.currentProcess}\r\n              currentStep={processContext.currentStep}\r\n            />\r\n          )}\r\n        </ProcessContext.Consumer>\r\n      );\r\n    }\r\n  }\r\n  hoistNonReactStatic(ProcessConsumer, WrappedComponent);\r\n  return ProcessConsumer;\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport invariants from \"./utils/invariants\";\r\nimport { valueChanged } from \"./actions\";\r\nimport withLogger from \"./furmly_base\";\r\nimport { withProcess } from \"./furmly_process_context\";\r\nexport default (Page, Warning, Container) => {\r\n  invariants.validComponent(Page, \"Page\");\r\n  invariants.validComponent(Warning, \"Warning\");\r\n  invariants.validComponent(Container, \"Container\");\r\n\r\n  const mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n    let _state = state.furmly.view[ownProps.currentProcess],\r\n      description = _state && _state.description,\r\n      map = {\r\n        value: (_state && _state[ownProps.currentStep]) || null\r\n      };\r\n\r\n    if (description && description.steps[ownProps.currentStep]) {\r\n      map.elements = description.steps[ownProps.currentStep].form.elements;\r\n      if (description.steps[ownProps.currentStep].mode == \"VIEW\") {\r\n        map.hideSubmit = true;\r\n      }\r\n\r\n      map.title = description.title;\r\n      map.processDescription = description.description;\r\n      map.commandLabel = description.steps[ownProps.currentStep].commandLabel;\r\n      map.uid = description.uid;\r\n    }\r\n    return map;\r\n  };\r\n  const mapDispatchToProps = dispatch => {\r\n    return {\r\n      valueChanged: args => dispatch(valueChanged(args))\r\n    };\r\n  };\r\n\r\n  class FurmlyView extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.onValueChanged = this.onValueChanged.bind(this);\r\n      this.submit = this.submit.bind(this);\r\n      //pass reference to validate func\r\n      this.state = {\r\n        validator: {}\r\n      };\r\n    }\r\n\r\n    onValueChanged(form) {\r\n      //this.state.form = form.furmly_view;\r\n      this.props.valueChanged({\r\n        form: form.furmly_view,\r\n        id: this.props.currentProcess,\r\n        step: this.props.currentStep\r\n      });\r\n    }\r\n    submit() {\r\n      this.state.validator\r\n        .validate()\r\n        .then(\r\n          () => {\r\n            this.props.log(\"currentStep:\" + (this.props.currentStep || \"0\"));\r\n            this.props.submit(this.props.value);\r\n          },\r\n          () => {\r\n            this.props.log(\"the form is invalid\");\r\n          }\r\n        )\r\n        .catch(er => {\r\n          this.props.log(\"an error occurred while validating form \");\r\n          this.props.log(er);\r\n        });\r\n    }\r\n    render() {\r\n      this.props.log(\"render\");\r\n      if (!this.props.elements || !this.props.elements.length)\r\n        return (\r\n          <Page hideSubmit={true}>\r\n            <Warning message=\"Oops you are not supposed to be here. Something may be broken. Please navigate home/login\" />\r\n          </Page>\r\n        );\r\n      /*jshint ignore:start*/\r\n      return (\r\n        <Page\r\n          submit={this.submit}\r\n          hideSubmit={this.props.hideSubmit}\r\n          processDescription={this.props.processDescription}\r\n          commandLabel={this.props.commandLabel}\r\n          uid={this.props.uid}\r\n        >\r\n          <Container\r\n            label={this.props.title}\r\n            elements={this.props.elements}\r\n            name=\"furmly_view\"\r\n            value={this.props.value}\r\n            valueChanged={this.onValueChanged}\r\n            validator={this.state.validator}\r\n          />\r\n        </Page>\r\n      );\r\n      /*jshint ignore:end*/\r\n    }\r\n  }\r\n\r\n  return {\r\n    getComponent: () =>\r\n      withProcess(\r\n        connect(\r\n          mapStateToProps,\r\n          mapDispatchToProps\r\n        )(withLogger(FurmlyView))\r\n      ),\r\n    mapStateToProps,\r\n    mapDispatchToProps,\r\n    FurmlyView\r\n  };\r\n};\r\n","import React, { Component } from \"react\";\r\nimport invariants from \"./utils/invariants\";\r\nimport withLogger from \"./furmly_base\";\r\n\r\nexport default (...args) => {\r\n  //invariants\r\n  let Section = args[0],\r\n    Header = args[1],\r\n    ComponentWrapper,\r\n    ComponentLocator;\r\n  if (args.length == 3) {\r\n    ComponentLocator = args[2];\r\n  } else {\r\n    ComponentWrapper = args[2];\r\n    ComponentLocator = args[3];\r\n  }\r\n\r\n  if (\r\n    invariants.validComponent(Section, \"Section\") &&\r\n    invariants.validComponent(Header, \"Header\") &&\r\n    !ComponentLocator\r\n  )\r\n    throw new Error(\"ComponentLocator cannot be null (furmly_container)\");\r\n\r\n  class FurmlyContainer extends React.PureComponent {\r\n    constructor(props) {\r\n      super(props);\r\n      this.onValueChanged = this.onValueChanged.bind(this);\r\n      this.onDisplayValueChanged = this.onDisplayValueChanged.bind(this);\r\n      this.state = {\r\n        _validations: (this.props.elements || []).map(x => ({}))\r\n      };\r\n      this.setValidator = this.setValidator.bind(this);\r\n      this.setValidator();\r\n    }\r\n    componentWillReceiveProps(next) {\r\n      if (\r\n        next.elements &&\r\n        (next.elements !== this.props.elements ||\r\n          next.elements.length !== this.props.elements.length)\r\n      ) {\r\n        let _validations = next.elements.map(x => ({}));\r\n        this.props.log(\r\n          `creating new validators for container ${this.props.name}`\r\n        );\r\n        this.setState({ _validations });\r\n      }\r\n    }\r\n    setValidator() {\r\n      this.props.validator.validate = () => {\r\n        return Promise.all(\r\n          this.state._validations.map(x => {\r\n            if (x.validate) return x.validate();\r\n\r\n            return new Promise((resolve, reject) => {\r\n              resolve();\r\n            });\r\n          })\r\n        );\r\n      };\r\n    }\r\n    onValueChanged() {\r\n      let form = Object.assign(\r\n        {},\r\n        this.props.value || {},\r\n        ...Array.prototype.slice.call(arguments)\r\n      );\r\n      if (!this.props.name) {\r\n        this.props.valueChanged(form);\r\n        return;\r\n      }\r\n      this.props.valueChanged({ [this.props.name]: form });\r\n    }\r\n\r\n    onDisplayValueChanged() {\r\n      let form = Object.assign(\r\n        {},\r\n        this.props.displayValue || {},\r\n        ...Array.prototype.slice.call(arguments)\r\n      );\r\n      if (this.props.displayValueChanged) {\r\n        if (!this.props.name) {\r\n          this.props.displayValueChanged(form);\r\n          return;\r\n        }\r\n        this.props.displayValueChanged({ [this.props.name]: form });\r\n      }\r\n    }\r\n\r\n    render() {\r\n      this.props.log(\"render\");\r\n      let keys = this.props.value ? Object.keys(this.props.value) : [],\r\n        self = this,\r\n        extraVal = {},\r\n        notifyExtra = [],\r\n        elements = (this.props.elements || [])\r\n          .sort((x, y) => {\r\n            return x.order - y.order;\r\n          })\r\n          .map((x, index) => {\r\n            const FurmlyComponent = ComponentLocator(x);\r\n            const source = self.props.value;\r\n            const value = source ? this.props.value[x.name] : null;\r\n            const elemProps = {};\r\n\r\n            if (\r\n              FurmlyComponent.hasDisplayValue &&\r\n              this.props.displayValueChanged\r\n            ) {\r\n              elemProps.displayValueChanged = this.onDisplayValueChanged;\r\n            }\r\n\r\n            if (\r\n              source &&\r\n              source.hasOwnProperty(x.name) &&\r\n              keys.indexOf(x.name) !== -1\r\n            ) {\r\n              keys.splice(keys.indexOf(x.name), 1);\r\n            }\r\n\r\n            /*jshint ignore:start*/\r\n            if (!FurmlyComponent) {\r\n              throw new Error(\r\n                \"Unknown component:\" + JSON.stringify(x, null, \" \")\r\n              );\r\n            }\r\n\r\n            if (FurmlyComponent.notifyExtra) {\r\n              notifyExtra.push(index);\r\n              return extra => {\r\n                let component = (\r\n                  <FurmlyComponent\r\n                    {...x}\r\n                    {...elemProps}\r\n                    extra={extra}\r\n                    key={x.name}\r\n                    value={value}\r\n                    validator={this.state._validations[index]}\r\n                    valueChanged={this.onValueChanged}\r\n                  />\r\n                );\r\n                if (ComponentWrapper)\r\n                  return ComponentWrapper(\r\n                    x.elementType,\r\n                    x.uid,\r\n                    x.name,\r\n                    component\r\n                  );\r\n\r\n                return component;\r\n              };\r\n            }\r\n            let component = (\r\n              <FurmlyComponent\r\n                {...x}\r\n                {...elemProps}\r\n                value={value}\r\n                validator={this.state._validations[index]}\r\n                key={x.name}\r\n                valueChanged={this.onValueChanged}\r\n              />\r\n            );\r\n            return ComponentWrapper\r\n              ? ComponentWrapper(x.elementType, x.uid, x.name, component)\r\n              : component;\r\n            /*jshint ignore:end*/\r\n          });\r\n\r\n      if (keys.length || notifyExtra.length) {\r\n        if (!notifyExtra.length) {\r\n          this.props.log(\r\n            \"there are extra properties that no component cares about \" +\r\n              JSON.stringify(keys, null, \" \")\r\n          );\r\n        }\r\n\r\n        keys.forEach(x => {\r\n          extraVal[x] = self.props.value[x];\r\n        });\r\n\r\n        notifyExtra.forEach(x => {\r\n          elements[x] = elements[x](Object.assign({}, extraVal));\r\n        });\r\n      }\r\n      if (this.props.label)\r\n        return (\r\n          <Section header={<Header text={this.props.label} />}>\r\n            {elements}\r\n          </Section>\r\n        );\r\n      /*jshint ignore:start*/\r\n      return <Section>{elements}</Section>;\r\n      /*jshint ignore:end*/\r\n    }\r\n  }\r\n\r\n  return {\r\n    getComponent: () => withLogger(FurmlyContainer),\r\n    FurmlyContainer\r\n  };\r\n};\r\n","export function getTitleFromState(state) {\r\n  let id =\r\n    state.furmly.navigation.stack.length &&\r\n    state.furmly.navigation.stack[state.furmly.navigation.stack.length - 1]\r\n      .params.id;\r\n\r\n  if (!id) return \"Furmly\";\r\n  return (\r\n    (state.furmly.view[id] &&\r\n      state.furmly.view[`${id}-busy`] &&\r\n      \"Loading...\") ||\r\n    (state.furmly.view[id] &&\r\n      state.furmly.view[id].description &&\r\n      state.furmly.view[id].description.steps[\r\n        state.furmly.view[id].currentStep || 0\r\n      ].description) ||\r\n    (state.furmly.view[id] &&\r\n      state.furmly.view[id].description &&\r\n      state.furmly.view[id].description.title) ||\r\n    \"Furmly\"\r\n  );\r\n}\r\n\r\nexport function getValueBasedOnMode(props, v) {\r\n  return (\r\n    (props.args &&\r\n      props.args.mode &&\r\n      typeof v !== \"object\" &&\r\n      props.args.mode == \"ObjectId\" && { $objectID: v }) ||\r\n    v\r\n  );\r\n}\r\nexport function isObjectIdMode(props) {\r\n  return props.args && props.args.mode === \"ObjectId\";\r\n}\r\nexport function getCurrentStepFromState(state) {\r\n  return (\r\n    (state.furmly.navigation.stack.length &&\r\n      state.furmly.navigation.stack[state.furmly.navigation.stack.length - 1]\r\n        .params.currentStep) ||\r\n    0\r\n  );\r\n}\r\nexport function getCurrentStep(state) {\r\n  return (\r\n    (state.furmly.navigation.stack.length &&\r\n      state.furmly.navigation.stack[state.furmly.navigation.stack.length - 1]\r\n        .params.currentStep) ||\r\n    0\r\n  );\r\n}\r\n\r\nexport function getCurrentProcess(state) {\r\n  for (var i = state.furmly.navigation.stack.length - 1; i >= 0; i--) {\r\n    if (state.furmly.navigation.stack[i].key == \"Furmly\") {\r\n      return state.furmly.navigation.stack[i].params.id;\r\n    }\r\n  }\r\n  return null;\r\n}\r\nexport function getKey(state, key, ownProps) {\r\n  return `${ownProps.currentStep}/${ownProps.currentProcess}/${key}`;\r\n}\r\nconst exp = /^(\\d+)\\/([a-f\\d]{1,24}|[a-zA-Z0-9_]+)\\/.+$/i;\r\nexport function isValidKey(key) {\r\n  let result = exp.exec(key);\r\n  if (!result) return false;\r\n\r\n  return { step: result[1], process: result[2] };\r\n}\r\n\r\nexport function runThroughObj(conditions, data, result = {}, parent = null) {\r\n  if (data)\r\n    Object.keys(data).forEach(key => {\r\n      for (var v = 0; v < conditions.length; v++) {\r\n        if (conditions[v](key, data, result, parent)) return result;\r\n      }\r\n      if (Array.prototype.isPrototypeOf(data[key]))\r\n        return data[key].forEach(function(element) {\r\n          runThroughObj(conditions, element, result, data);\r\n        });\r\n      if (data[key] && typeof data[key] == \"object\")\r\n        return runThroughObj(conditions, data[key], result, data);\r\n    });\r\n  return result;\r\n}\r\n\r\nexport function unwrapObjectValue(value) {\r\n  return value && typeof value == \"object\" ? value.$objectID : value;\r\n}\r\n/**\r\n * This method retrieves all the recursively declared templates and returns them. it also assigns\r\n * unique ids to every element it finds.\r\n * @param  {[type]} null    [description]\r\n * @param  {[type]} [\t(key, data,         result, parent) [description]\r\n * @param  {[type]} (key,   data,         result, parent  [description]\r\n * @return {[type]}         [description]\r\n */\r\nexport const getTemplatesAndAddComponentUid = runThroughObj.bind(null, [\r\n  (key, data, result, parent) => {\r\n    if (key === \"furmly_ref\") {\r\n      if (data.template)\r\n        return (result[data.furmly_ref] = data.template), result;\r\n      if (parent && parent.itemTemplate)\r\n        return (result[data.furmly_ref] = parent.itemTemplate), result;\r\n    }\r\n  },\r\n  (key, data, result, parent) => {\r\n    if (key == \"elementType\" && !data.component_uid) {\r\n      data.component_uid = uuid();\r\n    }\r\n  }\r\n]);\r\n\r\nexport const toggleAllBusyIndicators = runThroughObj.bind(null, [\r\n  (key, data) => {\r\n    if (\r\n      /(getting|busy|fetching)+/i.test(key) &&\r\n      typeof data[key] == \"boolean\"\r\n    ) {\r\n      data[key] = false;\r\n    }\r\n  }\r\n]);\r\nconst keyInvariants = function(fn) {\r\n  return function(key) {\r\n    if (typeof key === \"undefined\") throw new Error(\"Key cannot be undefined\");\r\n    if (typeof key === \"object\") throw new Error(\"Key cannot be an object\");\r\n    if (typeof key !== \"string\") throw new Error(\"Key must be a string\");\r\n    return fn.call(this, key);\r\n  };\r\n};\r\nexport const getBusyKey = keyInvariants(key => `${key}-busy`);\r\nexport const getErrorKey = keyInvariants(key => `${key}-error`);\r\nexport const copy = value => JSON.parse(JSON.stringify(value));\r\nexport const isArr = v => Array.prototype.isPrototypeOf(v);\r\nexport default {\r\n  getCurrentStepFromState,\r\n  getTitleFromState,\r\n  getCurrentStep,\r\n  getCurrentProcess,\r\n  isValidKey,\r\n  getKey\r\n};\r\n","import React from \"react\";\r\nimport { copy } from \"./utils/view\";\r\n\r\nconst TemplateCacheContext = React.createContext({});\r\nexport const withTemplateCacheProvider = WrappedComponent => {\r\n  class TemplateCacheProvider extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.add = this.add.bind(this);\r\n      this.get = this.get.bind(this);\r\n      this.cache = {};\r\n      this.state = {\r\n        add: this.add,\r\n        get: this.get\r\n      };\r\n    }\r\n    get(key) {\r\n      return this.cache[key] && copy(this.cache[key]);\r\n    }\r\n    add(key, value) {\r\n      this.cache[key] = value;\r\n    }\r\n    render() {\r\n      return (\r\n        <TemplateCacheContext.Provider value={this.state}>\r\n          <WrappedComponent {...this.props} />\r\n        </TemplateCacheContext.Provider>\r\n      );\r\n    }\r\n  }\r\n  return TemplateCacheProvider;\r\n};\r\n\r\nexport const withTemplateCache = WrappedComponent => {\r\n  class TemplateCacheConsumer extends React.Component {\r\n    render() {\r\n      return (\r\n        <TemplateCacheContext.Consumer>\r\n          {cache => <WrappedComponent {...this.props} templateCache={cache} />}\r\n        </TemplateCacheContext.Consumer>\r\n      );\r\n    }\r\n  }\r\n  return TemplateCacheConsumer;\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport hoistNonReactStatic from \"hoist-non-react-statics\";\r\n\r\nconst NavigationContext = React.createContext({});\r\n\r\nexport const withNavigationProvider = (\r\n  WrappedComponent,\r\n  Navigator,\r\n  context\r\n) => {\r\n  let navigator;\r\n  const mapDispatchToProps = dispatch => {\r\n    if (!navigator) navigator = new Navigator(dispatch, context);\r\n    return {\r\n      furmlyNavigator: {\r\n        visible: args => navigator.alreadyVisible(args),\r\n        replaceStack: arr => navigator.replaceStack(arr),\r\n        navigate: args => navigator.navigate(args),\r\n        setParams: args => navigator.setParams(args),\r\n        clearStack: () => navigator.clear(),\r\n        goBack: args => navigator.goBack(args)\r\n      }\r\n    };\r\n  };\r\n  class NavigationProvider extends React.Component {\r\n    render() {\r\n      return (\r\n        <NavigationContext.Provider value={this.props.furmlyNavigator}>\r\n          {this.props.children}\r\n        </NavigationContext.Provider>\r\n      );\r\n    }\r\n  }\r\n  const ConnectedNavigationProvider = connect(\r\n    null,\r\n    mapDispatchToProps\r\n  )(NavigationProvider);\r\n\r\n  return props => (\r\n    <ConnectedNavigationProvider>\r\n      <WrappedComponent {...props} />\r\n    </ConnectedNavigationProvider>\r\n  );\r\n};\r\n\r\nexport const withNavigation = WrappedComponent => {\r\n  class NavigationConsumer extends React.Component {\r\n    render() {\r\n      return (\r\n        <NavigationContext.Consumer>\r\n          {furmlyNavigator => (\r\n            <WrappedComponent\r\n              {...this.props}\r\n              furmlyNavigator={furmlyNavigator}\r\n            />\r\n          )}\r\n        </NavigationContext.Consumer>\r\n      );\r\n    }\r\n  }\r\n  hoistNonReactStatic(NavigationConsumer, WrappedComponent);\r\n  return NavigationConsumer;\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchFurmlyProcess, runFurmlyProcess } from \"./actions\";\r\nimport _ from \"lodash\";\r\nimport PropTypes from \"prop-types\";\r\nimport invariants from \"./utils/invariants\";\r\nimport withLogger from \"./furmly_base\";\r\nimport { withTemplateCacheProvider } from \"./furmly_template_cache_context\";\r\nimport { withNavigation } from \"./furmly_navigation_context\";\r\nimport { withProcessProvider } from \"./furmly_process_context\";\r\n/**\r\n * Higher order function that recieves Platform specific implementation of Input\r\n * @param  {Function} Input Input class\r\n * @return {Function}       Wrapped class\r\n */\r\nexport default (ProgressBar, TextView, FurmlyView, Layout) => {\r\n  invariants.validComponent(ProgressBar, \"ProgressBar\");\r\n  invariants.validComponent(TextView, \"TextView\");\r\n  invariants.validComponent(FurmlyView, \"FurmlyView\");\r\n\r\n  //map elements in FurmlyInput props to elements in store.\r\n  const mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n    let _state = state.furmly.view[`${ownProps.id}`];\r\n    return {\r\n      busy: state.furmly.view[`${ownProps.id}-busy`],\r\n      description: _state && _state.description,\r\n      instanceId: _state && _state.instanceId,\r\n      message: state.furmly.view.message,\r\n      completed: _state && _state.completed\r\n    };\r\n  };\r\n\r\n  const mapDispatchToProps = dispatch => {\r\n    return {\r\n      fetch: (id, params) => {\r\n        dispatch(fetchFurmlyProcess(id, params));\r\n      },\r\n      runProcess: info => {\r\n        dispatch(runFurmlyProcess(info));\r\n      }\r\n    };\r\n  };\r\n\r\n  const componentNames = {\r\n    view: \"view\",\r\n    text: \"text\",\r\n    busy: \"busy\"\r\n  };\r\n  const componentNamesArr = Object.keys(componentNames);\r\n  class FurmlyProcess extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {};\r\n      this.submit = this.submit.bind(this);\r\n      this.getCurrentComponent = this.getCurrentComponent.bind(this);\r\n    }\r\n    componentDidMount() {\r\n      if (\r\n        !this.props.description ||\r\n        (this.props.id !== this.props.description._id &&\r\n          this.props.id !== this.props.description.uid)\r\n      ) {\r\n        this.props.fetch(this.props.id, this.props.fetchParams);\r\n      }\r\n    }\r\n    componentWillReceiveProps(next) {\r\n      if (next.completed && next.completed != this.props.completed) {\r\n        return this.props.processCompleted(next.props, this.props);\r\n      }\r\n\r\n      if (\r\n        ((next.id !== this.props.id ||\r\n          !_.isEqual(next.fetchParams, this.props.fetchParams)) &&\r\n          !next.busy &&\r\n          !next.description) ||\r\n        (next.id == this.props.id &&\r\n          !_.isEqual(next.fetchParams, this.props.fetchParams) &&\r\n          !next.busy)\r\n      ) {\r\n        this.props.log(\"fetching...\");\r\n        this.props.fetch(next.id, next.fetchParams);\r\n      }\r\n    }\r\n    submit(form) {\r\n      this.props.runProcess({\r\n        id: this.props.id,\r\n        form,\r\n        currentStep: this.props.currentStep,\r\n        instanceId: this.props.instanceId\r\n      });\r\n    }\r\n    getCurrentComponentName() {\r\n      if (\r\n        this.props.busy ||\r\n        (typeof this.props.busy == \"undefined\" && !this.props.description) ||\r\n        this.props.completed\r\n      ) {\r\n        return componentNames.busy;\r\n      }\r\n      if (!this.props.description) {\r\n        return componentNames.text;\r\n      }\r\n      return componentNames.view;\r\n    }\r\n    getCurrentComponent(name) {\r\n      switch (name) {\r\n        case componentNames.view:\r\n          return (\r\n            <FurmlyView\r\n              currentStep={this.props.currentStep}\r\n              currentProcess={this.props.id}\r\n              submit={this.submit}\r\n            />\r\n          );\r\n        case componentNames.text:\r\n          return (\r\n            <TextView text=\"Sorry we couldnt load that process...please wait a few minutes and retry.\" />\r\n          );\r\n        case componentNames.busy:\r\n          return <ProgressBar title=\"Please wait...\" />;\r\n      }\r\n    }\r\n    render() {\r\n      this.props.log(\"render\");\r\n\r\n      if (Layout)\r\n        return (\r\n          <Layout\r\n            componentNames={componentNamesArr}\r\n            getCurrentComponent={name => this.getCurrentComponent(name)}\r\n            getCurrentComponentName={() => this.getCurrentComponentName()}\r\n          />\r\n        );\r\n\r\n      return this.getCurrentComponent(this.getCurrentComponentName());\r\n    }\r\n  }\r\n\r\n  FurmlyProcess.propTypes = {\r\n    id: PropTypes.string.isRequired,\r\n    fetchParams: PropTypes.object,\r\n    description: PropTypes.object\r\n  };\r\n  return {\r\n    getComponent: () =>\r\n      connect(\r\n        mapStateToProps,\r\n        mapDispatchToProps\r\n      )(\r\n        withLogger(\r\n          withNavigation(\r\n            withTemplateCacheProvider(withProcessProvider(FurmlyProcess))\r\n          )\r\n        )\r\n      ),\r\n    FurmlyProcess,\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  };\r\n};\r\n","import React, { PureComponent } from \"react\";\r\nimport invariants from \"./utils/invariants\";\r\nimport withLogger from \"./furmly_base\";\r\nexport default (Layout, Header, Container) => {\r\n  invariants.validComponent(Layout, \"Layout\");\r\n  invariants.validComponent(Header, \"Header\");\r\n  invariants.validComponent(Container, \"Container\");\r\n  class FurmlySection extends PureComponent {\r\n    constructor(props) {\r\n      super(props);\r\n    }\r\n    render() {\r\n      this.props.log(\"render\");\r\n      /*jshint ignore:start*/\r\n      //get the container for retrieving\r\n      return (\r\n        <Layout\r\n          header={\r\n            <Header description={this.props.description}>\r\n              {this.props.label}\r\n            </Header>\r\n          }\r\n          content={\r\n            <Container\r\n              elements={this.props.args.elements}\r\n              name={this.props.name}\r\n              value={this.props.value}\r\n              valueChanged={this.props.valueChanged}\r\n              validator={this.props.validator}\r\n            />\r\n          }\r\n        />\r\n      );\r\n      /*jshint ignore:end*/\r\n    }\r\n  }\r\n\r\n  return { getComponent: () => withLogger(FurmlySection), FurmlySection };\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { runFurmlyProcessor } from \"./actions\";\r\nimport ValidationHelper, { VALIDATOR_TYPES } from \"./utils/validator\";\r\nimport invariants from \"./utils/invariants\";\r\nimport {\r\n  getKey,\r\n  unwrapObjectValue,\r\n  getBusyKey,\r\n  getErrorKey\r\n} from \"./utils/view\";\r\nimport withLogger from \"./furmly_base\";\r\nimport { withProcess } from \"./furmly_process_context\";\r\nexport default (ProgressIndicator, Layout, Container) => {\r\n  if (\r\n    invariants.validComponent(ProgressIndicator, \"ProgressIndicator\") &&\r\n    invariants.validComponent(Layout, \"Layout\") &&\r\n    !Container\r\n  )\r\n    throw new Error(\"Container cannot be null (furmly_select)\");\r\n\r\n  //map elements in FurmlyView props to elements in store.\r\n  const mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n    if (ownProps.args.type == \"PROCESSOR\") {\r\n      let component_uid = getKey(state, ownProps.component_uid, ownProps);\r\n      let st = state.furmly.view[component_uid];\r\n      return {\r\n        items: st,\r\n        busy: !!state.furmly.view[getBusyKey(component_uid)],\r\n        error: !!state.furmly.view[getErrorKey(component_uid)],\r\n        component_uid\r\n      };\r\n    }\r\n    //evaluate stuff in the parent container to retrieve the\r\n  };\r\n\r\n  const mapDispatchToProps = dispatch => {\r\n    return {\r\n      fetch: (id, params, key) => {\r\n        dispatch(runFurmlyProcessor(id, params, key));\r\n      }\r\n    };\r\n  };\r\n\r\n  class FurmlySelect extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {};\r\n      this.fetchItems = this.fetchItems.bind(this);\r\n      this.onValueChanged = this.onValueChanged.bind(this);\r\n      this.selectFirstItem = this.selectFirstItem.bind(this);\r\n      this.getDisplayValue = this.getDisplayValue.bind(this);\r\n      this.getValueBasedOnMode = this.getValueBasedOnMode.bind(this);\r\n      this.props.validator.validate = () => {\r\n        return this.runValidators();\r\n      };\r\n      this.isValidValue = this.isValidValue.bind(this);\r\n      this.isObjectIdMode = this.isObjectIdMode.bind(this);\r\n    }\r\n    hasValue() {\r\n      return !!this.props.value || \"is required\";\r\n    }\r\n    runValidators() {\r\n      return new ValidationHelper(this).run();\r\n    }\r\n    onValueChanged(value) {\r\n      if (this._mounted) {\r\n        this.props.valueChanged({\r\n          [this.props.name]: this.getValueBasedOnMode(value)\r\n        });\r\n        if (this.props.displayValueChanged) {\r\n          setTimeout(\r\n            () =>\r\n              this.props.displayValueChanged({\r\n                [this.props.name]: this.getDisplayValue(value)\r\n              }),\r\n            0\r\n          );\r\n        }\r\n      }\r\n    }\r\n    fetchItems(source, args, component_uid) {\r\n      if (this._mounted) {\r\n        if (!source || !component_uid)\r\n          throw new Error(\"Something is wrong with our configuration\");\r\n        this.props.fetch(source, JSON.parse(args || \"{}\"), component_uid);\r\n      }\r\n    }\r\n    isValidValue(items = this.props.items, value = this.props.value) {\r\n      value = unwrapObjectValue(value);\r\n      return (\r\n        items &&\r\n        items.length &&\r\n        items.filter(x => x._id == value || x.uid == value).length\r\n      );\r\n    }\r\n    getDisplayValue(value = this.props.value, items = this.props.items) {\r\n      value = unwrapObjectValue(value);\r\n      return (\r\n        items &&\r\n        items.length &&\r\n        items.filter(x => x._id == value || x.uid == value)[0].displayLabel\r\n      );\r\n    }\r\n\r\n    getValueBasedOnMode(v) {\r\n      return (\r\n        (this.props.args &&\r\n          this.props.args.mode &&\r\n          typeof v !== \"object\" &&\r\n          this.props.args.mode == \"ObjectId\" && { $objectID: v }) ||\r\n        v\r\n      );\r\n    }\r\n    componentWillReceiveProps(next) {\r\n      if (\r\n        !next.error &&\r\n        (next.args.config.value !== this.props.args.config.value ||\r\n          (next.args.config.customArgs !== this.props.args.config.customArgs &&\r\n            !next.busy) ||\r\n          next.component_uid !== this.props.component_uid ||\r\n          (next.args.config.value &&\r\n            typeof next.items == \"undefined\" &&\r\n            !next.busy))\r\n      ) {\r\n        return this.fetchItems(\r\n          next.args.config.value,\r\n          next.args.config.customArgs,\r\n          next.component_uid\r\n        );\r\n      }\r\n\r\n      if (next.items && next.items.length == 1 && !next.value) {\r\n        return this.selectFirstItem(next.items[0].uid || next.items[0]._id);\r\n      }\r\n\r\n      if (\r\n        (next.items &&\r\n          next.value &&\r\n          !this.isValidValue(next.items, next.value)) ||\r\n        (!next.items && !next.busy && !next.error)\r\n      ) {\r\n        return this.onValueChanged(null);\r\n      }\r\n    }\r\n\r\n    selectFirstItem(item) {\r\n      setTimeout(() => {\r\n        this.onValueChanged(item);\r\n      }, 0);\r\n    }\r\n    componentWillUnmount() {\r\n      this._mounted = false;\r\n    }\r\n    isObjectIdMode() {\r\n      return this.props.args && this.props.args.mode === \"ObjectId\";\r\n    }\r\n    componentDidMount() {\r\n      this._mounted = true;\r\n      if (!this.props.items) {\r\n        this.props.log(\r\n          \"fetching items in componentDidMount for current:\" + this.props.name\r\n        );\r\n        this.fetchItems(\r\n          this.props.args.config.value,\r\n          this.props.args.config.customArgs,\r\n          this.props.component_uid\r\n        );\r\n      }\r\n\r\n      if (\r\n        this.props.items &&\r\n        this.props.items.length == 1 &&\r\n        !this.props.value\r\n      ) {\r\n        return this.selectFirstItem(this.props.items[0]._id);\r\n      }\r\n      if (\r\n        this.isObjectIdMode() &&\r\n        this.props.value &&\r\n        typeof this.props.value !== \"object\"\r\n      ) {\r\n        //update the form to indicate its an objectId.\r\n        return setTimeout(() => {\r\n          this.onValueChanged(this.props.value);\r\n        }, 0);\r\n      }\r\n    }\r\n    isEmptyOrNull(v) {\r\n      return !v || !v.length;\r\n    }\r\n    render() {\r\n      /*jshint ignore:start*/\r\n\r\n      this.props.log(\"render\");\r\n      if (this.isEmptyOrNull(this.props.items)) {\r\n        this.props.log(`${this.props.name} is empty`);\r\n        return <ProgressIndicator />;\r\n      }\r\n      const {\r\n        args: {\r\n          config: { keyProperty }\r\n        }\r\n      } = this.props;\r\n      return (\r\n        <Layout\r\n          value={this.props.label}\r\n          inner={\r\n            <Container\r\n              disabled={\r\n                !!this.props.args.disabled ||\r\n                (this.props.items && this.props.items.length == 1)\r\n              }\r\n              errors={this.state.errors}\r\n              label={this.props.label}\r\n              items={this.props.items}\r\n              displayProperty=\"displayLabel\"\r\n              keyProperty={\r\n                (keyProperty && keyProperty.split(\",\")) || [\"uid\", \"_id\"]\r\n              }\r\n              value={unwrapObjectValue(this.props.value)}\r\n              valueChanged={this.onValueChanged}\r\n            />\r\n          }\r\n        />\r\n      );\r\n      /*jshint ignore:end*/\r\n    }\r\n  }\r\n  FurmlySelect.hasDisplayValue = true;\r\n  return {\r\n    getComponent: () =>\r\n      withProcess(\r\n        connect(\r\n          mapStateToProps,\r\n          mapDispatchToProps\r\n        )(withLogger(FurmlySelect))\r\n      ),\r\n    FurmlySelect,\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport invariants from \"./utils/invariants\";\r\nimport { unwrapObjectValue } from \"./utils/view\";\r\nimport { connect } from \"react-redux\";\r\nimport { runFurmlyProcessor } from \"./actions\";\r\nimport ValidationHelper from \"./utils/validator\";\r\nimport { getKey, getErrorKey, getBusyKey } from \"./utils/view\";\r\nimport _ from \"lodash\";\r\nimport withLogger from \"./furmly_base\";\r\nimport { withProcess } from \"./furmly_process_context\";\r\n\r\nexport default (Layout, Picker, ProgressBar, Container) => {\r\n  //map elements in FurmlyView props to elements in store.\r\n  invariants.validComponent(Layout, \"Layout\");\r\n  invariants.validComponent(Picker, \"Picker\");\r\n  invariants.validComponent(Container, \"Container\");\r\n  const noPath = \"selectset_no_path\";\r\n  const noItems = [];\r\n  const mapDispatchToProps = dispatch => {\r\n    return {\r\n      getItems: (id, args, key, extra) =>\r\n        dispatch(runFurmlyProcessor(id, args, key, extra))\r\n    };\r\n  };\r\n  const mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n    let component_uid = getKey(state, ownProps.component_uid, ownProps),\r\n      items = state.furmly.view[component_uid] || ownProps.args.items;\r\n    return {\r\n      busy: !!state.furmly.view[getBusyKey(component_uid)],\r\n      error: !!state.furmly.view[getErrorKey(component_uid)],\r\n      items,\r\n      contentItems: getPickerItemsById(ownProps.value, items),\r\n      component_uid\r\n    };\r\n  };\r\n  const getPickerItemsById = function(v, items) {\r\n    if (v && items && items.length) {\r\n      let z = unwrapObjectValue(v);\r\n      let r = items.filter(x => x.id == z);\r\n      return (r.length && r[0].elements) || noItems;\r\n    }\r\n\r\n    return noItems;\r\n  };\r\n  class FurmlySelectSet extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.retryFetch = this.retryFetch.bind(this);\r\n      this.onPickerValueChanged = this.onPickerValueChanged.bind(this);\r\n      this.onContainerValueChanged = this.onContainerValueChanged.bind(this);\r\n      this.getPickerValue = this.getPickerValue.bind(this);\r\n      this.getContainerValue = this.getContainerValue.bind(this);\r\n      let containerValues = (props.contentItems || []).reduce((sum, x) => {\r\n        if (this.props.extra.hasOwnProperty(x.name))\r\n          sum[x.name] = this.props.extra[x.name];\r\n        return sum;\r\n      }, {});\r\n      this.state = {\r\n        containerValues,\r\n        containerValidator: {}\r\n      };\r\n      this.selectFirstItem = this.selectFirstItem.bind(this);\r\n      this.respondToPickerValueChanged = this.respondToPickerValueChanged.bind(\r\n        this\r\n      );\r\n      this.oneOption = this.oneOption.bind(this);\r\n      this.props.validator.validate = () => {\r\n        return this.runValidators();\r\n      };\r\n      this.getValueBasedOnMode = this.getValueBasedOnMode.bind(this);\r\n      this.isObjectIdMode = this.isObjectIdMode.bind(this);\r\n    }\r\n    hasValue() {\r\n      return !!this.props.value || \"is required\";\r\n    }\r\n    runValidators() {\r\n      return Promise.all([\r\n        new ValidationHelper(this).run(),\r\n        this.state.containerValidator.validate()\r\n      ]);\r\n    }\r\n\r\n    componentWillReceiveProps(next) {\r\n      if (\r\n        !next.error &&\r\n        (next.args.processor !== this.props.args.processor ||\r\n          (next.component_uid !== this.props.component_uid &&\r\n            next.args.processor) ||\r\n          typeof next.items == \"undefined\") &&\r\n        !next.busy\r\n      )\r\n        this.fetchItems(\r\n          next.args.processor,\r\n          next.args.processorArgs,\r\n          next.component_uid\r\n        );\r\n\r\n      if (next.items && next.items.length == 1 && !next.value) {\r\n        return this.selectFirstItem(next.items);\r\n      }\r\n    }\r\n\r\n    retryFetch() {\r\n      this.props.log(`retrying fetch`);\r\n      this.fetchItems(\r\n        this.props.args.processor,\r\n        this.props.args.processorArgs,\r\n        this.props.component_uid,\r\n        { retry: true }\r\n      );\r\n    }\r\n\r\n    fetchItems(source, args, component_uid) {\r\n      let _args = this._onContainerValueChanged.call(\r\n        this,\r\n        this.state.containerValues\r\n      );\r\n      _args.shift();\r\n      this.props.log(`fetching items`);\r\n      this.props.getItems(\r\n        source,\r\n        Object.assign(\r\n          JSON.parse(args || this.props.args.processorArgs || \"{}\"),\r\n          {\r\n            _args\r\n          }\r\n        ),\r\n        component_uid || this.props.component_uid\r\n      );\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      this._mounted = false;\r\n    }\r\n    componentDidMount() {\r\n      this._mounted = true;\r\n      if (this.props.args.processor && typeof this.props.items == \"undefined\") {\r\n        this.fetchItems(this.props.args.processor);\r\n      }\r\n\r\n      if (\r\n        this.props.items &&\r\n        this.props.items.length == 1 &&\r\n        !this.props.value\r\n      ) {\r\n        return setTimeout(() => {\r\n          this.selectFirstItem();\r\n        }, 0);\r\n      }\r\n\r\n      if (\r\n        this.isObjectIdMode() &&\r\n        this.props.value &&\r\n        typeof this.props.value !== \"object\"\r\n      ) {\r\n        //update the form to indicate its an objectId.\r\n        return setTimeout(() => {\r\n          this.onPickerValueChanged(this.props.value);\r\n        }, 0);\r\n      }\r\n    }\r\n\r\n    isObjectIdMode() {\r\n      return this.props.args && this.props.args.mode === \"ObjectId\";\r\n    }\r\n    oneOption() {\r\n      return this.props.items && this.props.items.length == 1;\r\n    }\r\n    getCurrentContainerValue() {\r\n      return (\r\n        (this.props.args.path && {\r\n          [this.props.args.path]: this.props.extra[this.props.args.path]\r\n        }) ||\r\n        this.state.containerValues\r\n      );\r\n    }\r\n    selectFirstItem(items = this.props.items) {\r\n      this.onPickerValueChanged(items[0].id);\r\n    }\r\n    getPickerValue(value = this.props.value) {\r\n      return {\r\n        [this.props.name]: this.getValueBasedOnMode(value)\r\n      };\r\n    }\r\n\r\n    onContainerValueChanged(value, pickerValue) {\r\n      let eve = this._onContainerValueChanged.call(this, value, pickerValue);\r\n\r\n      this.props.valueChanged.apply(this, eve);\r\n    }\r\n    _shouldComponentUpdateComparer(x, y, a, b, key) {\r\n      if (a == b) return true;\r\n      if (key == \"extra\") {\r\n        if (y.contentItems && y.contentItems.length)\r\n          return _.isEqual(a[y.args.path], b[y.args.path]);\r\n\r\n        return true;\r\n      }\r\n    }\r\n    //potentially expensive.\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n      if (\r\n        (nextProps.args.path ||\r\n          (!nextProps.args.path && !nextProps.contentItems.length)) &&\r\n        _.isEqual(this.state.errors, nextState.errors) &&\r\n        _.isEqualWith(\r\n          this.props,\r\n          nextProps,\r\n          this._shouldComponentUpdateComparer.bind(this, this.props, nextProps)\r\n        )\r\n      ) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    }\r\n    _onContainerValueChanged(value, pickerValue) {\r\n      pickerValue = pickerValue || this.getPickerValue();\r\n      if (this.props.args.path) {\r\n        let _p = [pickerValue];\r\n        //push this to unset previous value\r\n        if (!value) _p.push({ [this.props.args.path]: undefined });\r\n        else _p.push(value);\r\n        return _p;\r\n      }\r\n\r\n      let superCancel =\r\n        this.state.containerValues &&\r\n        Object.keys(this.state.containerValues).reduce((sum, x) => {\r\n          return (sum[x] = undefined), sum;\r\n        }, {});\r\n\r\n      //path is not defined so unpack the properties and send.\r\n      let result = [\r\n        pickerValue,\r\n        ...Object.keys((value && value[noPath]) || {}).map(x => {\r\n          return { [x]: value[noPath][x] };\r\n        })\r\n      ];\r\n\r\n      if (superCancel && Object.keys(superCancel).length > 0) {\r\n        //insert this to remove previous values.\r\n        result.splice(1, 0, superCancel);\r\n      }\r\n      setTimeout(() => {\r\n        if (this._mounted) {\r\n          this.setState({\r\n            containerValues: (value && value[noPath]) || null\r\n          });\r\n        }\r\n      });\r\n      this.props.log(`container values changed ${JSON.stringify(result)}`);\r\n      return result;\r\n    }\r\n\r\n    getValueBasedOnMode(v) {\r\n      return (\r\n        (this.props.args &&\r\n          this.props.args.mode &&\r\n          typeof v !== \"object\" &&\r\n          this.props.args.mode == \"ObjectId\" && { $objectID: v }) ||\r\n        v\r\n      );\r\n    }\r\n    respondToPickerValueChanged(v) {\r\n      this.onContainerValueChanged(null, this.getPickerValue(v));\r\n    }\r\n    onPickerValueChanged(v) {\r\n      this.onContainerValueChanged(\r\n        this.getCurrentContainerValue(),\r\n        this.getPickerValue(v)\r\n      );\r\n    }\r\n    getContainerValue() {\r\n      return this.props.args.path\r\n        ? this.props.extra\r\n          ? this.props.extra[this.props.args.path]\r\n          : {}\r\n        : this.props.extra;\r\n    }\r\n    isEmptyOrNull(v) {\r\n      return !v || !v.length;\r\n    }\r\n    render() {\r\n      this.props.log(\"render\");\r\n      /*jshint ignore:start*/\r\n      if (this.props.busy) {\r\n        this.props.log(`${this.props.name} is busy`);\r\n        return <ProgressBar onClick={this.props.retryFetch} />;\r\n      }\r\n\r\n      return (\r\n        <Layout\r\n          value={this.props.label}\r\n          inner={\r\n            <Picker\r\n              label={this.props.label}\r\n              disabled={!!this.props.args.disabled || this.oneOption()}\r\n              items={this.props.items}\r\n              errors={this.state.errors}\r\n              displayProperty=\"displayLabel\"\r\n              keyProperty={[\"id\"]}\r\n              value={unwrapObjectValue(this.props.value)}\r\n              valueChanged={this.respondToPickerValueChanged}\r\n            />\r\n          }\r\n          extraElements={\r\n            <Container\r\n              name={this.props.args.path || noPath}\r\n              value={this.getContainerValue()}\r\n              valueChanged={this.onContainerValueChanged}\r\n              elements={this.props.contentItems}\r\n              validator={this.state.containerValidator}\r\n            />\r\n          }\r\n        />\r\n      );\r\n      /*jshint ignore:end*/\r\n    }\r\n  }\r\n\r\n  FurmlySelectSet.notifyExtra = true;\r\n  return {\r\n    getComponent: () =>\r\n      withProcess(\r\n        connect(\r\n          mapStateToProps,\r\n          mapDispatchToProps\r\n        )(withLogger(FurmlySelectSet))\r\n      ),\r\n    FurmlySelectSet,\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  };\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport ValidatorHelper from \"./utils/validator\";\r\nimport invariants from \"./utils/invariants\";\r\nimport _ from \"lodash\";\r\nimport { runFurmlyProcessor, clearElementData } from \"./actions\";\r\nimport { getKey, copy, isArr } from \"./utils/view\";\r\nimport withLogger from \"./furmly_base\";\r\nimport { withTemplateCache } from \"./furmly_template_cache_context\";\r\nimport { withProcess } from \"./furmly_process_context\";\r\n\r\nexport default (\r\n  Layout,\r\n  Button,\r\n  List,\r\n  Modal,\r\n  ErrorText,\r\n  ProgressBar,\r\n  ConfirmationModal,\r\n  Container\r\n) => {\r\n  invariants.validComponent(Layout, \"Layout\");\r\n  invariants.validComponent(Button, \"Button\");\r\n  invariants.validComponent(List, \"List\");\r\n  invariants.validComponent(Modal, \"Modal\");\r\n  invariants.validComponent(ErrorText, \"ErrorText\");\r\n  invariants.validComponent(ConfirmationModal, \"ConfirmationModal\");\r\n  invariants.validComponent(Container, \"Container\");\r\n\r\n  const EDIT = \"EDIT\",\r\n    NEW = \"NEW\";\r\n  const mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n    let component_uid = getKey(state, ownProps.component_uid, ownProps);\r\n\r\n    return {\r\n      component_uid,\r\n      busy: state.furmly.view[`${component_uid}-busy`],\r\n      items: ownProps.value\r\n    };\r\n  };\r\n  const equivalent = function(arr, arr2) {\r\n    if ((!arr && !arr2) || (arr && arr.length == 0 && arr2 && arr2.length == 0))\r\n      return true;\r\n\r\n    if ((arr && !arr2) || (arr2 && !arr) || arr.length !== arr2.length)\r\n      return false;\r\n\r\n    return _.isEqualWith(arr, arr2, (objValue, otherValue) => {\r\n      if (objValue === arr || otherValue === arr2) return;\r\n      if (typeof otherValue == \"string\") {\r\n        return !!_.findKey(objValue, function(v) {\r\n          return v == otherValue;\r\n        });\r\n      }\r\n      let r = _.isMatch(objValue, otherValue);\r\n      return r;\r\n    });\r\n  };\r\n  const mapDispatchToProps = dispatch => {\r\n    return {\r\n      getListItemDataTemplate: (id, args, key) =>\r\n        dispatch(runFurmlyProcessor(id, args, key)),\r\n      clearElementData: key => dispatch(clearElementData(key))\r\n    };\r\n  };\r\n\r\n  class FurmlyList extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        validator: {},\r\n        modalVisible: false,\r\n        confirmationVisible: false\r\n      };\r\n      this.showModal = this.showModal.bind(this);\r\n      this.closeModal = this.closeModal.bind(this);\r\n      this.valueChanged = this.valueChanged.bind(this);\r\n      this.getItemTemplate = this.getItemTemplate.bind(this);\r\n      this.edit = this.edit.bind(this);\r\n      this.runValidators = this.runValidators.bind(this);\r\n      this.isDisabled = this.isDisabled.bind(this);\r\n      this.displayValueChanged = this.displayValueChanged.bind(this);\r\n      this.getListItemDataTemplate = this.getListItemDataTemplate.bind(this);\r\n      this.cancelRemove = this.cancelRemove.bind(this);\r\n      this.confirmRemove = this.confirmRemove.bind(this);\r\n      this.props.validator.validate = () => {\r\n        return this.runValidators();\r\n      };\r\n      this.remove = this.remove.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(next) {\r\n      if (this.props.component_uid !== next.component_uid) {\r\n        if (this._mounted) {\r\n          this.getItemTemplate();\r\n          if (\r\n            (!next.dataTemplate || next.dataTemplate.length) &&\r\n            !next.items &&\r\n            next.args &&\r\n            next.args.default &&\r\n            next.args.default.length\r\n          ) {\r\n            this.props.valueChanged({\r\n              [this.props.name]: next.args.default.slice()\r\n            });\r\n          }\r\n          this.setState({\r\n            edit: null,\r\n            modalVisible: false\r\n          });\r\n        }\r\n      }\r\n      if (\r\n        next.args.listItemDataTemplateProcessor &&\r\n        next.items &&\r\n        next.items.length &&\r\n        next.items !== next.dataTemplate &&\r\n        next.dataTemplate == this.props.dataTemplate &&\r\n        !next.busy\r\n      ) {\r\n        this.getListItemDataTemplate(next.items, next);\r\n      }\r\n\r\n      if (\r\n        next.dataTemplate &&\r\n        next.dataTemplate !== this.props.dataTemplate &&\r\n        !next.busy\r\n      ) {\r\n        if (this._mounted) {\r\n          this.props.valueChanged({\r\n            [this.props.name]: next.dataTemplate\r\n          });\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    componentWillUnmount() {\r\n      this._mounted = false;\r\n      //need to cleanup the namespace.\r\n      this.props.clearElementData(this.props.component_uid);\r\n    }\r\n\r\n    componentDidMount() {\r\n      this._mounted = true;\r\n      //if its template is a reference then store it.\r\n      const ref = this.isTag();\r\n      if (ref && !this.props.templateCache.get(ref)) {\r\n        this.props.templateCache.add(\r\n          ref,\r\n          Array.prototype.isPrototypeOf(this.props.args.itemTemplate)\r\n            ? this.props.args.itemTemplate\r\n            : this.props.args.itemTemplate.template\r\n        );\r\n      }\r\n\r\n      let equal = equivalent(this.props.dataTemplate, this.props.items);\r\n      //if theres a data template processor then run it.\r\n      if (\r\n        this.props.args.listItemDataTemplateProcessor &&\r\n        this.props.items &&\r\n        this.props.items.length &&\r\n        !equal\r\n      ) {\r\n        this.getListItemDataTemplate(this.props.items);\r\n      }\r\n\r\n      if (this.props.dataTemplate && this.props.dataTemplate.length && equal) {\r\n        setTimeout(() => {\r\n          this.props.valueChanged({\r\n            [this.props.name]: this.props.dataTemplate\r\n          });\r\n        }, 0);\r\n      }\r\n\r\n      if (\r\n        (!this.props.dataTemplate || !this.props.dataTemplate.length) &&\r\n        !this.props.items &&\r\n        this.props.args &&\r\n        this.props.args.default &&\r\n        this.props.args.default.length\r\n      ) {\r\n        setTimeout(() => {\r\n          this.props.valueChanged({\r\n            [this.props.name]: this.props.args.default.slice()\r\n          });\r\n        });\r\n      }\r\n\r\n      this.getItemTemplate();\r\n    }\r\n\r\n    getListItemDataTemplate(i, props = this.props) {\r\n      this.props.getListItemDataTemplate(\r\n        props.args.listItemDataTemplateProcessor,\r\n        i,\r\n        props.component_uid\r\n      );\r\n    }\r\n    isTag() {\r\n      const { itemTemplate, behavior } = this.props.args;\r\n      return (\r\n        itemTemplate &&\r\n        ((!isArr(itemTemplate) &&\r\n          itemTemplate.template &&\r\n          itemTemplate.furmly_ref) ||\r\n          (isArr(itemTemplate) && behavior && behavior.furmly_ref))\r\n      );\r\n    }\r\n    isTemplateRef() {\r\n      const { itemTemplate, behavior } = this.props.args;\r\n      return (\r\n        (itemTemplate && itemTemplate.template_ref) ||\r\n        (behavior && behavior.template_ref)\r\n      );\r\n    }\r\n    runValidators() {\r\n      return new ValidatorHelper(this).run();\r\n    }\r\n    isDisabled() {\r\n      return this.props.args && this.props.args.disabled;\r\n    }\r\n    showModal() {\r\n      if (!this.isDisabled()) this.setState({ modalVisible: true, mode: NEW });\r\n    }\r\n    hasValue() {\r\n      return (\r\n        (this.props.items && this.props.items.length) ||\r\n        \"Requires atleast one item to have been added to the list\"\r\n      );\r\n    }\r\n    isLessThanMaxLength(element) {\r\n      const { items } = this.props;\r\n      return (\r\n        (items && items.length && items.length <= element.args.max) ||\r\n        (element.error || \"The maximum number of items is \" + element.args.max)\r\n      );\r\n    }\r\n    isGreaterThanMinLength(element) {\r\n      const { items } = this.props;\r\n      return (\r\n        (items && items.length && items.length >= element.args.min) ||\r\n        (element.error || \"The minimum number of items is \" + element.args.min)\r\n      );\r\n    }\r\n    closeModal(result) {\r\n      //he/she clicked ok\r\n      if (result) {\r\n        this.state.validator\r\n          .validate()\r\n          .then(() => {\r\n            let items = (this.props.items || []).slice();\r\n\r\n            if (this.state.mode == NEW) {\r\n              items.push(this.state.edit);\r\n            } else {\r\n              items.splice(this.state.existing, 1, this.state.edit);\r\n            }\r\n            this.props.valueChanged({ [this.props.name]: items });\r\n            this.setState({\r\n              modalVisible: false,\r\n              edit: null,\r\n              existing: null\r\n            });\r\n          })\r\n          .catch(er => {\r\n            this.props.log(er);\r\n          });\r\n        return;\r\n      }\r\n      //canceled the modal box.\r\n\r\n      this.setState({ modalVisible: false, edit: null });\r\n    }\r\n    valueChanged(v) {\r\n      this.setState({ edit: v && v[FurmlyList.modalName()] });\r\n    }\r\n    displayValueChanged(v) {\r\n      const value = v && v[FurmlyList.modalName()];\r\n      if (value) {\r\n        const { edit } = this.state;\r\n        let ex = { ...edit };\r\n        Object.keys(value).forEach(x => {\r\n          Object.defineProperty(ex, x + \"_display\", {\r\n            value: value[x],\r\n            enumerable: false\r\n          });\r\n        });\r\n        this.setState({ edit: ex });\r\n      }\r\n    }\r\n    remove(index) {\r\n      this.setState({\r\n        confirmationVisible: { index }\r\n      });\r\n    }\r\n    cancelRemove() {\r\n      this.setState({ confirmationVisible: false });\r\n    }\r\n    confirmRemove() {\r\n      const { confirmationVisible } = this.state;\r\n      if (confirmationVisible && this.props.items && this.props.items.length) {\r\n        this.setState({ confirmationVisible: false }, () => {\r\n          let items = this.props.items.slice();\r\n          items.splice(confirmationVisible.index, 1);\r\n          this.props.valueChanged({\r\n            [this.props.name]: items\r\n          });\r\n        });\r\n      }\r\n    }\r\n    edit(index) {\r\n      this.setState({\r\n        edit: copy(this.props.items[index]),\r\n        existing: index,\r\n        mode: EDIT,\r\n        modalVisible: true\r\n      });\r\n    }\r\n    static modalName() {\r\n      return \"_modal_\";\r\n    }\r\n\r\n    getItemTemplate() {\r\n      if (this.state.itemTemplate) return;\r\n\r\n      const { behavior, itemTemplate, disabled } = this.props.args;\r\n\r\n      if (\r\n        !this.isTag() &&\r\n        !this.isTemplateRef() &&\r\n        !isArr(itemTemplate) &&\r\n        !disabled\r\n      )\r\n        throw new Error(\"Empty List view item template\");\r\n\r\n      let _itemTemplate = isArr(itemTemplate)\r\n        ? copy(itemTemplate)\r\n        : this.isTag()\r\n        ? copy(itemTemplate.template)\r\n        : this.isTemplateRef()\r\n        ? this.props.templateCache.get(\r\n            (behavior && behavior.template_ref) || itemTemplate.template_ref\r\n          )\r\n        : [];\r\n\r\n      (\r\n        (behavior && behavior.extension) ||\r\n        (itemTemplate && itemTemplate.extension) ||\r\n        []\r\n      ).forEach((element, index) => {\r\n        element.key = index;\r\n        _itemTemplate.push(copy(element));\r\n      });\r\n\r\n      //this happens asynchronously;\r\n\r\n      setTimeout(() => {\r\n        if (this._mounted)\r\n          this.setState({\r\n            itemTemplate: _itemTemplate\r\n          });\r\n      }, 0);\r\n    }\r\n\r\n    render() {\r\n      this.props.log(\"render\");\r\n      if (this.props.busy) {\r\n        return <ProgressBar />;\r\n      }\r\n      let disabled = this.isDisabled();\r\n\r\n      return (\r\n        /*jshint ignore:start */\r\n        <Layout\r\n          value={this.props.label}\r\n          description={this.props.description}\r\n          addButton={<Button disabled={disabled} click={this.showModal} />}\r\n          confirmationModal={\r\n            <ConfirmationModal\r\n              content={\"Are you sure you want to remove the selected item ?\"}\r\n              visibility={!!this.state.confirmationVisible}\r\n              onCancel={this.cancelRemove}\r\n              onConfirm={this.confirmRemove}\r\n            />\r\n          }\r\n          list={\r\n            <List\r\n              items={this.props.items}\r\n              rowClicked={this.edit}\r\n              rowRemoved={this.remove}\r\n              rowTemplate={\r\n                this.props.args.rowTemplate &&\r\n                JSON.parse(this.props.args.rowTemplate)\r\n              }\r\n              disabled={disabled}\r\n            />\r\n          }\r\n          errorText={<ErrorText value={this.state.errors} />}\r\n          modal={\r\n            <Modal\r\n              template={\r\n                <Container\r\n                  elements={this.state.itemTemplate}\r\n                  value={this.state.edit}\r\n                  name={FurmlyList.modalName()}\r\n                  validator={this.state.validator}\r\n                  valueChanged={this.valueChanged}\r\n                  displayValueChanged={this.displayValueChanged}\r\n                />\r\n              }\r\n              visibility={this.state.modalVisible}\r\n              done={this.closeModal}\r\n            />\r\n          }\r\n        />\r\n        /*jshint ignore:end */\r\n      );\r\n    }\r\n  }\r\n\r\n  return {\r\n    getComponent: () =>\r\n      withProcess(\r\n        connect(\r\n          mapStateToProps,\r\n          mapDispatchToProps\r\n        )(withLogger(withTemplateCache(FurmlyList)))\r\n      ),\r\n    mapStateToProps,\r\n    mapDispatchToProps,\r\n    FurmlyList\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport { isObjectIdMode, getValueBasedOnMode } from \"./utils/view\";\r\n\r\nexport default class FurmlyHidden extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.init = this.init.bind(this);\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.init();\r\n\t}\r\n\tinit(props = this.props) {\r\n\t\tif (\r\n\t\t\tprops.args &&\r\n\t\t\tprops.args.default &&\r\n\t\t\tprops.args.default !== props.value &&\r\n\t\t\t!props.value\r\n\t\t)\r\n\t\t\treturn this.props.valueChanged({\r\n\t\t\t\t[props.name]: getValueBasedOnMode(props, props.args.default)\r\n\t\t\t});\r\n\r\n\t\tif (isObjectIdMode(props) && this.props.value !== props.value) {\r\n\t\t\tthis.props.valueChanged({\r\n\t\t\t\t[props.name]: getValueBasedOnMode(props, props.value)\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tcomponentWillReceiveProps(next) {\r\n\t\tthis.init(next);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn null;\r\n\t}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport invariants from \"./utils/invariants\";\r\nimport withLogger from \"./furmly_base\";\r\nimport { withNavigation } from \"./furmly_navigation_context\";\r\nexport default Link => {\r\n  invariants.validComponent(Link, \"Link\");\r\n\r\n  class FurmlyNav extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.go = this.go.bind(this);\r\n      this.state = { link: this.props.value };\r\n    }\r\n    static getParams(firstItemIsLink, link) {\r\n      let key_value = link.split(\"|\");\r\n      if (firstItemIsLink) link = key_value.shift();\r\n      let params = key_value.reduce((sum, x) => {\r\n          let sp = x.split(\"=\");\r\n          return (sum[sp[0]] = decodeURIComponent(sp[1])), sum;\r\n        }, {}),\r\n        result = { params };\r\n      if (firstItemIsLink || !key_value.length) result.link = link;\r\n      return result;\r\n    }\r\n    go() {\r\n      let params = null;\r\n      let link =\r\n        this.state.link ||\r\n        (this.props.args.config && this.props.args.config.value);\r\n      if (link) {\r\n        let linkAndParams = FurmlyNav.getParams(true, link);\r\n        if (this.props.args.params) {\r\n          let paramsOnly = FurmlyNav.getParams(false, this.props.args.params);\r\n          Object.assign(linkAndParams.params, paramsOnly.params);\r\n        }\r\n\r\n        link = linkAndParams.link;\r\n        params = linkAndParams.params;\r\n        switch (this.props.args.type) {\r\n          case FurmlyNav.NAV_TYPE.CLIENT:\r\n            this.props.furmlyNavigator.navigate({\r\n              key: link,\r\n              params\r\n            });\r\n            break;\r\n\r\n          case FurmlyNav.NAV_TYPE.FURMLY:\r\n            this.props.furmlyNavigator.setParams({\r\n              params: { id: link, fetchParams: params },\r\n              key: \"Furmly\"\r\n            });\r\n        }\r\n      }\r\n    }\r\n    render() {\r\n      this.props.log(\"render\");\r\n      return (\r\n        /*jshint ignore:start */\r\n        <Link\r\n          text={this.props.args.text}\r\n          disabled={this.props.args.disabled}\r\n          go={this.go}\r\n        />\r\n        /*jshint ignore:end */\r\n      );\r\n    }\r\n  }\r\n  FurmlyNav.NAV_TYPE = { CLIENT: \"CLIENT\", FURMLY: \"FURMLY\" };\r\n\r\n  return {\r\n    getComponent: () => withNavigation(withLogger(FurmlyNav)),\r\n    FurmlyNav,\r\n    mapDispatchToState,\r\n    mapStateToProps\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport invariants from \"./utils/invariants\";\r\nimport withLogger from \"./furmly_base\";\r\n\r\nexport default Image => {\r\n  invariants.validComponent(Image, \"Image\");\r\n\r\n  const FurmlyImage = props => {\r\n    let { value, args, ...rest } = props;\r\n    if (value && props.args.type == \"URL\") {\r\n      let data = props.args.config.data.replace(\r\n          new RegExp(`{${props.name}}`, \"g\"),\r\n          value\r\n        ),\r\n        args = Object.assign({}, props.args);\r\n      args.config = { data };\r\n      return <Image args={args} {...rest} />;\r\n    }\r\n    return <Image {...props} />;\r\n  };\r\n  return { getComponent: () => withLogger(FurmlyImage), FurmlyImage };\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  runFurmlyProcessor,\r\n  getMoreForGrid,\r\n  filterGrid,\r\n  getSingleItemForGrid,\r\n  getFilterTemplate,\r\n  getItemTemplate,\r\n  showMessage\r\n} from \"./actions\";\r\nimport invariants from \"./utils/invariants\";\r\nimport { getKey, copy, getErrorKey } from \"./utils/view\";\r\nimport withLogger from \"./furmly_base\";\r\nimport { withNavigation } from \"./furmly_navigation_context\";\r\nimport { withProcess } from \"./furmly_process_context\";\r\n\r\nexport const GRID_MODES = {\r\n  CRUD: \"CRUD\",\r\n  EDITONLY: \"EDITONLY\"\r\n};\r\nexport const ITEM_MODES = {\r\n  NEW: \"NEW\",\r\n  EDIT: \"EDIT\"\r\n};\r\n\r\nexport default (\r\n  Layout,\r\n  List,\r\n  ItemView,\r\n  Header,\r\n  ProgressBar,\r\n  CommandsView,\r\n  CommandResultView,\r\n  Container\r\n) => {\r\n  if (\r\n    invariants.validComponent(Layout, \"Layout\") &&\r\n    invariants.validComponent(Header, \"Header\") &&\r\n    invariants.validComponent(List, \"List\") &&\r\n    invariants.validComponent(ItemView, \"ItemView\") &&\r\n    invariants.validComponent(ProgressBar, \"ProgressBar\") &&\r\n    invariants.validComponent(CommandsView, \"CommandsView\") &&\r\n    invariants.validComponent(Container, \"Container\") &&\r\n    !CommandResultView\r\n  )\r\n    throw new Error(\"CommandResultView cannot be null (furmly_grid)\");\r\n\r\n  const mapDispatchToProps = dispatch => {\r\n    return {\r\n      run: (id, args, key) =>\r\n        dispatch(\r\n          runFurmlyProcessor(id, args, key, {\r\n            disableCache: true,\r\n            disableRetry: true\r\n          })\r\n        ),\r\n      more: (id, args, key) => dispatch(getMoreForGrid(id, args, key)),\r\n      getSingleItem: (id, args, key) =>\r\n        dispatch(getSingleItemForGrid(id, args, key)),\r\n      getItemTemplate: (id, args, key) =>\r\n        dispatch(getItemTemplate(id, args, key)),\r\n      getFilterTemplate: (id, args, key) =>\r\n        dispatch(getFilterTemplate(id, args, key)),\r\n      filterGrid: (id, args, key) => dispatch(filterGrid(id, args, key)),\r\n      showMessage: message => dispatch(showMessage(message))\r\n    };\r\n  };\r\n  const mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n    let component_uid = getKey(state, ownProps.component_uid, ownProps);\r\n    var result = state.furmly.view[component_uid];\r\n    return {\r\n      component_uid,\r\n      items: result && result.data ? result.data.items : null,\r\n      total: result && result.data ? result.data.total : 0,\r\n      busy: result && !!result.fetchingGrid,\r\n      error: result && !!result.failedToFetchGrid,\r\n      filterTemplate:\r\n        (result && result.filterTemplate) ||\r\n        (ownProps.args && ownProps.args.filter) ||\r\n        null,\r\n      filter: result && result.filter,\r\n      singleItem: result && result.singleItem,\r\n      itemTemplate: result && result.itemTemplate,\r\n      fetchingSingleItem: result && result.fetchingSingleItem,\r\n      fetchingFilterTemplate: result && result.gettingFilterTemplate,\r\n      fetchingItemTemplate: result && result.gettingTemplate,\r\n      itemTemplateError: result && result[getErrorKey(\"gettingTemplate\")],\r\n      filterTemplateError:\r\n        result && result[getErrorKey(\"gettingFilterTemplate\")],\r\n      singleItemError: result && result[getErrorKey(\"fetchingSingleItem\")],\r\n      commandProcessed:\r\n        state.furmly.view[component_uid + FurmlyGrid.commandResultViewName()],\r\n      commandProcessing:\r\n        state.furmly.view[\r\n          component_uid + FurmlyGrid.commandResultViewName() + \"-busy\"\r\n        ],\r\n      processed: state.furmly.view[component_uid + FurmlyGrid.itemViewName()]\r\n    };\r\n  };\r\n  class FurmlyGrid extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        form: null,\r\n        selectedItems: {},\r\n        validator: {},\r\n        _filterValidator: {},\r\n        showItemView: false,\r\n        count: this.props.args.pageCount || 15,\r\n        showCommandResultView: false\r\n      };\r\n      this.itemValueChanged = this.itemValueChanged.bind(this);\r\n      this.showItemView = this.showItemView.bind(this);\r\n      this.cancel = this.cancel.bind(this);\r\n      this.showItemView = this.showItemView.bind(this);\r\n      this.isCRUD = this.isCRUD.bind(this);\r\n      this.isEDITONLY = this.isEDITONLY.bind(this);\r\n      this.valueChanged = this.valueChanged.bind(this);\r\n      this.getItemsFromSource = this.getItemsFromSource.bind(this);\r\n      this.done = this.done.bind(this);\r\n      this.filter = this.filter.bind(this);\r\n      this.getFilterValue = this.getFilterValue.bind(this);\r\n      this.getItemValue = this.getItemValue.bind(this);\r\n      this.more = this.more.bind(this);\r\n      this.finished = this.finished.bind(this);\r\n      this.openCommandMenu = this.openCommandMenu.bind(this);\r\n      this.closeCommandView = this.closeCommandView.bind(this);\r\n      this.execCommand = this.execCommand.bind(this);\r\n      this.showCommandResult = this.showCommandResult.bind(this);\r\n      this.closeCommandResult = this.closeCommandResult.bind(this);\r\n      this.selectItem = this.selectItem.bind(this);\r\n      this.selectAllItems = this.selectAllItems.bind(this);\r\n      this.unSelectItem = this.unSelectItem.bind(this);\r\n      this.clearSelectedItems = this.clearSelectedItems.bind(this);\r\n      this.fetchFilterTemplate = this.fetchFilterTemplate.bind(this);\r\n      this.getCommands = this.getCommands.bind(this);\r\n    }\r\n    componentDidMount() {\r\n      this._mounted = true;\r\n      this.fetchFilterTemplate();\r\n      this.setupEditCommand();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      this._mounted = false;\r\n    }\r\n\r\n    fetchFilterTemplate(props = this.props, other) {\r\n      if (\r\n        !props.filterTemplateError &&\r\n        props.args.filterProcessor &&\r\n        !props.fetchingFilterTemplate &&\r\n        !props.filterTemplate &&\r\n        (!other || (other && props.filterTemplate !== other))\r\n      ) {\r\n        this.props.getFilterTemplate(\r\n          props.args.filterProcessor,\r\n          JSON.parse(props.args.gridArgs || \"{}\"),\r\n          props.component_uid\r\n        );\r\n      }\r\n    }\r\n    showCommandResult(props = this.props) {\r\n      this.setState({\r\n        showCommandsView: false,\r\n        showCommandResultView: true,\r\n        commandResult: props.commandProcessed\r\n      });\r\n    }\r\n\r\n    setupEditCommand(props = this.props) {\r\n      if (\r\n        (this.isCRUD(props) || this.isEDITONLY(props)) &&\r\n        (!props.args.commands ||\r\n          !props.args.commands.filter(x => this.isEditCommand(x)).length)\r\n      ) {\r\n        let cmd = {\r\n          commandText: \"Edit\",\r\n          command: { value: \"\" },\r\n          commandType: \"$EDIT\",\r\n          commandIcon: \"mode-edit\"\r\n        };\r\n        if (!props.args.commands) props.args.commands = [];\r\n        props.args.commands.unshift(cmd);\r\n      }\r\n    }\r\n    closeCommandResult() {\r\n      this.setState({\r\n        showCommandResultView: false,\r\n        commandResult: null\r\n      });\r\n    }\r\n    componentWillReceiveProps(next) {\r\n      if (next.args !== this.props.args) {\r\n        this.setupEditCommand(next);\r\n      }\r\n      // item view properties have changed.\r\n      if (next.processed !== this.props.processed) {\r\n        this.getItemsFromSource(null, \"filterGrid\");\r\n      }\r\n\r\n      // command view has been processed.\r\n      if (next.commandProcessed !== this.props.commandProcessed) {\r\n        this.showCommandResult(next);\r\n      }\r\n\r\n      // item has fetched data for editing and template has changed.\r\n      // show item view for editing.\r\n      if (\r\n        next.singleItem &&\r\n        next.singleItem !== this.props.singleItem &&\r\n        (next.itemTemplate && next.itemTemplate !== this.props.itemTemplate)\r\n      ) {\r\n        return this.showItemView(\r\n          ITEM_MODES.EDIT,\r\n          next.singleItem,\r\n          true,\r\n          next.itemTemplate\r\n        );\r\n      }\r\n\r\n      // item has fetched data for editing\r\n      // and edit template is already available..\r\n      if (\r\n        next.singleItem &&\r\n        next.singleItem !== this.props.singleItem &&\r\n        !next.fetchingItemTemplate\r\n      ) {\r\n        return this.showItemView(ITEM_MODES.EDIT, next.singleItem, true);\r\n      }\r\n\r\n      // item template has been fetched successfully and data is already available.\r\n      if (next.itemTemplate && next.itemTemplate !== this.props.itemTemplate) {\r\n        return this.showItemView(\r\n          this.state.mode,\r\n          this.getItemValue() || this.props.singleItem,\r\n          true,\r\n          next.itemTemplate\r\n        );\r\n      }\r\n      // fetch filter template if necessary.\r\n      this.fetchFilterTemplate(next, this.props.filterTemplate);\r\n    }\r\n    isEditCommand(x) {\r\n      return (\r\n        x.commandType == \"$EDIT\" ||\r\n        (x.commandText && x.commandText.toUpperCase() == \"EDIT\")\r\n      );\r\n    }\r\n\r\n    getCommands() {\r\n      if (!this.props.args.commands) return null;\r\n      const commands = this.props.args.commands.slice();\r\n      let index = 0;\r\n      let editCommand;\r\n      for (index; index < commands.length; index++) {\r\n        if (this.isEditCommand(commands[index])) {\r\n          editCommand = commands.splice(index, 1)[0];\r\n          break;\r\n        }\r\n      }\r\n      return [editCommand, ...commands];\r\n    }\r\n    getItemsFromSource(filter = getFilterValue(), methodName = \"run\", extra) {\r\n      this.props[methodName](\r\n        this.props.args.source,\r\n        Object.assign(\r\n          {},\r\n          JSON.parse(this.props.args.gridArgs || \"{}\"),\r\n          { count: this.state.count, full: true },\r\n          filter ? { query: filter } : {},\r\n          extra || {}\r\n        ),\r\n        this.props.component_uid\r\n      );\r\n    }\r\n    getItemValue() {\r\n      return this.state.form;\r\n    }\r\n    getFilterValue() {\r\n      return (\r\n        (this.props.value && this.props.value[FurmlyGrid.filterViewName()]) ||\r\n        null\r\n      );\r\n    }\r\n\r\n    filter() {\r\n      this.state._filterValidator.validate().then(\r\n        () => {\r\n          this.getItemsFromSource(this.getFilterValue(), \"filterGrid\");\r\n        },\r\n        () => {\r\n          this.props.log(\"a field in filter is invalid\");\r\n        }\r\n      );\r\n    }\r\n    static itemViewName() {\r\n      return \"_itemView_\";\r\n    }\r\n    static filterViewName() {\r\n      return \"_filterView_\";\r\n    }\r\n    static commandResultViewName() {\r\n      return \"_commandResultView_\";\r\n    }\r\n    valueChanged(value) {\r\n      this.props.valueChanged({\r\n        [this.props.name]: Object.assign(\r\n          {},\r\n          this.props.value || {},\r\n          value || {}\r\n        )\r\n      });\r\n    }\r\n    done(submitted) {\r\n      if (!submitted) return this.cancel();\r\n\r\n      this.state.validator.validate().then(\r\n        () => {\r\n          let id;\r\n          switch (this.state.mode) {\r\n            case ITEM_MODES.NEW:\r\n              id = this.props.args.extra.createProcessor;\r\n              break;\r\n            case ITEM_MODES.EDIT:\r\n              id =\r\n                this.props.args.extra.editProcessor ||\r\n                this.props.args.extra.createProcessor;\r\n              break;\r\n          }\r\n          if (!id) {\r\n            return (\r\n              this.props.log(\r\n                \"done  was called on a grid view in \" +\r\n                  this.props.args.mode +\r\n                  \" and it does not have a processor for it. \\n\" +\r\n                  JSON.stringify(this.props, null, \" \")\r\n              ),\r\n              this.cancel()\r\n            );\r\n          }\r\n\r\n          this.props.run(\r\n            id,\r\n            Object.assign(JSON.parse(this.props.args.gridArgs || \"{}\"), {\r\n              entity: this.getItemValue()\r\n            }),\r\n            this.props.component_uid + FurmlyGrid.itemViewName()\r\n          );\r\n\r\n          this.cancel();\r\n        },\r\n        () => {\r\n          this.props.log(\"some modal fields are invalid\");\r\n        }\r\n      );\r\n    }\r\n    showItemView(mode, args, skipFetch, _itemTemplate) {\r\n      let template = _itemTemplate,\r\n        gettingItemTemplate = false,\r\n        existingValue;\r\n      if (this.props.args.extra)\r\n        switch (mode) {\r\n          case ITEM_MODES.NEW:\r\n            template =\r\n              _itemTemplate ||\r\n              (\r\n                (this.props.args.extra.createTemplate &&\r\n                  this.props.args.extra.createTemplate.length &&\r\n                  this.props.args.extra.createTemplate) ||\r\n                this.props.itemTemplate ||\r\n                []\r\n              ).slice();\r\n            break;\r\n          case ITEM_MODES.EDIT:\r\n            template =\r\n              _itemTemplate ||\r\n              (\r\n                (this.props.args.extra.editTemplate &&\r\n                  this.props.args.extra.editTemplate.length &&\r\n                  this.props.args.extra.editTemplate) ||\r\n                (this.props.args.extra.createTemplate &&\r\n                  this.props.args.extra.createTemplate.length &&\r\n                  this.props.args.extra.createTemplate) ||\r\n                this.props.itemTemplate ||\r\n                []\r\n              ).slice();\r\n            existingValue = args;\r\n            if (\r\n              this.props.args.extra.fetchSingleItemProcessor &&\r\n              !this.props.fetchingSingleItem &&\r\n              !this.props.singleItemError &&\r\n              !skipFetch\r\n            ) {\r\n              template = [];\r\n              existingValue = null;\r\n              this.props.getSingleItem(\r\n                this.props.args.extra.fetchSingleItemProcessor,\r\n                args,\r\n                this.props.component_uid\r\n              );\r\n            }\r\n\r\n            break;\r\n        }\r\n\r\n      if (\r\n        (!template || !Array.prototype.isPrototypeOf(template)) &&\r\n        !this.props.args.extra.fetchTemplateProcessor\r\n      ) {\r\n        return this.props.log(\r\n          \"showItemTemplate was called on a grid view in \" +\r\n            this.props.args.mode +\r\n            \" and it does not have a template. \\n\" +\r\n            JSON.stringify(this.props, null, \" \")\r\n        );\r\n      }\r\n      if (\r\n        (!template || !template.length) &&\r\n        !this.props.fetchingItemTemplate &&\r\n        !this.props.itemTemplateError &&\r\n        this.props.args.extra.fetchTemplateProcessor &&\r\n        !skipFetch\r\n      ) {\r\n        gettingItemTemplate = true;\r\n        this.props.getItemTemplate(\r\n          this.props.args.extra.fetchTemplateProcessor,\r\n          args,\r\n          this.props.component_uid\r\n        );\r\n      }\r\n      let update = {\r\n        showItemView: true,\r\n        showCommandsView: false,\r\n        itemViewElements: template,\r\n        mode\r\n      };\r\n      //  if (!gettingItemTemplate)\r\n      update.form = existingValue ? copy(existingValue) : existingValue;\r\n      this.setState(update);\r\n    }\r\n\r\n    more() {\r\n      if (!this.finished() && !this.props.busy && !this.props.error) {\r\n        //log(\"more fired getItemsFromSource\");\r\n        let query = {\r\n          count: this.state.count\r\n        };\r\n        if (this.props.items && this.props.items[this.props.items.length - 1]) {\r\n          query._id = this.props.items[this.props.items.length - 1]._id;\r\n          this.props.log(\"most recent id:\" + query._id);\r\n        }\r\n\r\n        this.getItemsFromSource(this.getFilterValue(), \"more\", query);\r\n      }\r\n    }\r\n    finished() {\r\n      return this.props.items && this.props.total == this.props.items.length;\r\n    }\r\n    cancel() {\r\n      this.setState({\r\n        mode: null,\r\n        showItemView: false,\r\n        itemViewElements: null,\r\n        showCommandsView: false,\r\n        form: null\r\n      });\r\n    }\r\n\r\n    closeCommandView() {\r\n      this.setState({ showCommandsView: false });\r\n    }\r\n    itemValueChanged(value) {\r\n      this.setState({\r\n        form: Object.assign(\r\n          {},\r\n          this.state.form || {},\r\n          (value && value[FurmlyGrid.itemViewName()]) || {}\r\n        )\r\n      });\r\n    }\r\n    openCommandMenu(item) {\r\n      if (!item) {\r\n        let keys = Object.keys(this.state.selectedItems);\r\n        if (keys.length == 0) {\r\n          this.props.log(\"trying to open command menu with anything to act on\");\r\n          return;\r\n        }\r\n        item = this.state.selectedItems[keys[0]];\r\n      }\r\n      this.setState({ item, showCommandsView: true });\r\n    }\r\n    selectItem(item) {\r\n      const selectedItems = Object.assign({}, this.state.selectedItems);\r\n      selectedItems[item._id] = item;\r\n      this.setState({\r\n        selectedItems\r\n      });\r\n    }\r\n    selectAllItems() {\r\n      this.setState({\r\n        selectedItems: this.props.items.reduce((sum, x) => {\r\n          sum[x._id] = x;\r\n          return sum;\r\n        }, {})\r\n      });\r\n    }\r\n    clearSelectedItems() {\r\n      this.setState({\r\n        selectedItems: {}\r\n      });\r\n    }\r\n    unSelectItem(item) {\r\n      const selectedItems = Object.assign({}, this.state.selectedItems);\r\n      delete selectedItems[item._id];\r\n      this.setState({\r\n        selectedItems\r\n      });\r\n    }\r\n\r\n    execCommand(command, item = this.state.item) {\r\n      switch (command.commandType) {\r\n        case \"NAV\":\r\n          this.props.furmlyNavigator.replaceStack([\r\n            {\r\n              params: {\r\n                id: command.command.value,\r\n                fetchParams: { _id: item._id }\r\n              },\r\n              key: \"Furmly\"\r\n            }\r\n          ]);\r\n          break;\r\n        case \"$EDIT\":\r\n          this.showItemView(ITEM_MODES.EDIT, item);\r\n          break;\r\n        case \"PROCESSOR\":\r\n          this.props.run(\r\n            command.command.value,\r\n            Object.assign(\r\n              {},\r\n              JSON.parse(this.props.args.gridArgs || \"{}\"),\r\n              Object.keys(this.state.selectedItems)\r\n                .map(x => this.state.selectedItems[x])\r\n                .concat(item)\r\n            ),\r\n            this.props.component_uid + FurmlyGrid.commandResultViewName()\r\n          );\r\n          break;\r\n      }\r\n\r\n      this.setState({ showCommandsView: false });\r\n    }\r\n    isCRUD(props = this.props) {\r\n      return props.args.mode == GRID_MODES.CRUD;\r\n    }\r\n    isEDITONLY(props = this.props) {\r\n      return props.args.mode == GRID_MODES.EDITONLY;\r\n    }\r\n    render() {\r\n      this.props.log(\"rendering..\");\r\n\r\n      let header =\r\n          this.props.filterTemplate && this.props.filterTemplate.length ? (\r\n            <Header filter={() => this.filter()}>\r\n              <Container\r\n                elements={this.props.filterTemplate}\r\n                value={this.getFilterValue()}\r\n                valueChanged={this.valueChanged}\r\n                name={FurmlyGrid.filterViewName()}\r\n                validator={this.state._filterValidator}\r\n              />\r\n            </Header>\r\n          ) : this.props.fetchingFilterTemplate ? (\r\n            <ProgressBar />\r\n          ) : null,\r\n        footer = !this.finished() && this.props.busy ? <ProgressBar /> : null;\r\n\r\n      return (\r\n        <Layout\r\n          list={\r\n            <List\r\n              key={\"grid_list\"}\r\n              title={this.props.label}\r\n              selectedItems={this.state.selectedItems}\r\n              selectItem={this.selectItem}\r\n              selectAllItems={this.selectAllItems}\r\n              clearSelectedItems={this.clearSelectedItems}\r\n              unSelectItem={this.unSelectItem}\r\n              canAddOrEdit={this.isCRUD()}\r\n              header={header}\r\n              footer={footer}\r\n              count={this.state.count}\r\n              total={this.props.total}\r\n              showItemView={this.showItemView}\r\n              items={this.props.items}\r\n              templateConfig={\r\n                this.props.args.templateConfig\r\n                  ? JSON.parse(this.props.args.templateConfig)\r\n                  : null\r\n              }\r\n              more={this.more}\r\n              autoFetch={!this.props.args.dontAutoFetchFromSource}\r\n              getCommands={this.getCommands}\r\n              execCommand={this.execCommand}\r\n              openCommandMenu={this.openCommandMenu}\r\n              busy={!this.finished() && this.props.busy}\r\n            />\r\n          }\r\n          itemView={\r\n            <ItemView\r\n              key={\"grid_item_view\"}\r\n              visibility={\r\n                (this.isCRUD() || this.isEDITONLY()) && this.state.showItemView\r\n              }\r\n              done={this.done}\r\n              busy={\r\n                this.props.fetchingSingleItem || this.props.fetchingItemTemplate\r\n              }\r\n              template={\r\n                <Container\r\n                  elements={this.state.itemViewElements}\r\n                  value={this.getItemValue()}\r\n                  name={FurmlyGrid.itemViewName()}\r\n                  validator={this.state.validator}\r\n                  valueChanged={this.itemValueChanged}\r\n                />\r\n              }\r\n            />\r\n          }\r\n          commandsView={\r\n            <CommandsView\r\n              key={\"grid_commands_view\"}\r\n              visibility={this.state.showCommandsView}\r\n              close={this.closeCommandView}\r\n              commands={this.props.args.commands}\r\n              execCommand={this.execCommand}\r\n            />\r\n          }\r\n          commandResultView={\r\n            <CommandResultView\r\n              key={\"grid_commands_result_view\"}\r\n              visibility={this.state.showCommandResultView}\r\n              done={this.closeCommandResult}\r\n              template={\r\n                <Container\r\n                  elements={this.state.commandResult}\r\n                  name={FurmlyGrid.commandResultViewName()}\r\n                  validator={{}}\r\n                />\r\n              }\r\n              title={\"\"}\r\n              busy={this.props.commandProcessing}\r\n            />\r\n          }\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  return {\r\n    getComponent: () =>\r\n      withProcess(\r\n        connect(\r\n          mapStateToProps,\r\n          mapDispatchToProps\r\n        )(withNavigation(withLogger(FurmlyGrid)))\r\n      ),\r\n    FurmlyGrid,\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  };\r\n};\r\n","import React, { Component } from \"react\";\r\nimport withLogger from \"./furmly_base\";\r\nexport default PlatformComponent => {\r\n  class FurmlyHTMLViewer extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n    }\r\n    render() {\r\n      this.props.log(\"render\");\r\n      const { args, value } = this.props;\r\n      return (\r\n        <PlatformComponent\r\n          html={\r\n            value ||\r\n            (args && args.html) ||\r\n            \"<h3 style='padding:16px'>Something doesn't add up. Please contact system admin if this happens frequently.</h3>\"\r\n          }\r\n          {...this.props}\r\n          printOnLoad={args && args.printOnLoad}\r\n          canPrint={args && args.canPrint}\r\n        />\r\n      );\r\n    }\r\n  }\r\n  return {\r\n    getComponent: () => withLogger(FurmlyHTMLViewer),\r\n    FurmlyHTMLViewer\r\n  };\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport withLogger from \"./furmly_base\";\r\nimport {\r\n  uploadFurmlyFile,\r\n  getFurmlyFilePreview,\r\n  clearPreview\r\n} from \"./actions\";\r\nimport invariants from \"./utils/invariants\";\r\nimport ValidationHelper from \"./utils/validator\";\r\nimport { getKey } from \"./utils/view\";\r\nimport { withProcess } from \"./furmly_process_context\";\r\n\r\n/**\r\n * This component should render a file uploader\r\n * @param  {Class} Uploader Component responsible for uploading the file\r\n * @param  {Array} previews Array of component definitions with an id property\r\n * @return {Class}          Configured component.\r\n */\r\n\r\nexport default (Uploader, ProgressBar, Text, previews = []) => {\r\n  invariants.validComponent(Uploader, \"Uploader\");\r\n  invariants.validComponent(ProgressBar, \"ProgressBar\");\r\n  invariants.validComponent(Text, \"Text\");\r\n\r\n  class FurmlyFileUpload extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {};\r\n      this._previewType = this.getPreviewType.call(this);\r\n      this._supported = this.isSupported();\r\n      this._getPreview = this._getPreview.bind(this);\r\n      this.clearPreview = this.clearPreview.bind(this);\r\n      this._query = this.getPreviewQuery();\r\n      this.props.validator.validate = () => {\r\n        return this.runValidators();\r\n      };\r\n      this.upload = this.upload.bind(this);\r\n    }\r\n    runValidators() {\r\n      return new ValidationHelper(this).run();\r\n    }\r\n    hasValue() {\r\n      return !!this.props.uploadedId || \"is required\";\r\n    }\r\n    getPreviewQuery() {\r\n      return Uploader.getPreviewQuery(this.props.args.fileType);\r\n    }\r\n    getPreviewType() {\r\n      for (var i = 0; i < previews.length; i++) {\r\n        if (previews[i].id.test(this.props.args.fileType)) {\r\n          return previews[i];\r\n        }\r\n      }\r\n    }\r\n    isSupported() {\r\n      return Uploader.supports(this.props.args.fileType);\r\n    }\r\n    componentDidMount() {\r\n      this._mounted = true;\r\n      if (this.props.uploadedId && !this.props.preview) {\r\n        this._getPreview(this.props.uploadedId);\r\n      }\r\n      if (this.props.uploadedId !== this.props.value) {\r\n        //update the form incase the preview came with the fileupload\r\n        setTimeout(() => {\r\n          if (this._mounted)\r\n            this.props.valueChanged({\r\n              [this.props.name]: this.props.uploadedId\r\n            });\r\n        }, 0);\r\n        return;\r\n      }\r\n      if (!this.props.uploadedId && !this.props.value && this.props.preview) {\r\n        this.props.clearPreview(this.props.component_uid);\r\n      }\r\n    }\r\n    componentWillUnmount() {\r\n      this._mounted = false;\r\n      this.props.clearPreview(this.props.component_uid);\r\n    }\r\n    _getPreview(id) {\r\n      this.props.getPreview(\r\n        id,\r\n        this.props.component_uid,\r\n        this.props.args.fileType,\r\n        this._query\r\n      );\r\n    }\r\n\r\n    componentWillReceiveProps(next) {\r\n      if (\r\n        next.uploadedId !== this.props.uploadedId ||\r\n        next.component_uid !== this.props.component_uid ||\r\n        next.uploadedId !== next.value\r\n      ) {\r\n        if (\r\n          next.uploadedId &&\r\n          (!next.preview || next.uploadedId !== this.props.uploadedId)\r\n        )\r\n          this._getPreview(next.uploadedId);\r\n        this.props.valueChanged({\r\n          [this.props.name]: next.uploadedId\r\n        });\r\n      }\r\n    }\r\n    upload(file) {\r\n      this.props.upload(file, this.props.component_uid);\r\n    }\r\n    clearPreview() {\r\n      this.props.valueChanged({ [this.props.name]: undefined });\r\n      this.props.clearPreview(this.props.component_uid);\r\n    }\r\n    render() {\r\n      this.props.log(\"render\");\r\n      if (this.props.busy) return <ProgressBar />;\r\n      if (!this._supported)\r\n        return <Text message={\"unsupported file upload type\"} />;\r\n      return (\r\n        <Uploader\r\n          key={this.props.component_uid}\r\n          title={this.props.label}\r\n          description={this.props.description}\r\n          clear={this.clearPreview}\r\n          upload={this.upload}\r\n          component_uid={this.props.component_uid}\r\n          allowed={this.props.args.fileType}\r\n          previewType={this._previewType}\r\n          preview={this.props.preview}\r\n          errors={this.state.errors}\r\n          disabled={this.props.disabled}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  const mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n    let component_uid = getKey(state, ownProps.component_uid, ownProps);\r\n    let st = state.furmly.view[component_uid] || {};\r\n    return {\r\n      component_uid,\r\n      preview: st.preview,\r\n      busy: st.busy,\r\n      disabled: ownProps.args && ownProps.args.disabled,\r\n      uploadedId: st.uploadedId || ownProps.value\r\n    };\r\n  };\r\n  const mapDispatchToProps = dispatch => {\r\n    return {\r\n      upload: (file, key) => dispatch(uploadFurmlyFile(file, key)),\r\n      getPreview: (id, key, fileType, query) =>\r\n        dispatch(getFurmlyFilePreview(id, key, fileType, query)),\r\n      clearPreview: key => dispatch(clearPreview(key))\r\n    };\r\n  };\r\n\r\n  return {\r\n    getComponent: () =>\r\n      withProcess(\r\n        connect(\r\n          mapStateToProps,\r\n          mapDispatchToProps\r\n        )(withLogger(FurmlyFileUpload))\r\n      ),\r\n    mapDispatchToProps,\r\n    mapDispatchToProps,\r\n    FurmlyFileUpload\r\n  };\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { runFurmlyProcessor } from \"./actions\";\r\nimport invariants from \"./utils/invariants\";\r\nimport _ from \"lodash\";\r\nimport { getKey } from \"./utils/view\";\r\nimport withLogger from \"./furmly_base\";\r\nimport { withProcess } from \"./furmly_process_context\";\r\nexport default (Layout, ProgressBar, Filter, Container) => {\r\n  invariants.validComponent(Filter, \"Filter\");\r\n  invariants.validComponent(Container, \"Container\");\r\n  invariants.validComponent(ProgressBar, \"ProgressBar\");\r\n  invariants.validComponent(Layout, \"Layout\");\r\n\r\n  const mapDispatchToProps = dispatch => {\r\n    return {\r\n      run: (id, args, key) =>\r\n        dispatch(runFurmlyProcessor(id, args, key, { disableCache: true })),\r\n      showMessage: message => dispatch(showMessage(message))\r\n    };\r\n  };\r\n  const mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n    var component_uid = getKey(state, ownProps.component_uid, ownProps),\r\n      _actionState = state.furmly.view[component_uid];\r\n    return {\r\n      resultUI: _actionState && (_actionState.ui || _actionState),\r\n      resultData: _actionState && _actionState.data,\r\n      busy: !!state.furmly.view[component_uid + \"-busy\"],\r\n      component_uid\r\n    };\r\n  };\r\n  const itemViewName = \"_item_view\";\r\n  const contentViewName = \"_content_view\";\r\n  class FurmlyActionView extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = { _filterValidator: {}, validator: {} };\r\n      this.filter = this.filter.bind(this);\r\n      this.valueChanged = this.valueChanged.bind(this);\r\n      this.filterValueChanged = this.filterValueChanged.bind(this);\r\n    }\r\n    componentWillReceiveProps(next) {\r\n      if (!_.isEqual(next.resultData, this.props.resultData)) {\r\n        this.valueChanged({ [contentViewName]: next.resultData });\r\n      }\r\n    }\r\n    filter() {\r\n      this.state._filterValidator.validate().then(\r\n        () => {\r\n          let { [contentViewName]: contentValue, ...rest } =\r\n            this.props.value || {};\r\n          this.props.run(\r\n            this.props.args.action,\r\n            rest,\r\n            this.props.component_uid\r\n          );\r\n        },\r\n        () => {\r\n          this.props.log(\"a field in filter is invalid\");\r\n        }\r\n      );\r\n    }\r\n    filterValueChanged(value) {\r\n      this.valueChanged(value && value[itemViewName]);\r\n    }\r\n    valueChanged(value) {\r\n      this.props.log(`value changed in action view ${value}`);\r\n      this.props.valueChanged({\r\n        [this.props.name]: Object.assign(\r\n          {},\r\n          this.props.value || {},\r\n          value || {}\r\n        )\r\n      });\r\n    }\r\n    render() {\r\n      this.props.log(\"render\");\r\n      if (this.props.busy) return <ProgressBar />;\r\n      let { [contentViewName]: contentValue = {}, ...rest } =\r\n        this.props.value || {};\r\n      return (\r\n        <Layout\r\n          filter={\r\n            <Filter\r\n              actionLabel={this.props.args.commandText}\r\n              filter={this.filter}\r\n            >\r\n              <Container\r\n                elements={this.props.args.elements}\r\n                value={rest}\r\n                name={itemViewName}\r\n                validator={this.state._filterValidator}\r\n                valueChanged={this.filterValueChanged}\r\n              />\r\n            </Filter>\r\n          }\r\n          content={\r\n            <Container\r\n              name={contentViewName}\r\n              elements={this.props.resultUI}\r\n              value={contentValue}\r\n              validator={this.state.validator}\r\n              valueChanged={this.valueChanged}\r\n            />\r\n          }\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  return {\r\n    getComponent: () =>\r\n      withProcess(\r\n        connect(\r\n          mapStateToProps,\r\n          mapDispatchToProps\r\n        )(withLogger(FurmlyActionView))\r\n      ),\r\n    FurmlyActionView,\r\n    mapDispatchToProps,\r\n    mapStateToProps\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport invariants from \"./utils/invariants\";\r\nexport default Label => {\r\n  invariants.validComponent(Label, \"Label\");\r\n  const FurmlyLabel = props => {\r\n    let { value, description, ...rest } = props;\r\n    if (value) {\r\n      return <Label description={value} {...rest} />;\r\n    }\r\n    return <Label {...props} />;\r\n  };\r\n\r\n  return { getComponent: () => FurmlyLabel, FurmlyLabel };\r\n};\r\n","import React, { PureComponent } from \"react\";\r\nimport invariants from \"./utils/invariants\";\r\n\r\nexport default (WebView, Text) => {\r\n  invariants.validComponent(WebView, \"WebView\");\r\n  invariants.validComponent(Text, \"Text\");\r\n  class FurmlyWebView extends PureComponent {\r\n    constructor(props) {\r\n      super(props);\r\n    }\r\n    render() {\r\n      if (this.props.args && this.props.args.url) {\r\n        return <WebView url={this.props.args.url} />;\r\n      } else {\r\n        return <Text>{\"Missing url\"}</Text>;\r\n      }\r\n    }\r\n  }\r\n  return { getComponent: () => FurmlyWebView, FurmlyWebView };\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { runFurmlyProcessor, furmlyDownloadUrl } from \"./actions\";\r\nimport invariants from \"./utils/invariants\";\r\nimport withLogger from \"./furmly_base\";\r\nimport debug from \"debug\";\r\nexport default (Link, customDownloadCommand) => {\r\n  invariants.validComponent(Link, \"Link\");\r\n\r\n  const mapDispatchToState = dispatch => {\r\n    return {\r\n      dispatch\r\n    };\r\n  };\r\n  class FurmlyCommand extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.go = this.go.bind(this);\r\n      this.run = this.run.bind(this);\r\n    }\r\n    run() {\r\n      this.props.dispatch(\r\n        runFurmlyProcessor(\r\n          this.props.args.commandProcessor,\r\n          (this.props.args.commandProcessorArgs &&\r\n            JSON.parse(this.props.args.commandProcessorArgs)) ||\r\n            {},\r\n          this.props.component_uid\r\n        )\r\n      );\r\n    }\r\n    go() {\r\n      switch (this.props.args.commandType) {\r\n        case FurmlyCommand.COMMAND_TYPE.DOWNLOAD:\r\n          if (!this.props.args.commandProcessorArgs) {\r\n            throw new Error(\"Download is not properly setup.\");\r\n          }\r\n          let url;\r\n          try {\r\n            let config = JSON.parse(this.props.args.commandProcessorArgs);\r\n            url = furmlyDownloadUrl.replace(\":id\", config.id);\r\n            if (config.access_token) url += `?_t0=${config.access_token}`;\r\n            if (config.isProcessor)\r\n              url += `${url.indexOf(\"?\") == -1 ? \"?\" : \"&\"}_t1=true`;\r\n          } catch (e) {\r\n            throw new Error(\"Download is not properly setup.\");\r\n          }\r\n          this.props.dispatch(customDownloadCommand(this.props.args, url));\r\n          break;\r\n        default:\r\n          this.run();\r\n          break;\r\n      }\r\n    }\r\n    render() {\r\n      this.props.log(\"render\");\r\n      return (\r\n        /*jshint ignore:start */\r\n        <Link\r\n          text={this.props.args.commandText}\r\n          icon={this.props.args.commandIcon}\r\n          go={this.go}\r\n        />\r\n        /*jshint ignore:end */\r\n      );\r\n    }\r\n  }\r\n  FurmlyCommand.COMMAND_TYPE = { DEFAULT: \"DEFAULT\", DOWNLOAD: \"DOWNLOAD\" };\r\n  return {\r\n    getComponent: () =>\r\n      connect(\r\n        null,\r\n        mapDispatchToState\r\n      )(withLogger(FurmlyCommand)),\r\n    mapDispatchToState,\r\n    FurmlyCommand\r\n  };\r\n};\r\n","import _ from \"lodash\";\r\nimport { default as ACTIONS } from \"../actions/constants\";\r\nimport config from \"client_config\";\r\nimport { isValidKey, getBusyKey, getErrorKey } from \"../utils/view\";\r\n\r\nexport default function(state = {}, action) {\r\n  switch (action.type) {\r\n    case ACTIONS.CLEAR_DATA:\r\n      return Object.assign(state, { [action.payload]: null });\r\n    case ACTIONS.CLEAR_STACK:\r\n      return {};\r\n    case ACTIONS.FURMLY_PROCESS_FAILED:\r\n      return Object.assign({}, state, {\r\n        [getBusyKey(action.meta)]: false\r\n      });\r\n\r\n    case ACTIONS.REPLACE_STACK:\r\n      var _state = action.payload.reduce(\r\n        (sum, x) => {\r\n          if (state[x.params.id]) {\r\n            sum[x.params.id] = state[x.params.id];\r\n          }\r\n          return sum;\r\n        },\r\n        {\r\n          message: state.message\r\n        }\r\n      );\r\n      return _state;\r\n    case ACTIONS.REMOVE_LAST_FURMLY_PARAMS:\r\n      //check if value is a furmly screen\r\n      //if it is check if its a process navigation or step navigation\r\n      //if it is a process navigation remove the data from the process.\r\n      //if it is a step navigation remove the step data from the process.\r\n      if (\r\n        action.payload.item.key == \"Furmly\" ||\r\n        action.payload.item.$routeName == \"Furmly\"\r\n      ) {\r\n        //it is a furmly navigation\r\n        //confirm there are no other references down the line.\r\n        let _state = state[action.payload.item.params.id],\r\n          currentStep = (_state && _state.currentStep) || 0;\r\n        if (\r\n          action.payload.references[action.payload.item.params.id] &&\r\n          action.payload.references[action.payload.item.params.id][0] == 1\r\n        ) {\r\n          return Object.assign(\r\n            {},\r\n            //copy over state that does not belong to the removed object\r\n            Object.keys(state).reduce((sum, x) => {\r\n              let key = isValidKey(x);\r\n              if (\r\n                !key ||\r\n                (key &&\r\n                  key.step !== currentStep &&\r\n                  key.process !== action.payload.item.params.id)\r\n              )\r\n                sum[x] = state[x];\r\n              return sum;\r\n            }, {}),\r\n            {\r\n              [action.payload.item.params.id]: null\r\n            }\r\n          );\r\n        }\r\n        if (\r\n          _state &&\r\n          typeof action.payload.item.params.currentStep !== \"undefined\"\r\n        ) {\r\n          //it is a step navigation.\r\n          //remove one from current step.\r\n\r\n          _state.currentStep = _state.currentStep - 1 || 0;\r\n          _state.description.steps = _state.description.steps.slice();\r\n          _state.description.steps.pop();\r\n          return Object.assign({}, state, {\r\n            [action.payload.item.params.id]: Object.assign({}, _state || {}, {\r\n              [action.payload.item.params.currentStep]: null\r\n            })\r\n          });\r\n        }\r\n      }\r\n      return state;\r\n    case ACTIONS.FURMLY_PROCESS_RAN:\r\n      if (action.error || !action.payload) {\r\n        return state;\r\n      }\r\n      let proc = state[action.payload.id],\r\n        id = action.payload.id,\r\n        data = action.payload.data,\r\n        currentState = {\r\n          currentStep: proc.currentStep || 0\r\n        },\r\n        busy = false,\r\n        description = proc.description;\r\n      if (\r\n        (config.uiOnDemand &&\r\n          action.payload.data &&\r\n          action.payload.data.status == \"COMPLETED\") ||\r\n        (!config.uiOnDemand &&\r\n          (description.steps.length == 1 ||\r\n            currentState.currentStep + 1 > description.steps.length - 1))\r\n      ) {\r\n        return Object.assign({}, state, {\r\n          [id]: {\r\n            completed: true\r\n          },\r\n          [getBusyKey(id)]: false,\r\n          message: (typeof data == \"object\" && data.message) || null\r\n        });\r\n      }\r\n\r\n      currentState.instanceId = data ? data.$instanceId : null;\r\n      if (config.uiOnDemand && description.disableBackwardNavigation)\r\n        description.steps[0] = data.$nextStep;\r\n      else {\r\n        if (config.uiOnDemand) {\r\n          if (description.steps.length == currentState.currentStep + 1) {\r\n            description.steps.push(data.$nextStep);\r\n          }\r\n        }\r\n        currentState.currentStep = currentState.currentStep + 1;\r\n      }\r\n      currentState[currentState.currentStep] =\r\n        typeof data == \"object\" &&\r\n        typeof data.message == \"object\" &&\r\n        data.message;\r\n      return Object.assign({}, state, {\r\n        [id]: Object.assign({}, state[id], currentState),\r\n        [getBusyKey(id)]: busy\r\n      });\r\n\r\n    case ACTIONS.FETCHING_GRID:\r\n      return Object.assign({}, state, {\r\n        [action.meta.key]: fetchingGrid(state[action.meta.key], action)\r\n      });\r\n    case ACTIONS.FILTERED_GRID:\r\n      return Object.assign({}, state, {\r\n        [action.payload.key]: filteredGrid(state[action.payload.key], action)\r\n      });\r\n    case ACTIONS.GET_SINGLE_ITEM_FOR_GRID:\r\n      return Object.assign({}, state, {\r\n        [action.meta.key]: getSingleItemForGrid(state[action.meta.key], action)\r\n      });\r\n\r\n    case ACTIONS.GOT_SINGLE_ITEM_FOR_GRID:\r\n      return Object.assign({}, state, {\r\n        [action.payload.key]: gotSingleItemForGrid(\r\n          state[action.payload.key],\r\n          action\r\n        )\r\n      });\r\n    case ACTIONS.ERROR_WHILE_GETTING_SINGLE_ITEM_FOR_GRID:\r\n      return Object.assign({}, state, {\r\n        [action.payload.key]: errorWhileGettingSingleItemForGrid(\r\n          state[action.payload.key],\r\n          action\r\n        )\r\n      });\r\n    case ACTIONS.ERROR_WHILE_FETCHING_GRID:\r\n      return Object.assign({}, state, {\r\n        [action.meta]: failedToFetchGrid(state[action.meta])\r\n      });\r\n\r\n    case ACTIONS.FURMLY_GET_MORE_FOR_GRID:\r\n      return Object.assign({}, state, {\r\n        [action.payload.key]: reduceGrid(state[action.payload.key], action)\r\n      });\r\n\r\n    case ACTIONS.FURMLY_PROCESS_RUNNING:\r\n      return Object.assign({}, state, {\r\n        [getBusyKey(action.meta.id)]: !action.error,\r\n        [action.meta.id]: Object.assign({}, state[action.meta.id], {\r\n          [state[action.meta.id].currentStep || 0]: action.meta.form\r\n        })\r\n      });\r\n    case ACTIONS.VALUE_CHANGED:\r\n      return Object.assign({}, state, {\r\n        [action.payload.id]: Object.assign({}, state[action.payload.id], {\r\n          [state[action.payload.id].currentStep || 0]: action.payload.form\r\n        })\r\n      });\r\n    case ACTIONS.FURMLY_PROCESSOR_RAN:\r\n      return Object.assign({}, state, {\r\n        [action.payload.key]: action.payload.data,\r\n        [getBusyKey(action.payload.key)]: false,\r\n        [getErrorKey(action.payload.key)]: !!action.error\r\n      });\r\n\r\n    case ACTIONS.FURMLY_PROCESSOR_RUNNING:\r\n      return Object.assign({}, state, {\r\n        [getBusyKey(action.meta.key)]: !action.error,\r\n        [getErrorKey(action.meta.key)]: !!action.error\r\n      });\r\n    case ACTIONS.FURMLY_PROCESSOR_FAILED:\r\n      return Object.assign({}, state, {\r\n        [getBusyKey(action.meta)]: false,\r\n        [action.meta]: null,\r\n        [getErrorKey(action.meta)]: true\r\n      });\r\n    case ACTIONS.FETCHED_PROCESS:\r\n      let fetchedValue = Object.assign({}, action.payload.data.data);\r\n      let fetchedDescription = Object.assign(\r\n        {},\r\n        action.payload.data.description\r\n      );\r\n      return Object.assign({}, state, {\r\n        [action.payload.id]: {\r\n          description: fetchedDescription,\r\n          0: fetchedValue\r\n        },\r\n        [getBusyKey(action.payload.id)]: false,\r\n        [getErrorKey(action.payload.id)]: action.error\r\n      });\r\n    case ACTIONS.FETCHING_PROCESS:\r\n      return Object.assign({}, state, {\r\n        [getBusyKey(action.meta)]: !action.error,\r\n        [getErrorKey(action.meta)]: !!action.error\r\n      });\r\n    case ACTIONS.FAILED_TO_FETCH_PROCESS:\r\n      return Object.assign({}, state, {\r\n        [action.meta]: null,\r\n        [getBusyKey(action.meta)]: false,\r\n        [getErrorKey(action.meta)]: true\r\n      });\r\n    case ACTIONS.START_FILE_UPLOAD:\r\n      return Object.assign({}, state, {\r\n        [action.meta]: startUpload(state[action.meta], action)\r\n      });\r\n    case ACTIONS.FILE_UPLOADED:\r\n      return Object.assign({}, state, {\r\n        [action.payload.key]: fileUpload(state[action.payload.key], action)\r\n      });\r\n    case ACTIONS.FILE_UPLOAD_FAILED:\r\n      return Object.assign({}, state, {\r\n        [action.meta]: uploadFailed(state[action.meta], action)\r\n      });\r\n    case ACTIONS.GET_PREVIEW:\r\n      return Object.assign({}, state, {\r\n        [action.meta]: getPreview(state[action.meta], action)\r\n      });\r\n    case ACTIONS.CLEAR_PREVIEW:\r\n      return Object.assign({}, state, {\r\n        [action.payload.key]: clearPreview(state[action.payload.key])\r\n      });\r\n    case ACTIONS.GOT_PREVIEW:\r\n      return Object.assign({}, state, {\r\n        [action.payload.key]: gotPreview(state[action.payload.key], action)\r\n      });\r\n    case ACTIONS.FAILED_TO_GET_PREVIEW:\r\n      return Object.assign({}, state, {\r\n        [action.meta]: failedToGetPreview(state[action.meta], action)\r\n      });\r\n    case ACTIONS.GET_ITEM_TEMPLATE:\r\n      return Object.assign({}, state, {\r\n        [action.meta.key]: getTemplate(\r\n          \"gettingTemplate\",\r\n          state[action.meta.key],\r\n          action\r\n        )\r\n      });\r\n    case ACTIONS.GOT_ITEM_TEMPLATE:\r\n      return Object.assign({}, state, {\r\n        [action.payload.key]: gotTemplate(\r\n          \"gettingTemplate\",\r\n          \"itemTemplate\",\r\n          state[action.payload.key],\r\n          action\r\n        )\r\n      });\r\n    case ACTIONS.FAILED_TO_GET_ITEM_TEMPLATE:\r\n      return Object.assign({}, state, {\r\n        [action.meta]: failedToGetTemplate(\r\n          \"gettingTemplate\",\r\n          state[action.meta],\r\n          action\r\n        )\r\n      });\r\n    case ACTIONS.GET_FILTER_TEMPLATE:\r\n      return Object.assign({}, state, {\r\n        [action.meta.key]: getTemplate(\r\n          \"gettingFilterTemplate\",\r\n          state[action.meta.key],\r\n          action\r\n        )\r\n      });\r\n    case ACTIONS.GOT_FILTER_TEMPLATE:\r\n      if (action.error) {\r\n        return Object.assign({}, state, {\r\n          [action.meta]: failedToGetTemplate(\r\n            \"gettingFilterTemplate\",\r\n            state[action.meta],\r\n            action\r\n          )\r\n        });\r\n      }\r\n      return Object.assign({}, state, {\r\n        [action.payload.key]: gotTemplate(\r\n          \"gettingFilterTemplate\",\r\n          \"filterTemplate\",\r\n          state[action.payload.key],\r\n          action\r\n        )\r\n      });\r\n    case ACTIONS.FAILED_TO_GET_FILTER_TEMPLATE:\r\n      return Object.assign({}, state, {\r\n        [action.meta]: failedToGetTemplate(\r\n          \"gettingFilterTemplate\",\r\n          state[action.meta],\r\n          action\r\n        )\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction getTemplate(busyIndicator, state = {}, action) {\r\n  return Object.assign({}, state, {\r\n    [busyIndicator]: !action.error,\r\n    [getErrorKey(busyIndicator)]: action.error\r\n  });\r\n}\r\nfunction gotTemplate(busyIndicator, propName, state = {}, action) {\r\n  return Object.assign({}, state, {\r\n    [propName]: action.payload.data,\r\n    [busyIndicator]: false,\r\n    [getErrorKey(busyIndicator)]: action.error\r\n  });\r\n}\r\nfunction failedToGetTemplate(busyIndicator, state = {}, action) {\r\n  return Object.assign({}, state, { [busyIndicator]: false });\r\n}\r\n\r\nfunction startUpload(state = {}, action) {\r\n  return Object.assign({}, state, { gettingTemplate: !action.error });\r\n}\r\nfunction fileUpload(state = {}, action) {\r\n  return Object.assign({}, state, {\r\n    uploadedId: action.payload.id,\r\n    busy: false\r\n  });\r\n}\r\nfunction uploadFailed(state = {}, action) {\r\n  return Object.assign({}, state, { busy: false });\r\n}\r\nfunction getPreview(state = {}, action) {\r\n  return Object.assign({}, state, { busy: !action.error });\r\n}\r\nfunction gotPreview(state = {}, action) {\r\n  return Object.assign({}, state, {\r\n    preview: action.payload.data,\r\n    busy: false\r\n  });\r\n}\r\nfunction clearPreview(state = {}) {\r\n \r\n  return Object.assign({}, state, {\r\n    preview: null,\r\n    uploadedId: null\r\n  });\r\n}\r\nfunction failedToGetPreview(state = {}, action) {\r\n  return Object.assign({}, state, { busy: false });\r\n}\r\n\r\nfunction reduceGrid(state = {}, action) {\r\n  if (!state.data || state.data.items.length < action.payload.data.total) {\r\n    let current = state.data ? state.data.items : [];\r\n    action.payload.data.items = current.concat(action.payload.data.items);\r\n    state.data = action.payload.data;\r\n    return Object.assign({}, state, {\r\n      fetchingGrid: false,\r\n      failedToFetchGrid: !!action.error\r\n    });\r\n  }\r\n  return state;\r\n}\r\n\r\nfunction filteredGrid(state = {}, action) {\r\n  let current = state.data ? state.data.items : [];\r\n  state.data = action.payload.data;\r\n  return Object.assign({}, state, {\r\n    fetchingGrid: false,\r\n    failedToFetchGrid: !!action.error\r\n  });\r\n}\r\n\r\nfunction fetchingGrid(state = {}, action) {\r\n  return Object.assign({}, state, {\r\n    fetchingGrid: !action.error,\r\n    failedToFetchGrid: !!action.error,\r\n    filter: action.meta && action.meta.args ? action.meta.args.query : null\r\n  });\r\n}\r\n\r\nfunction failedToFetchGrid(state = {}) {\r\n  return Object.assign({}, state, {\r\n    fetchingGrid: false,\r\n    failedToFetchGrid: true\r\n  });\r\n}\r\n\r\nfunction getSingleItemForGrid(state = {}, action) {\r\n  return Object.assign({}, state, {\r\n    fetchingSingleItem: !action.error,\r\n    [getErrorKey(\"fetchingSingleItem\")]: !!action.error\r\n  });\r\n}\r\n\r\nfunction gotSingleItemForGrid(state = {}, action) {\r\n  return Object.assign({}, state, {\r\n    singleItem: action.payload.data,\r\n    fetchingSingleItem: false,\r\n    [getErrorKey(\"fetchingSingleItem\")]: !!action.error\r\n  });\r\n}\r\n\r\nfunction errorWhileGettingSingleItemForGrid(state = {}, action) {\r\n  return Object.assign({}, state, {\r\n    fetchingSingleItem: false,\r\n    singleItem: undefined,\r\n    [getErrorKey(\"fetchingSingleItem\")]: !!action.error\r\n  });\r\n}\r\n","import view from \"./view\";\r\nimport navigation from \"./navigation\";\r\nimport { toggleAllBusyIndicators } from \"../utils/view\";\r\nconst reducers = [\r\n\t{ name: \"navigation\", run: navigation },\r\n\t{ name: \"view\", run: view }\r\n];\r\nexport default function(state = {}, action) {\r\n\tif (action.type == \"persist/REHYDRATE\") {\r\n\t\tvar incoming = action.payload.furmly;\r\n\t\tif (incoming) {\r\n\t\t\ttoggleAllBusyIndicators(incoming);\r\n\t\t\tstate = {\r\n\t\t\t\t...state,\r\n\t\t\t\t...incoming\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\tlet changes = false,\r\n\t\tchangedState = reducers.reduce((_state, reducer) => {\r\n\t\t\tlet currentState = state[reducer.name],\r\n\t\t\t\tnewState = (_state[reducer.name] = reducer.run(\r\n\t\t\t\t\tcurrentState,\r\n\t\t\t\t\taction\r\n\t\t\t\t));\r\n\t\t\tif (currentState !== newState) {\r\n\t\t\t\tchanges = true;\r\n\t\t\t}\r\n\t\t\treturn _state;\r\n\t\t}, {});\r\n\treturn changes ? changedState : state;\r\n}\r\n","import { createStore, combineReducers, applyMiddleware, compose } from \"redux\";\nimport { apiMiddleware as defaultApiMiddleware } from \"redux-api-middleware\";\nimport createActionEnhancerMiddleware from \"redux-action-enhancer\";\nimport thunkMiddleware from \"redux-thunk\";\nimport ACTIONS from \"../actions/constants\";\nimport reducers from \"../reducers\";\nimport { default as defaultActionEnhancers } from \"../action-enhancers\";\n\nconst combinedReducers = combineReducers({ furmly: reducers });\n\nconst sessionHasExpired = function(action) {\n  return (\n    (action && action.type === ACTIONS.SESSION_MAY_HAVE_EXPIRED) ||\n    (action && action.payload && action.payload.status == 401)\n  );\n};\nconst defaultRootReducer = function(state, action) {\n  if (action.type === ACTIONS.SIGN_OUT || sessionHasExpired(action)) {\n    state = {};\n    if (sessionHasExpired(action)) state.popup = { message: \"Session Expired\" };\n  }\n  return combinedReducers(state, action);\n};\n\nexport default (\n  extraMiddlewares = [],\n  apiMiddleware = defaultApiMiddleware,\n  rootReducer = defaultRootReducer,\n  actionEnhancers\n) => {\n  let enhancers = defaultActionEnhancers();\n  if (actionEnhancers) enhancers = enhancers.concat(actionEnhancers());\n  const middlewares = [\n    thunkMiddleware,\n    createActionEnhancerMiddleware(() => enhancers),\n    apiMiddleware,\n    ...extraMiddlewares\n  ];\n  return compose(applyMiddleware(...middlewares))(createStore)(rootReducer);\n};\n","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport createStore from \"./utils/store\";\n\nconst createProvider = (Process, ...args) => {\n  const store = createStore.apply(null, args);\n  return {\n    getComponent: () => props => (\n      <Provider store={store}>\n        <Process {...props} />\n      </Provider>\n    ),\n    store\n  };\n};\n\nexport default createProvider;\n","import furmly_input from \"./furmly_input.js\";\r\nimport furmly_view from \"./furmly_view.js\";\r\nimport furmly_container from \"./furmly_container.js\";\r\nimport furmly_process from \"./furmly_process.js\";\r\nimport furmly_section from \"./furmly_section.js\";\r\nimport furmly_select from \"./furmly_select.js\";\r\nimport furmly_selectset from \"./furmly_selectset.js\";\r\nimport furmly_list from \"./furmly_list.js\";\r\nimport furmly_hidden from \"./furmly_hidden.js\";\r\nimport furmly_nav from \"./furmly_nav\";\r\nimport furmly_image from \"./furmly_image\";\r\nimport furmly_grid from \"./furmly_grid\";\r\nimport furmly_htmlview from \"./furmly_htmlview\";\r\nimport furmly_fileupload from \"./furmly_fileupload\";\r\nimport furmly_actionview from \"./furmly_actionview\";\r\nimport furmly_label from \"./furmly_label\";\r\nimport furmly_webview from \"./furmly_webview\";\r\nimport furmly_command from \"./furmly_command\";\r\nimport furmly_provider from \"./furmly_provider\";\r\nimport {\r\n  withTemplateCache,\r\n  withTemplateCacheProvider\r\n} from \"./furmly_template_cache_context\";\r\nimport {\r\n  withNavigation,\r\n  withNavigationProvider\r\n} from \"./furmly_navigation_context\";\r\nimport { withProcess, withProcessProvider } from \"./furmly_process_context\";\r\n\r\nexport default {\r\n  furmly_input,\r\n  furmly_view,\r\n  furmly_container,\r\n  furmly_process,\r\n  furmly_section,\r\n  furmly_select,\r\n  furmly_selectset,\r\n  furmly_list,\r\n  furmly_hidden,\r\n  furmly_nav,\r\n  furmly_grid,\r\n  furmly_image,\r\n  furmly_fileupload,\r\n  furmly_actionview,\r\n  furmly_htmlview,\r\n  furmly_label,\r\n  furmly_webview,\r\n  furmly_provider,\r\n  furmly_command,\r\n  withNavigation,\r\n  withNavigationProvider,\r\n  withTemplateCache,\r\n  withTemplateCacheProvider,\r\n  withProcess,\r\n  withProcessProvider\r\n};\r\n","import React from \"react\";\r\nimport components from \"./lib\";\r\nimport debug from \"debug\";\r\n\r\nexport class Deferred {\r\n  constructor(name) {\r\n    if (!name)\r\n      throw new Error(\"Deferred component name cannot be null or empty\");\r\n    this.name = name.toUpperCase();\r\n  }\r\n}\r\nconst log = debug(\"furmly-init\");\r\nconst createMap = () => {\r\n  const _defaultMap = {};\r\n  const recipes = {};\r\n  const preparedRecipes = {};\r\n  const waiting = {};\r\n  const deps = {};\r\n  const getComponent = cooked => {\r\n    if (!React.Component.isPrototypeOf(cooked)) {\r\n      if (typeof cooked.getComponent !== \"function\")\r\n        throw new Error(\r\n          \"Custom component must either be a react component or have getComponent function return a valid react component\"\r\n        );\r\n      cooked = cooked.getComponent();\r\n      log(`cooked:${cooked}`);\r\n      if (\r\n        !React.Component.isPrototypeOf(cooked) &&\r\n        typeof cooked !== \"function\"\r\n      )\r\n        throw new Error(\"getComponent must return a valid react element\");\r\n    }\r\n    return cooked;\r\n  };\r\n  const api = {\r\n    INPUT: components.furmly_input,\r\n    VIEW: components.furmly_view,\r\n    CONTAINER: components.furmly_container,\r\n    PROCESS: components.furmly_process,\r\n    SECTION: components.furmly_section,\r\n    SELECT: components.furmly_select,\r\n    SELECTSET: components.furmly_selectset,\r\n    LIST: components.furmly_list,\r\n    HIDDEN: components.furmly_hidden,\r\n    NAV: components.furmly_nav,\r\n    IMAGE: components.furmly_image,\r\n    GRID: components.furmly_grid,\r\n    FILEUPLOAD: components.furmly_fileupload,\r\n    ACTIONVIEW: components.furmly_actionview,\r\n    HTMLVIEW: components.furmly_htmlview,\r\n    LABEL: components.furmly_label,\r\n    WEBVIEW: components.furmly_webview,\r\n    COMMAND: components.furmly_command,\r\n    PROVIDER: components.furmly_provider,\r\n    withNavigation: components.withNavigation,\r\n    withNavigationProvider: components.withNavigationProvider,\r\n    withTemplateCache: components.withTemplateCache,\r\n    withTemplateCacheProvider: components.withTemplateCacheProvider,\r\n    withProcess: components.withProcess,\r\n    withProcessProvider: components.withProcessProvider,\r\n    prepareRecipe(name, recipe) {\r\n      const parsedRecipe =\r\n        (typeof deps[name] === \"number\" && !deps[name] && recipe) ||\r\n        recipe.reduce((acc, x, index) => {\r\n          if (Deferred.prototype.isPrototypeOf(x)) {\r\n            //check if there's an existing recipe\r\n            if (recipes[x.name]) {\r\n              if (preparedRecipes[x.name])\r\n                // its already prepared.\r\n                acc.push(this[x.name]);\r\n              else {\r\n                // register to be notified when its ready\r\n                if (!waiting[x.name]) waiting[x.name] = [];\r\n                waiting[x.name].push({ name, recipe, index });\r\n                deps[name] =\r\n                  typeof deps[name] == \"undefined\" ? 1 : ++deps[name];\r\n              }\r\n            }\r\n          } else {\r\n            acc.push(x);\r\n          }\r\n          return acc;\r\n        }, []);\r\n\r\n      if (parsedRecipe.length == recipe.length) {\r\n        // run recipe.\r\n        // run all waiting recipes.\r\n        // save recipe.\r\n        let cooked = this[name].apply(null, parsedRecipe);\r\n        this[name] = getComponent(cooked);\r\n        preparedRecipes[name] = true;\r\n        if (waiting[name] && waiting[name].length) {\r\n          waiting[name].forEach(x => {\r\n            deps[x.name] -= 1;\r\n            x.recipe[x.index] = prepared;\r\n            //if it has no more dependencies then prepare it.\r\n            if (!deps[x.name]) {\r\n              this.prepareRecipe(x.name, x.recipe);\r\n            }\r\n          });\r\n        }\r\n      }\r\n    },\r\n    addRecipe(name, recipe, fn) {\r\n      if (!this[name] && fn) this[name] = fn;\r\n      recipes[name] = recipe;\r\n    },\r\n    removeRecipe(name) {\r\n      recipes[name] = _defaultMap[name];\r\n    },\r\n    get _defaultMap() {\r\n      return Object.assign({}, _defaultMap);\r\n    },\r\n    componentLocator(interceptors) {\r\n      return context => {\r\n        let control;\r\n        if (interceptors) control = interceptors(context, this, _defaultMap);\r\n        if (!control) {\r\n          if (context.uid) {\r\n            if (this[context.uid]) return this[context.uid];\r\n            let upper = context.uid.toUpperCase();\r\n            if (this[upper]) return this[upper];\r\n          }\r\n          return this[context.elementType];\r\n        }\r\n        return control;\r\n      };\r\n    },\r\n    cook(name, recipe, customName) {\r\n      if (name && recipe) {\r\n        if (!Array.prototype.isPrototypeOf(recipe)) {\r\n          throw new Error(\"Recipe must be an array\");\r\n        }\r\n        if (!_defaultMap[name])\r\n          throw new Error(\"Cannot find any recipe for that element\");\r\n        if (name == customName) {\r\n          log(\"Custom name will override default recipe\");\r\n        }\r\n\r\n        let cooked = _defaultMap[name].apply(null, recipe);\r\n        if (customName) this[customName] = getComponent(cooked);\r\n        return cooked;\r\n      }\r\n\r\n      if (!this._cooked) {\r\n        Object.keys(recipes).forEach(recipe => {\r\n          _defaultMap[recipe] = this[recipe];\r\n          this.prepareRecipe(recipe, recipes[recipe]);\r\n        });\r\n        this._cooked = true;\r\n      }\r\n      return this;\r\n    }\r\n  };\r\n\r\n  Object.keys(api).map(key => {\r\n    if (key[0] == key[0].toUpperCase()) {\r\n      api[`add${key}Recipe`] = api.addRecipe.bind(api, key);\r\n    }\r\n  });\r\n\r\n  return api;\r\n};\r\n\r\nexport default createMap;\r\n","export default function(string, ...rest) {\r\n  var str = string.toString();\r\n  var res = \"\" + str;\r\n  if (rest.length) {\r\n    var t = typeof rest[0];\r\n    var arr;\r\n    var exp = /(\\{([\\w|_]+)\\})/g;\r\n    var args = \"string\" === t || \"number\" === t ? rest : rest[0];\r\n\r\n    while ((arr = exp.exec(str))) {\r\n      res = res.replace(arr[0], args[arr[2]] || \"\");\r\n    }\r\n    str = res;\r\n  }\r\n\r\n  return str;\r\n}\r\n","import invariants from \"./invariants\";\r\nimport memcache from \"./memcache\";\r\nimport validator from \"./validator\";\r\nimport formatExpression from \"./formatExpression\";\r\nimport view from \"./view\";\r\n\r\n\r\nexport default {\r\n\tinvariants,\r\n\tmemcache,\r\n\tformatExpression,\r\n\tvalidator,\r\n\tview\r\n};\r\n"],"names":["Validator","context","run","bind","Promise","resolve","reject","props","validators","length","asyncValidators","result","reduce","current","element","valid","error","validatorType","VALIDATOR_TYPES","REQUIRED","hasValue","MAXLENGTH","isLessThanMaxLength","MINLENGTH","isGreaterThanMinLength","REGEX","matchesRegex","errors","push","setState","component","name","Error","Component","prototype","isPrototypeOf","HOCComponent","__originalRenderMethod__","e","ReactSSRErrorHandler","constructor","log","logger","debug","WrappedComponent","m","id","React","LabelWrapper","Input","DatePicker","Checkbox","validComponent","FurmlyInput","state","setDefault","valueChanged","runValidators","runAsyncValidators","validator","validate","toValueChanged","formatDateRange","fromValueChanged","setDateFromRange","isDateRange","_mounted","next","component_uid","value","args","config","isRange","split","fromValue","toValue","Date","ValidationHelper","runAsyncValidator","filter","x","max","min","RegExp","exp","test","from","to","toLocaleDateString","maxDate","maxConfig","date","minDate","minConfig","default","Result","type","passThrough","assign","getDateConfig","label","disabled","isRequired","PureComponent","propTypes","PropTypes","func","getComponent","withLogger","MemCache","opts","defaultTTL","ttl","store","get","_items","obj","JSON","stringify","key","hasOwnProperty","getKey","_key","undefined","handle","setTimeout","remove","createStack","action","ACTIONS","SET_FURMLY_PARAMS","ALREADY_VISIBLE","hasScreenAlready","payload","stack","copyStack","Object","REPLACE_STACK","slice","forEach","index","countRef","REMOVE_LAST_FURMLY_PARAMS","item","pop","$routeName","_references","params","refs","CLEAR_STACK","parse","makeTop","curr","splice","_","isEqual","CHECK_FOR_EXISTING_SCREEN","Symbol","enhancers","furmly","navigation","preDispatch","preRefreshToken","BASE_URL","global","baseUrl","throttled","cache","processorsCacheTimeout","copy","showMessage","message","getQueryParams","keys","map","arr","encodeURIComponent","join","setParams","replaceStack","goBack","clearNavigationStack","alreadyVisible","removeNavigationContext","REMOVE_NAVIGATION_CONTEXT","addNavigationContext","ADD_NAVIGATION_CONTEXT","VALUE_CHANGED","defaultError","dispatch","customType","meta","throttleEnabled","res","status","statusText","headers","errormessage","CALL_API","throttleKey","endpoint","body","processorRetryOffset","SESSION_MAY_HAVE_EXPIRED","loginUrl","furmlyDownloadUrl","fetchFurmlyProcess","cacheProcessDescription","cacheKey","hasKey","FETCHED_PROCESS","getState","$uiOnDemand","uiOnDemand","FETCHING_PROCESS","json","then","response","data","d","FAILED_TO_FETCH_PROCESS","clearElementData","CLEAR_DATA","getMoreForGrid","runFurmlyProcessor","FETCHING_GRID","FURMLY_GET_MORE_FOR_GRID","ERROR_WHILE_FETCHING_GRID","filterGrid","FILTERED_GRID","getItemTemplate","GET_ITEM_TEMPLATE","GOT_ITEM_TEMPLATE","FAILED_TO_GET_ITEM_TEMPLATE","getFilterTemplate","GET_FILTER_TEMPLATE","GOT_FILTER_TEMPLATE","FAILED_TO_GET_FILTER_TEMPLATE","getSingleItemForGrid","GET_SINGLE_ITEM_FOR_GRID","GOT_SINGLE_ITEM_FOR_GRID","ERROR_WHILE_GETTING_SINGLE_ITEM_FOR_GRID","getRefreshToken","GET_REFRESH_TOKEN","GOT_REFRESH_TOKEN","FAILED_TO_GET_REFRESH_TOKEN","requestCustomType","resultCustomType","errorCustomType","returnsUI","disableCache","disableRetry","retry","cacheProcessorResponses","FURMLY_PROCESSOR_RAN","maxProcessorRetries","waitIndex","waitingProcessors","waitHandle","FURMLY_PROCESSOR_RUNNING","FURMLY_PROCESSOR_FAILED","disableProcessorRetry","runFurmlyProcess","details","FURMLY_PROCESS_RUNNING","form","currentStep","FURMLY_PROCESS_RAN","view","description","steps","disableBackwardNavigation","_p","notifyStepAdvance","catch","er","FURMLY_PROCESS_FAILED","instanceId","parseInt","getFurmlyFilePreview","fileType","query","GET_PREVIEW","GOT_PREVIEW","FAILED_TO_GET_PREVIEW","clearPreview","CLEAR_PREVIEW","uploadFurmlyFile","file","formData","FormData","append","START_FILE_UPLOAD","FILE_UPLOADED","FILE_UPLOAD_FAILED","ProcessContext","createContext","withProcessProvider","ProcessProvider","setup","withProcess","ProcessConsumer","processContext","currentProcess","Page","Warning","Container","mapStateToProps","initialProps","ownProps","_state","elements","mode","hideSubmit","title","processDescription","commandLabel","uid","mapDispatchToProps","FurmlyView","onValueChanged","submit","furmly_view","connect","Section","Header","ComponentWrapper","ComponentLocator","invariants","FurmlyContainer","onDisplayValueChanged","setValidator","_validations","all","Array","call","arguments","displayValue","displayValueChanged","self","extraVal","notifyExtra","sort","y","order","FurmlyComponent","source","elemProps","hasDisplayValue","indexOf","extra","elementType","getTitleFromState","getValueBasedOnMode","v","$objectID","isObjectIdMode","getCurrentStepFromState","getCurrentStep","getCurrentProcess","i","isValidKey","exec","step","process","runThroughObj","conditions","parent","babelHelpers.typeof","unwrapObjectValue","getTemplatesAndAddComponentUid","template","furmly_ref","itemTemplate","uuid","toggleAllBusyIndicators","keyInvariants","fn","getBusyKey","getErrorKey","isArr","TemplateCacheContext","withTemplateCacheProvider","TemplateCacheProvider","add","withTemplateCache","TemplateCacheConsumer","NavigationContext","withNavigationProvider","Navigator","navigator","navigate","clear","NavigationProvider","furmlyNavigator","children","ConnectedNavigationProvider","withNavigation","NavigationConsumer","ProgressBar","TextView","Layout","completed","info","componentNames","componentNamesArr","FurmlyProcess","getCurrentComponent","_id","fetch","fetchParams","processCompleted","busy","runProcess","text","getCurrentComponentName","string","object","FurmlySection","ProgressIndicator","st","FurmlySelect","fetchItems","selectFirstItem","getDisplayValue","isValidValue","items","displayLabel","customArgs","isEmptyOrNull","keyProperty","Picker","noPath","noItems","getPickerItemsById","z","r","FurmlySelectSet","retryFetch","onPickerValueChanged","onContainerValueChanged","getPickerValue","getContainerValue","containerValues","contentItems","sum","respondToPickerValueChanged","oneOption","containerValidator","processor","processorArgs","_args","_onContainerValueChanged","shift","getItems","path","pickerValue","eve","apply","a","b","nextProps","nextState","isEqualWith","_shouldComponentUpdateComparer","superCancel","getCurrentContainerValue","Button","List","Modal","ErrorText","ConfirmationModal","EDIT","NEW","equivalent","arr2","objValue","otherValue","findKey","isMatch","FurmlyList","showModal","closeModal","edit","isDisabled","getListItemDataTemplate","cancelRemove","confirmRemove","dataTemplate","listItemDataTemplateProcessor","ref","isTag","templateCache","equal","behavior","template_ref","ValidatorHelper","modalVisible","existing","modalName","ex","defineProperty","confirmationVisible","isTemplateRef","_itemTemplate","extension","rowTemplate","FurmlyHidden","init","Link","FurmlyNav","go","link","linkAndParams","getParams","paramsOnly","NAV_TYPE","CLIENT","FURMLY","firstItemIsLink","key_value","sp","decodeURIComponent","Image","FurmlyImage","rest","replace","GRID_MODES","ITEM_MODES","ItemView","CommandsView","CommandResultView","total","fetchingGrid","failedToFetchGrid","filterTemplate","singleItem","fetchingSingleItem","gettingFilterTemplate","gettingTemplate","FurmlyGrid","commandResultViewName","itemViewName","pageCount","itemValueChanged","showItemView","cancel","isCRUD","isEDITONLY","getItemsFromSource","done","getFilterValue","getItemValue","more","finished","openCommandMenu","closeCommandView","execCommand","showCommandResult","closeCommandResult","selectItem","selectAllItems","unSelectItem","clearSelectedItems","fetchFilterTemplate","getCommands","setupEditCommand","other","filterTemplateError","filterProcessor","fetchingFilterTemplate","gridArgs","commandProcessed","commands","isEditCommand","cmd","unshift","processed","fetchingItemTemplate","commandType","commandText","toUpperCase","editCommand","methodName","count","full","filterViewName","_filterValidator","submitted","createProcessor","editProcessor","skipFetch","gettingItemTemplate","existingValue","createTemplate","editTemplate","fetchSingleItemProcessor","singleItemError","getSingleItem","fetchTemplateProcessor","itemTemplateError","update","showCommandsView","selectedItems","command","concat","CRUD","EDITONLY","header","footer","templateConfig","dontAutoFetchFromSource","itemViewElements","showCommandResultView","commandResult","commandProcessing","FurmlyHTMLViewer","html","printOnLoad","canPrint","Uploader","Text","previews","FurmlyFileUpload","_previewType","getPreviewType","_supported","isSupported","_getPreview","_query","getPreviewQuery","upload","uploadedId","supports","preview","getPreview","Filter","_actionState","ui","contentViewName","FurmlyActionView","filterValueChanged","resultData","contentValue","resultUI","Label","FurmlyLabel","WebView","FurmlyWebView","url","customDownloadCommand","mapDispatchToState","FurmlyCommand","commandProcessor","commandProcessorArgs","COMMAND_TYPE","DOWNLOAD","access_token","isProcessor","commandIcon","DEFAULT","references","proc","currentState","$instanceId","$nextStep","filteredGrid","gotSingleItemForGrid","errorWhileGettingSingleItemForGrid","reduceGrid","fetchedValue","fetchedDescription","startUpload","fileUpload","uploadFailed","gotPreview","failedToGetPreview","getTemplate","gotTemplate","failedToGetTemplate","busyIndicator","propName","reducers","incoming","changes","changedState","reducer","newState","combinedReducers","combineReducers","sessionHasExpired","defaultRootReducer","SIGN_OUT","popup","extraMiddlewares","apiMiddleware","defaultApiMiddleware","rootReducer","actionEnhancers","defaultActionEnhancers","middlewares","thunkMiddleware","createActionEnhancerMiddleware","compose","applyMiddleware","createStore","createProvider","Process","Deferred","createMap","_defaultMap","recipes","preparedRecipes","waiting","deps","cooked","api","components","furmly_input","furmly_container","furmly_process","furmly_section","furmly_select","furmly_selectset","furmly_list","furmly_hidden","furmly_nav","furmly_image","furmly_grid","furmly_fileupload","furmly_actionview","furmly_htmlview","furmly_label","furmly_webview","furmly_command","furmly_provider","recipe","parsedRecipe","acc","prepared","prepareRecipe","interceptors","control","upper","customName","_cooked","addRecipe","str","toString","t"],"mappings":"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"}