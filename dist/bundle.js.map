{"version":3,"file":"bundle.js","sources":["../src/lib/utils/memcache.js","../src/lib/actions/index.js","../src/lib/utils/validator.js","../src/lib/utils/invariants.js","../src/lib/dynamo_input.js","../src/lib/dynamo_view.js","../src/lib/dynamo_container.js","../src/lib/dynamo_process.js","../src/lib/dynamo_section.js","../src/lib/dynamo_select.js","../src/lib/dynamo_selectset.js","../src/lib/dynamo_list.js","../src/lib/dynamo_hidden.js","../src/lib/dynamo_nav.js","../src/lib/dynamo_image.js","../src/lib/dynamo_grid.js","../src/lib/dynamo_htmlview.js","../src/lib/dynamo_fileupload.js","../src/lib/dynamo_actionview.js","../src/lib/dynamo_label.js","../src/lib/dynamo_webview.js","../src/lib/dynamo_messenger.js","../src/lib/dynamo_command.js","../src/lib/index.js","../src/dynamo_mapping.js","../src/lib/reducers/index.js","../src/lib/reducers/chat.js"],"sourcesContent":["export default class MemCache {\r\n\tconstructor(opts) {\r\n\t\tthis.defaultTTL = (opts && opts.ttl) || 300000;\r\n\t\tthis.store = this.store.bind(this);\r\n\t\tthis.get = this.get.bind(this);\r\n\t\tthis._items = {};\r\n\t}\r\n\tgetKey(obj) {\r\n\t\tswitch (typeof obj) {\r\n\t\t\tcase \"string\":\r\n\t\t\t\treturn obj;\r\n\t\t\tcase \"object\":\r\n\t\t\t\treturn JSON.stringify(obj);\r\n\t\t\tcase \"undefined\":\r\n\t\t\t\tthrow \"Key cannot be null\";\r\n\t\t}\r\n\t}\r\n\thasKey(key) {\r\n\t\treturn this._items.hasOwnProperty(this.getKey(key));\r\n\t}\r\n\tget(key) {\r\n\t\tlet _key = this.getKey(key);\r\n\t\treturn (this._items[_key] && this._items[_key].value) || undefined;\r\n\t}\r\n\tstore(key, value, ttl = this.defaultTTL) {\r\n\t\tlet _key = this.getKey(key);\r\n\t\tif (this._items[_key]) {\r\n\t\t\tclearTimeout(this._items[_key].handle);\r\n\t\t}\r\n\t\tlet handle = setTimeout(this.remove.bind(this, _key), ttl);\r\n\t\tthis._items[_key] = { value, handle };\r\n\t}\r\n\tremove(key) {\r\n\t\tdelete this._items[key];\r\n\t}\r\n}\r\n","import config from \"client_config\";\r\nimport CALL_API from \"call_api\";\r\nimport openSocket from \"socket.io-client\";\r\nimport MemCache from \"../utils/memcache\";\r\n\r\nconst preDispatch = config.preDispatch,\r\n  BASE_URL = global.BASE_URL || config.baseUrl,\r\n  CHAT_URL = global.CHAT_URL || config.chatUrl,\r\n  preLogin = config.preLogin,\r\n  cache = new MemCache({ ttl: config.processorsCacheTimeout });\r\nexport const ACTIONS = {\r\n  ADD_NAVIGATION_CONTEXT:\"ADD_NAVIGATION_CONTEXT\",\r\n  REMOVE_NAVIGATION_CONTEXT:\"REMOVE_NAVIGATION_CONTEXT\",\r\n  OPEN_CONFIRMATION: \"OPEN_CONFIRMATION\",\r\n  OPEN_CHAT: \"OPEN_CHAT\",\r\n  CLOSE_CHAT: \"CLOSE_CHAT\",\r\n  GET_CONTACTS: \"GET_CONTACTS\",\r\n  GOT_CONTACTS: \"GOT_CONTACTS\",\r\n  FAILED_TO_GET_CONTACTS: \"FAILED_TO_GET_CONTACTS\",\r\n  GET_INVITES: \"GET_INVITES\",\r\n  GOT_INVITES: \"GOT_INVITES\",\r\n  FAILED_TO_GET_INVITES: \"FAILED_TO_GET_INVITES\",\r\n  SEARCH: \"SEARCH\",\r\n  FOUND: \"FOUND\",\r\n  NOT_FOUND: \"NOT_FOUND\",\r\n  LOGIN_CHAT: \"LOGIN_CHAT\",\r\n  LOGGED_IN_CHAT: \"LOGGED_IN_CHAT\",\r\n  FAILED_TO_LOGIN_CHAT: \"FAILED_TO_LOGIN_CHAT\",\r\n  SEND_CHAT: \"SEND_CHAT\",\r\n  SENT_CHAT: \"SENT_CHAT\",\r\n  FAILED_TO_SEND_CHAT: \"FAILED_TO_SEND_CHAT\",\r\n  CREATE_GROUP: \"CREATE_GROUP\",\r\n  CREATED_GROUP: \"CREATED_GROUP\",\r\n  FAILED_TO_CREATE_GROUP: \"FAILED_TO_CREATE_GROUP\",\r\n  SEND_FRIEND_REQUEST: \"SEND_FRIEND_REQUEST\",\r\n  SENT_FRIEND_REQUEST: \"SENT_FRIEND_REQUEST\",\r\n  FAILED_TO_SEND_FRIEND_REQUEST: \"FAILED_TO_SEND_FRIEND_REQUEST\",\r\n  ACCEPT_FRIEND_REQUEST: \"ACCEPT_FRIEND_REQUEST\",\r\n  ACCEPTED_FRIEND_REQUEST: \"ACCEPTED_FRIEND_REQUEST\",\r\n  FAILED_TO_ACCEPT_FRIEND_REQUEST: \"FAILED_TO_ACCEPT_FRIEND_REQUEST\",\r\n  REJECT_FRIEND_REQUEST: \"REJECT_FRIEND_REQUEST\",\r\n  REJECTED_FRIEND_REQUEST: \"REJECTED_FRIEND_REQUEST\",\r\n  FAILED_TO_REJECT_FRIEND_REQUEST: \"FAILED_TO_REJECT_FRIEND_REQUEST\",\r\n  GET_FRIEND_REQUEST: \"GET_FRIEND_REQUEST\",\r\n  GOT_FRIEND_REQUEST: \"GOT_FRIEND_REQUEST\",\r\n  FAILED_TO_GET_FRIEND_REQUEST: \"FAILED_TO_GET_FRIEND_REQUEST\",\r\n  FETCHED_PROCESS: \"FETCHED_PROCESS\",\r\n  FAILED_TO_FETCH_PROCESS: \"FAILED_TO_FETCH_PROCESS\",\r\n  FETCHING_PROCESS: \"FETCHING_PROCESS\",\r\n  SESSION_MAY_HAVE_EXPIRED: \"SESSION_MAY_HAVE_EXPIRED\",\r\n  FETCHING_GRID: \"FETCHING_GRID\",\r\n  GET_SINGLE_ITEM_FOR_GRID: \"GET_SINGLE_ITEM_FOR_GRID\",\r\n  GOT_SINGLE_ITEM_FOR_GRID: \"GOT_SINGLE_ITEM_FOR_GRID\",\r\n  ERROR_WHILE_GETTING_SINGLE_ITEM_FOR_GRID:\r\n    \"ERROR_WHILE_GETTING_SINGLE_ITEM_FOR_GRID\",\r\n  DYNAMO_GET_MORE_FOR_GRID: \"DYNAMO_GET_MORE_FOR_GRID\",\r\n  ERROR_WHILE_FETCHING_GRID: \"ERROR_WHILE_FETCHING_GRID\",\r\n  FILTERED_GRID: \"FILTERED_GRID\",\r\n  DYNAMO_PROCESSOR_RUNNING: \"DYNAMO_PROCESSOR_RUNNING\",\r\n  DYNAMO_PROCESSOR_RAN: \"DYNAMO_PROCESSOR_RAN\",\r\n  DYNAMO_PROCESSOR_FAILED: \"DYNAMO_PROCESSOR_FAILED\",\r\n  DYNAMO_PROCESS_RUNNING: \"DYNAMO_PROCESS_RUNNING\",\r\n  DYNAMO_PROCESS_RAN: \"DYNAMO_PROCESS_RAN\",\r\n  DYNAMO_PROCESS_FAILED: \"DYNAMO_PROCESS_FAILED\",\r\n  API_ERROR: \"API_ERROR\",\r\n  START_FILE_UPLOAD: \"START_FILE_UPLOAD\",\r\n  FILE_UPLOADED: \"FILE_UPLOADED\",\r\n  FILE_UPLOAD_FAILED: \"FILE_UPLOAD_FAILED\",\r\n  GET_PREVIEW: \"GET_PREVIEW\",\r\n  GOT_PREVIEW: \"GOT_PREVIEW\",\r\n  FAILED_TO_GET_PREVIEW: \"FAILED_TO_GET_PREVIEW\",\r\n  GET_ITEM_TEMPLATE: \"GET_ITEM_TEMPLATE\",\r\n  GOT_ITEM_TEMPLATE: \"GOT_ITEM_TEMPLATE\",\r\n  FAILED_TO_GET_ITEM_TEMPLATE: \"FAILED_TO_GET_ITEM_TEMPLATE\",\r\n  GET_FILTER_TEMPLATE: \"GET_FILTER_TEMPLATE\",\r\n  GOT_FILTER_TEMPLATE: \"GOT_FILTER_TEMPLATE\",\r\n  FAILED_TO_GET_FILTER_TEMPLATE: \"FAILED_TO_GET_FILTER_TEMPLATE\",\r\n  ADD_TO_OPEN_CHATS: \"ADD_TO_OPEN_CHATS\",\r\n  NEW_MESSAGE: \"NEW_MESSAGE\",\r\n  NEW_GROUP_MESSAGE: \"NEW_GROUP_MESSAGE\"\r\n};\r\n\r\nlet socket;\r\n\r\nexport const displayMessage = text => {\r\n  return {\r\n    type: \"SHOW_MESSAGE\",\r\n    message: text\r\n  };\r\n};\r\n\r\nfunction getQueryParams(args) {\r\n  return args\r\n    ? \"?\" +\r\n      Object.keys(args)\r\n        .map((x, index, arr) => {\r\n          return `${x}=${encodeURIComponent(args[x]) +\r\n            (index != arr.length - 1 ? \"&\" : \"\")}`;\r\n        })\r\n        .join(\"\")\r\n    : \"\";\r\n}\r\nexport function removeNavigationContext(){\r\n  return {\r\n    type:ACTIONS.REMOVE_NAVIGATION_CONTEXT\r\n  }\r\n}\r\n\r\nexport function addNavigationContext(args){\r\n  return {\r\n    type:ACTIONS.ADD_NAVIGATION_CONTEXT,\r\n    payload:args\r\n  };\r\n}\r\nexport function openConfirmation(id, message, params) {\r\n  return {\r\n    type: ACTIONS.OPEN_CONFIRMATION,\r\n    payload: { message, params, id }\r\n  };\r\n}\r\nfunction defaultError(dispatch, customType, meta) {\r\n  return {\r\n    type: customType || \"SHOW_MESSAGE\",\r\n    meta: (action, state, res) => {\r\n      if (customType && res.status !== 401)\r\n        dispatch(\r\n          displayMessage(\r\n            res.statusText ||\r\n              (res.headers &&\r\n                res.headers.map &&\r\n                res.headers.map.errormessage &&\r\n                res.headers.map.errormessage[0]) ||\r\n              \"Sorry , an error occurred while processing your request\"\r\n          )\r\n        );\r\n\r\n      //session expired\r\n      if (res.status == 401) {\r\n        dispatch(showMessage(\"Session may have expired\"));\r\n        dispatch({ type: ACTIONS.SESSION_MAY_HAVE_EXPIRED });\r\n      }\r\n\r\n      return meta\r\n        ? meta(action, state, res)\r\n        : res.statusText || \"An unknown error has occurred\";\r\n    }\r\n  };\r\n}\r\nexport const dynamoDownloadUrl = `${BASE_URL}/api/download/:id`;\r\nexport function fetchDynamoProcess(id, args) {\r\n  return (dispatch, getState) =>\r\n    dispatch({\r\n      [CALL_API]: preDispatch(\r\n        {\r\n          endpoint: `${BASE_URL}/api/process/describe/${id}${getQueryParams(\r\n            Object.assign({}, args || {}, { $uiOnDemand: !!config.uiOnDemand })\r\n          )}`,\r\n          types: [\r\n            { type: ACTIONS.FETCHING_PROCESS, meta: id },\r\n            {\r\n              type: ACTIONS.FETCHED_PROCESS,\r\n              payload: (action, state, res) => {\r\n                //workaround for react-native fetch.\r\n                setTimeout(() => null, 0);\r\n                return res.json().then(d => {\r\n                  return { id: id, data: d };\r\n                });\r\n              }\r\n            },\r\n            defaultError(dispatch, ACTIONS.FAILED_TO_FETCH_PROCESS)\r\n          ],\r\n          method: \"GET\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n          }\r\n        },\r\n        getState()\r\n      )\r\n    });\r\n}\r\n\r\nexport function getMoreForGrid(id, args, key) {\r\n  return runDynamoProcessor(id, args, key, {\r\n    requestCustomType: ACTIONS.FETCHING_GRID,\r\n    resultCustomType: ACTIONS.DYNAMO_GET_MORE_FOR_GRID,\r\n    errorCustomType: ACTIONS.ERROR_WHILE_FETCHING_GRID,\r\n    disableCache: true\r\n  });\r\n}\r\nexport function filterGrid(id, args, key) {\r\n  return runDynamoProcessor(id, args, key, {\r\n    requestCustomType: ACTIONS.FETCHING_GRID,\r\n    resultCustomType: ACTIONS.FILTERED_GRID,\r\n    errorCustomType: ACTIONS.ERROR_WHILE_FETCHING_GRID,\r\n    disableCache: true\r\n  });\r\n}\r\n\r\nexport function getItemTemplate(id, args, key) {\r\n  return runDynamoProcessor(id, args, key, {\r\n    requestCustomType: ACTIONS.GET_ITEM_TEMPLATE,\r\n    resultCustomType: ACTIONS.GOT_ITEM_TEMPLATE,\r\n    errorCustomType: ACTIONS.FAILED_TO_GET_ITEM_TEMPLATE,\r\n    disableCache: true\r\n  });\r\n}\r\n\r\nexport function getFilterTemplate(id, args, key) {\r\n  return runDynamoProcessor(id, args, key, {\r\n    requestCustomType: ACTIONS.GET_FILTER_TEMPLATE,\r\n    resultCustomType: ACTIONS.GOT_FILTER_TEMPLATE,\r\n    errorCustomType: ACTIONS.FAILED_TO_GET_FILTER_TEMPLATE,\r\n    disableCache: true\r\n  });\r\n}\r\n\r\nexport function getSingleItemForGrid(id, args, key) {\r\n  return runDynamoProcessor(id, args, key, {\r\n    requestCustomType: ACTIONS.GET_SINGLE_ITEM_FOR_GRID,\r\n    resultCustomType: ACTIONS.GOT_SINGLE_ITEM_FOR_GRID,\r\n    errorCustomType: ACTIONS.ERROR_WHILE_GETTING_SINGLE_ITEM_FOR_GRID,\r\n    disableCache: true\r\n  });\r\n}\r\n\r\n\r\nexport function runDynamoProcessor(\r\n  id,\r\n  args,\r\n  key,\r\n  {\r\n    requestCustomType,\r\n    resultCustomType,\r\n    errorCustomType,\r\n    returnsUI,\r\n    disableCache\r\n  } = {}\r\n) {\r\n  //console.log(arguments);\r\n  if (config.cacheProcessorResponses && !disableCache) {\r\n    let cacheKey = { id, args },\r\n      hasKey = cache.hasKey(cacheKey);\r\n    if (hasKey) {\r\n      let payload = Object.assign({}, cache.get(cacheKey));\r\n      payload.key = key;\r\n\r\n      return dispatch => {\r\n        dispatch({\r\n          type: resultCustomType || ACTIONS.DYNAMO_PROCESSOR_RAN,\r\n          payload\r\n        });\r\n      };\r\n    }\r\n  }\r\n\r\n  return (dispatch, getState) =>\r\n    dispatch({\r\n      [CALL_API]: preDispatch(\r\n        {\r\n          endpoint: `${BASE_URL}/api/processors/run/${id}`,\r\n          types: [\r\n            {\r\n              type: requestCustomType || ACTIONS.DYNAMO_PROCESSOR_RUNNING,\r\n              meta: { id, key, args }\r\n            },\r\n            {\r\n              type: resultCustomType || ACTIONS.DYNAMO_PROCESSOR_RAN,\r\n              payload: (action, state, res) => {\r\n                return res.json().then(data => {\r\n                  if (data && typeof data.message == \"string\") {\r\n                    dispatch(showMessage(data.message));\r\n                  }\r\n                  let response = { id, data, args, key, returnsUI };\r\n                  if (config.cacheProcessorResponses && !disableCache) {\r\n                    cache.store({ id, args }, response);\r\n                  }\r\n                  return response;\r\n                });\r\n              }\r\n            },\r\n            defaultError(\r\n              dispatch,\r\n              errorCustomType || ACTIONS.DYNAMO_PROCESSOR_FAILED,\r\n              () => key\r\n            )\r\n          ],\r\n          method: \"POST\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n          },\r\n          body: JSON.stringify(args)\r\n        },\r\n        getState()\r\n      )\r\n    });\r\n}\r\n\r\nexport function showMessage(message) {\r\n  return {\r\n    type: \"SHOW_MESSAGE\",\r\n    message\r\n  };\r\n}\r\n\r\nexport function runDynamoProcess(details) {\r\n  return (dispatch, getState) =>\r\n    dispatch({\r\n      [CALL_API]: preDispatch(\r\n        {\r\n          endpoint: `${BASE_URL}/api/process/run/${details.id}`,\r\n          types: [\r\n            {\r\n              type: ACTIONS.DYNAMO_PROCESS_RUNNING,\r\n              meta: { id: details.id, form: details.form }\r\n            },\r\n            {\r\n              type: ACTIONS.DYNAMO_PROCESS_RAN,\r\n              payload: (action, state, res) => {\r\n                return res\r\n                  .json()\r\n                  .then(d => {\r\n                    if (d && typeof d.message == \"string\") {\r\n                      dispatch(showMessage(d.message));\r\n                    }\r\n\r\n                    return { id: details.id, data: d };\r\n                  })\r\n                  .catch(er => {\r\n                    dispatch({\r\n                      type: \"SHOW_MESSAGE\",\r\n                      message:\r\n                        \"An error occurred while trying to understand a response from the server.\"\r\n                    });\r\n                  });\r\n              }\r\n            },\r\n            defaultError(dispatch, ACTIONS.DYNAMO_PROCESS_FAILED)\r\n          ],\r\n          method: \"POST\",\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n          },\r\n          body: JSON.stringify(\r\n            Object.assign(\r\n              {},\r\n              details.form,\r\n              {\r\n                instanceId: details.instanceId\r\n              },\r\n              { $uiOnDemand: !!config.uiOnDemand }\r\n            )\r\n          )\r\n        },\r\n        getState()\r\n      )\r\n    });\r\n}\r\nexport function getDynamoFilePreview(id, key, fileType, query) {\r\n  return (dispatch, getState) => {\r\n    dispatch({\r\n      [CALL_API]: preDispatch(\r\n        {\r\n          endpoint: `${BASE_URL}/api/upload/preview/${id + (query || \"\")}`,\r\n          types: [\r\n            { type: ACTIONS.GET_PREVIEW, meta: key },\r\n            {\r\n              type: ACTIONS.GOT_PREVIEW,\r\n              payload: (action, state, res) => {\r\n                return res.json().then(d => {\r\n                  return { data: d, key };\r\n                });\r\n              }\r\n            },\r\n            defaultError(dispatch, ACTIONS.FAILED_TO_GET_PREVIEW, () => key)\r\n          ],\r\n          method: \"GET\",\r\n          headers: {\r\n            Accept: \"*/*\",\r\n            \"Content-Type\": \"application/json\"\r\n          }\r\n        },\r\n        getState()\r\n      )\r\n    });\r\n  };\r\n}\r\n\r\nexport function uploadDynamoFile(file, key) {\r\n  let formData = new FormData();\r\n\r\n  formData.append(\"file\", file);\r\n\r\n  return (dispatch, getState) => {\r\n    dispatch({\r\n      [CALL_API]: preDispatch(\r\n        {\r\n          endpoint: `${BASE_URL}/api/upload`,\r\n          types: [\r\n            { type: ACTIONS.START_FILE_UPLOAD, meta: key },\r\n            {\r\n              type: ACTIONS.FILE_UPLOADED,\r\n              payload: (action, state, res) => {\r\n                return res.json().then(d => {\r\n                  return { key, id: d.id };\r\n                });\r\n              }\r\n            },\r\n            defaultError(dispatch, ACTIONS.FILE_UPLOAD_FAILED, () => key)\r\n          ],\r\n          method: \"POST\",\r\n          headers: {\r\n            Accept: \"application/json\"\r\n          },\r\n          body: formData\r\n        },\r\n        getState()\r\n      )\r\n    });\r\n  };\r\n}\r\n\r\nexport function loginChat(credentials, extra) {\r\n  return (dispatch, getState) => {\r\n    dispatch({ type: ACTIONS.LOGIN_CHAT });\r\n    socket.emit(\"login\", preLogin(credentials, getState()), msg => {\r\n      if (msg.error) {\r\n        if (!msg.isSignedUp && credentials.handle) {\r\n          dispatch(\r\n            showMessage(\r\n              \"An error occurred while contacting the chat server. Please retry\"\r\n            )\r\n          );\r\n        }\r\n        return dispatch({ type: ACTIONS.FAILED_TO_LOGIN_CHAT, payload: msg });\r\n      }\r\n      if (extra) {\r\n        extra();\r\n      }\r\n      return dispatch({\r\n        type: ACTIONS.LOGGED_IN_CHAT,\r\n        payload: msg.message,\r\n        meta: credentials\r\n      });\r\n    });\r\n  };\r\n}\r\n\r\nexport function sendMessage(type, msg) {\r\n  return emit(type, msg, {\r\n    requestType: ACTIONS.SEND_CHAT,\r\n    resultType: ACTIONS.SENT_CHAT,\r\n    errorType: ACTIONS.FAILED_TO_SEND_CHAT\r\n  });\r\n}\r\nexport function createGroup(msg) {\r\n  return emit(\"create group\", msg, {\r\n    requestType: ACTIONS.CREATE_GROUP,\r\n    resultType: ACTIONS.CREATED_GROUP\r\n  });\r\n}\r\n\r\nexport function sendFriendRequest(handle) {\r\n  return emit(\"friend request\", handle, {\r\n    requestType: ACTIONS.SEND_FRIEND_REQUEST,\r\n    resultType: ACTIONS.SENT_FRIEND_REQUEST,\r\n    errorType: ACTIONS.FAILED_TO_SEND_FRIEND_REQUEST\r\n  });\r\n}\r\nexport function getContacts() {\r\n  return emit(\"friends\", null, {\r\n    requestType: ACTIONS.GET_CONTACTS,\r\n    resultType: ACTIONS.GOT_CONTACTS,\r\n    errorType: ACTIONS.FAILED_TO_GET_CONTACTS\r\n  });\r\n}\r\n\r\nexport function fetchInvites() {\r\n  return emit(\"pending friend requests\", null, {\r\n    requestType: ACTIONS.GET_INVITES,\r\n    resultType: ACTIONS.GOT_INVITES,\r\n    errorType: ACTIONS.FAILED_TO_GET_INVITES\r\n  });\r\n}\r\n\r\nexport function acceptInvite(handle) {\r\n  return emit(\"approve friend request\", handle, {\r\n    requestType: ACTIONS.ACCEPT_FRIEND_REQUEST,\r\n    resultType: ACTIONS.ACCEPTED_FRIEND_REQUEST,\r\n    errorType: ACTIONS.FAILED_TO_ACCEPT_FRIEND_REQUEST\r\n  });\r\n}\r\nexport function rejectInvite(handle) {\r\n  return emit(\"reject friend request\", handle, {\r\n    requestType: ACTIONS.REJECT_FRIEND_REQUEST,\r\n    resultType: ACTIONS.REJECTED_FRIEND_REQUEST,\r\n    errorType: ACTIONS.FAILED_TO_REJECT_FRIEND_REQUEST\r\n  });\r\n}\r\nexport function searchForHandle(handle) {\r\n  return emit(\"search for handle\", handle, {\r\n    requestType: ACTIONS.SEARCH,\r\n    resultType: ACTIONS.FOUND,\r\n    errorType: ACTIONS.NOT_FOUND\r\n  });\r\n}\r\n\r\nfunction emit(type, message, { requestType, resultType, errorType }) {\r\n  let args = Array.prototype.slice.call(arguments);\r\n  return (dispatch, getState) => {\r\n    dispatch({ type: requestType });\r\n    socket.emit(type, message, result => {\r\n      if (result.error) {\r\n        if (result.message == \"Unauthorized\") {\r\n          let state = getState();\r\n          if (state.authentication.username) {\r\n            return dispatch(\r\n              loginChat({ username: state.authentication.username }, () => {\r\n                dispatch(emit.apply(null, args));\r\n              })\r\n            );\r\n          }\r\n        }\r\n\r\n        return (\r\n          dispatch(showMessage(result.message)),\r\n          errorType && dispatch({ type: errorType, payload: result })\r\n        );\r\n      }\r\n      dispatch({\r\n        type: resultType,\r\n        payload: result && result.message,\r\n        meta: message\r\n      });\r\n    });\r\n  };\r\n}\r\n\r\nexport function addToOpenChats(chat) {\r\n  return { type: ACTIONS.ADD_TO_OPEN_CHATS, payload: chat };\r\n}\r\nexport function openChat(chat) {\r\n  return { type: ACTIONS.OPEN_CHAT, payload: chat };\r\n}\r\nexport function closeChat() {\r\n  return { type: ACTIONS.CLOSE_CHAT };\r\n}\r\n\r\nexport function startReceivingMessages(store) {\r\n  socket = openSocket(CHAT_URL);\r\n  socket.on(\"msg\", function(message, fn) {\r\n    store.dispatch({ type: ACTIONS.NEW_MESSAGE, payload: message });\r\n    fn();\r\n  });\r\n  socket.on(\"grpmsg\", function(message, fn) {\r\n    store.dispatch({ type: ACTIONS.NEW_GROUP_MESSAGE, payload: message });\r\n    fn();\r\n  });\r\n}\r\n","export default class Validator {\r\n\tconstructor(context) {\r\n\t\tthis.run = this.run.bind(context);\r\n\t}\r\n\trun() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (\r\n\t\t\t\t(!this.props.validators || !this.props.validators.length) &&\r\n\t\t\t\t(!this.props.asyncValidators ||\r\n\t\t\t\t\t!this.props.asyncValidators.length)\r\n\t\t\t)\r\n\t\t\t\treturn resolve();\r\n\r\n\t\t\tif (this.props.validators) {\r\n\t\t\t\tlet result = this.props.validators.reduce(\r\n\t\t\t\t\t(current, element) => {\r\n\t\t\t\t\t\t// statements\r\n\t\t\t\t\t\tlet valid = current.valid,\r\n\t\t\t\t\t\t\terror = \"\";\r\n\t\t\t\t\t\tswitch (element.validatorType) {\r\n\t\t\t\t\t\t\tcase VALIDATOR_TYPES.REQUIRED:\r\n\t\t\t\t\t\t\t\tvalid = this.hasValue();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase VALIDATOR_TYPES.MAXLENGTH:\r\n\t\t\t\t\t\t\t\tvalid = this.isLessThanMaxLength(element);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase VALIDATOR_TYPES.MINLENGTH:\r\n\t\t\t\t\t\t\t\tvalid = this.isGreaterThanMinLength(element);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase VALIDATOR_TYPES.REGEX:\r\n\t\t\t\t\t\t\t\tvalid = this.matchesRegex(element);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (typeof valid == \"string\") {\r\n\t\t\t\t\t\t\terror = valid;\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\tcurrent.errors.push(error),\r\n\t\t\t\t\t\t\t\t(current.valid = false),\r\n\t\t\t\t\t\t\t\tcurrent\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn current;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{ errors: [], valid: true }\r\n\t\t\t\t);\r\n\t\t\t\tif (!result.valid) {\r\n\t\t\t\t\tthis.setState(\r\n\t\t\t\t\t\tObject.assign(this.state, { errors: result.errors })\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn reject();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tthis.props.asyncValidators &&\r\n\t\t\t\tthis.props.asyncValidators.length &&\r\n\t\t\t\t!this.props.valid\r\n\t\t\t) {\r\n\t\t\t\treturn reject();\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState(Object.assign(this.state, { errors: null }));\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport const VALIDATOR_TYPES = {\r\n\tREQUIRED: \"REQUIRED\",\r\n\tMAXLENGTH: \"MAXLENGTH\",\r\n\tMINLENGTH: \"MINLENGTH\",\r\n\tREGEX: \"REGEX\"\r\n};\r\n","import { Component } from \"react\";\r\nexport default {\r\n\tvalidComponent: function(component, name) {\r\n\t\tif (!component) throw new Error(`${name} cannot be null`);\r\n\t\tif (\r\n\t\t\t!Component.prototype.isPrototypeOf(component) &&\r\n\t\t\ttypeof component !== \"function\"\r\n\t\t)\r\n\t\t\tthrow new Error(\r\n\t\t\t\t`${name} must either be a valid react Component or a Function`\r\n\t\t\t);\r\n\t\treturn true;\r\n\t}\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { runDynamoProcessor } from \"./actions\";\r\nimport ValidationHelper, { VALIDATOR_TYPES } from \"./utils/validator\";\r\nimport invariants from \"./utils/invariants\";\r\n\r\n/**\r\n * Higher order function that recieves Platform specific implementation of Input\r\n * @param  {Function} Input Input class\r\n * @return {Function}       Wrapped class\r\n */\r\nexport default (LabelWrapper, Input, DatePicker, Checkbox) => {\r\n\tinvariants.validComponent(LabelWrapper, \"LabelWrapper\");\r\n\tinvariants.validComponent(Input, \"Input\");\r\n\tinvariants.validComponent(DatePicker, \"DatePicker\");\r\n\tinvariants.validComponent(Checkbox, \"Checkbox\");\r\n\r\n\tconst mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n\t\tif (ownProps.asyncValidators && ownProps.asyncValidators.length) {\r\n\t\t\treturn {\r\n\t\t\t\tvalid:\r\n\t\t\t\t\tstate.dynamo[\r\n\t\t\t\t\t\townProps.asyncValidators[0] + ownProps.component_uid\r\n\t\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn {};\r\n\t};\r\n\tconst mapDispatchToProps = dispatch => {\r\n\t\treturn {\r\n\t\t\trunAsyncValidator: (id, params, key) =>\r\n\t\t\t\tdispatch(runDynamoProcessor(id, params, key))\r\n\t\t};\r\n\t};\r\n\tclass DynamoInput extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.valueChanged = this.valueChanged.bind(this);\r\n\t\t\tthis.state = {\r\n\t\t\t\tvalue:\r\n\t\t\t\t\tthis.props.value ||\r\n\t\t\t\t\t(this.props.args && this.props.args.default)\r\n\t\t\t};\r\n\t\t\tthis.runValidators = this.runValidators.bind(this);\r\n\t\t\tthis.hasValue = this.hasValue.bind(this);\r\n\t\t\tthis.isLessThanMaxLength = this.isLessThanMaxLength.bind(this);\r\n\t\t\tthis.isGreaterThanMinLength = this.isGreaterThanMinLength.bind(\r\n\t\t\t\tthis\r\n\t\t\t);\r\n\t\t\tthis.matchesRegex = this.matchesRegex.bind(this);\r\n\t\t\tthis.runAsyncValidators = this.runAsyncValidators.bind(this);\r\n\t\t\tthis.props.validator.validate = () => {\r\n\t\t\t\treturn this.runValidators();\r\n\t\t\t};\r\n\t\t}\r\n\t\tcomponentWillReceiveProps(next) {\r\n\t\t\tif (next.component_uid !== this.props.component_uid) {\r\n\t\t\t\t//\t\tsetTimeout(() => {\r\n\t\t\t\tthis.valueChanged(this.props.value);\r\n\t\t\t\t//}, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t\trunValidators() {\r\n\t\t\treturn new ValidationHelper(this).run();\r\n\t\t}\r\n\t\trunAsyncValidators(value) {\r\n\t\t\tthis.props.runAsyncValidator(\r\n\t\t\t\tthis.props.asyncValidators[0],\r\n\t\t\t\tvalue,\r\n\t\t\t\tthis.props.asyncValidators[0] + this.props.component_uid\r\n\t\t\t);\r\n\t\t}\r\n\t\thasValue() {\r\n\t\t\treturn !!this.state.value || \"is required\";\r\n\t\t}\r\n\t\tisRequired() {\r\n\t\t\treturn (\r\n\t\t\t\tthis.props.validators &&\r\n\t\t\t\tthis.props.validators.filter(\r\n\t\t\t\t\tx => x.validatorType == VALIDATOR_TYPES.REQUIRED\r\n\t\t\t\t).length > 0\r\n\t\t\t);\r\n\t\t}\r\n\t\tisLessThanMaxLength(element) {\r\n\t\t\treturn (\r\n\t\t\t\t(this.state.value &&\r\n\t\t\t\t\tthis.state.value.length <= element.args.max) ||\r\n\t\t\t\telement.error ||\r\n\t\t\t\t\"The maximum number of letters/numbers is \" + element.args.max\r\n\t\t\t);\r\n\t\t}\r\n\t\tisGreaterThanMinLength(element) {\r\n\t\t\treturn (\r\n\t\t\t\t(this.state.value &&\r\n\t\t\t\t\tthis.state.value.length >= element.args.min) ||\r\n\t\t\t\telement.error ||\r\n\t\t\t\t\"The minimum number of letters/numbers is\" + element.args.min\r\n\t\t\t);\r\n\t\t}\r\n\t\tmatchesRegex(element) {\r\n\t\t\treturn (\r\n\t\t\t\tnew RegExp(element.args.exp).test(this.state.value) ||\r\n\t\t\t\telement.error ||\r\n\t\t\t\t\"Invalid entry\"\r\n\t\t\t);\r\n\t\t}\r\n\t\tvalueChanged(value) {\r\n\t\t\tthis.props.valueChanged({ [this.props.name]: value });\r\n\t\t\tif (this.props.asyncValidators && this.props.asyncValidators.length)\r\n\t\t\t\tthis.runAsyncValidators(value);\r\n\r\n\t\t\tthis.setState({ value: value, errors: [] });\r\n\t\t}\r\n\t\trender() {\r\n\t\t\t/*jshint ignore:start */\r\n\t\t\tlet args = this.props.args,\r\n\t\t\t\tResult;\r\n\t\t\tconst { type, valueChanged, ...passThrough } = this.props;\r\n\t\t\tif (\r\n\t\t\t\t!args ||\r\n\t\t\t\t!args.type ||\r\n\t\t\t\targs.type == \"text\" ||\r\n\t\t\t\targs.type == \"number\" ||\r\n\t\t\t\targs.type == \"password\"\r\n\t\t\t) {\r\n\t\t\t\tResult = Input;\r\n\t\t\t\targs = args || { type: \"text\" };\r\n\t\t\t}\r\n\t\t\tif (args.type == \"checkbox\") Result = Checkbox;\r\n\r\n\t\t\tif (args.type == \"date\") Result = DatePicker;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<LabelWrapper\r\n\t\t\t\t\tvalue={this.props.label}\r\n\t\t\t\t\tinner={\r\n\t\t\t\t\t\t<Result\r\n\t\t\t\t\t\t\ttype={args.type}\r\n\t\t\t\t\t\t\t{...passThrough}\r\n\t\t\t\t\t\t\trequired={this.isRequired()}\r\n\t\t\t\t\t\t\tvalue={this.state.value}\r\n\t\t\t\t\t\t\terrors={this.state.errors}\r\n\t\t\t\t\t\t\tvalueChanged={this.valueChanged}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t\t/*jshint ignore:end */\r\n\t\t}\r\n\t}\r\n\tDynamoInput.propTypes = {\r\n\t\tvalueChanged: React.PropTypes.func\r\n\t};\r\n\treturn DynamoInput;\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport invariants from \"./utils/invariants\";\r\nexport default (Page, Container) => {\r\n\tinvariants.validComponent(Page, \"Page\");\r\n\tinvariants.validComponent(Container, \"Container\");\r\n\t//map elements in DynamoView props to elements in store.\r\n\tconst mapStateToProps = (_, initialProps) => state => {\r\n\t\t//console.log(\"mapping state to props\");\r\n\t\tlet description = state.dynamo.description,\r\n\t\t\tmap = { value: state.dynamo.value };\r\n\t\tif (description) {\r\n\t\t\tlet step = state.dynamo.currentStep || 0;\r\n\t\t\tmap.elements = description.steps[step].form.elements;\r\n\t\t\tif (description.steps[step].mode == \"VIEW\") map.hideSubmit = true;\r\n\t\t\tmap.title=description.title;\r\n\t\t}\r\n\t\treturn map;\r\n\t};\r\n\r\n\tclass DynamoView extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.onValueChanged = this.onValueChanged.bind(this);\r\n\t\t\tthis.submit = this.submit.bind(this);\r\n\t\t\t//pass reference to validate func\r\n\t\t\tthis.state = {\r\n\t\t\t\tform: this.props.value,\r\n\t\t\t\tvalidator: {}\r\n\t\t\t};\r\n\t\t}\r\n\t\tonValueChanged(form) {\r\n\t\t\tthis.state.form = form.dynamo_view;\r\n\t\t}\r\n\t\tsubmit() {\r\n\t\t\tthis.state.validator\r\n\t\t\t\t.validate()\r\n\t\t\t\t.then(\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\tthis.props.submit(this.state.form);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\tconsole.warn(\"the form is invalid\");\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t\t.catch(er => {\r\n\t\t\t\t\tconsole.log(\"an error occurred while validating form \");\r\n\t\t\t\t\tconsole.error(er);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\trender() {\r\n\t\t\t/*jshint ignore:start*/\r\n\t\t\treturn (\r\n\t\t\t\t<Page submit={this.submit} hideSubmit={this.props.hideSubmit}>\r\n\t\t\t\t\t<Container\r\n\t\t\t\t\t    label={this.props.title}\r\n\t\t\t\t\t\telements={this.props.elements}\r\n\t\t\t\t\t\tname=\"dynamo_view\"\r\n\t\t\t\t\t\tvalue={this.props.value}\r\n\t\t\t\t\t\tvalueChanged={this.onValueChanged}\r\n\t\t\t\t\t\tvalidator={this.state.validator}\r\n\t\t\t\t\t\tnavigation={this.props.navigation}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Page>\r\n\t\t\t);\r\n\t\t\t/*jshint ignore:end*/\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(mapStateToProps)(DynamoView);\r\n};\r\n","import React, { Component } from \"react\";\r\nimport invariants from \"./utils/invariants\";\r\n\r\nexport default (Section, Header, ComponentLocator) => {\r\n\t//invariants\r\n\r\n\tif (\r\n\t\tinvariants.validComponent(Section, \"Section\") &&\r\n\t\tinvariants.validComponent(Header, \"Header\") &&\r\n\t\t!ComponentLocator\r\n\t)\r\n\t\tthrow new Error(\"ComponentLocator cannot be null (dynamo_container)\");\r\n\r\n\treturn class extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.onValueChanged = this.onValueChanged.bind(this);\r\n\t\t\tthis.state = { form: this.props.value };\r\n\t\t\tthis._validations=[];\r\n\t\t\tthis.setValidator = this.setValidator.bind(this);\r\n\t\t\tthis.setValidator();\r\n\t\t}\r\n\t\tsetValidator() {\r\n\t\t\tthis.props.validator.validate = () => {\r\n\t\t\t\treturn Promise.all(\r\n\t\t\t\t\tthis._validations.map(x => {\r\n\t\t\t\t\t\tif (x.validate) return x.validate();\r\n\r\n\t\t\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t};\r\n\t\t}\r\n\t\tonValueChanged() {\r\n\t\t\tthis.state.form = Object.assign(\r\n\t\t\t\t{},\r\n\t\t\t\tthis.state.form || {},\r\n\t\t\t\t...Array.prototype.slice.call(arguments)\r\n\t\t\t);\r\n\t\t\tthis.props.valueChanged({ [this.props.name]: this.state.form });\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tthis._validations.length = 0;\r\n\t\t\tlet keys = this.props.value ? Object.keys(this.props.value) : [],\r\n\t\t\t\tself = this,\r\n\t\t\t\textraVal = {},\r\n\t\t\t\tindex = -1,\r\n\t\t\t\tnotifyExtra = [],\r\n\t\t\t\telements = (this.props.elements||[]).sort((x, y) => {\r\n\t\t\t\t\treturn x.order - y.order;\r\n\t\t\t\t}).map(x => {\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t\tlet DynamoComponent = ComponentLocator(x),\r\n\t\t\t\t\t\tsource = self.props.value,\r\n\t\t\t\t\t\tvalidator = {},\r\n\t\t\t\t\t\tvalue = source ? this.props.value[x.name] : null;\r\n\t\t\t\t\tthis._validations.push(validator);\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tsource &&\r\n\t\t\t\t\t\tself.props.value[x.name] &&\r\n\t\t\t\t\t\tkeys.indexOf(x.name) !== -1\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\tkeys.splice(keys.indexOf(x.name), 1);\r\n\t\t\t\t\t/*jshint ignore:start*/\r\n\t\t\t\t\tif (!DynamoComponent)\r\n\t\t\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t\t\"Unknown component:\" + JSON.stringify(x, null, \" \")\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\tif (DynamoComponent.notifyExtra) {\r\n\t\t\t\t\t\tnotifyExtra.push(index);\r\n\t\t\t\t\t\treturn extra =>\r\n\t\t\t\t\t\t\t<DynamoComponent\r\n\t\t\t\t\t\t\t\t{...x}\r\n\t\t\t\t\t\t\t\textra={extra}\r\n\t\t\t\t\t\t\t\tkey={x.name}\r\n\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\tvalidator={validator}\r\n\t\t\t\t\t\t\t\tvalueChanged={this.onValueChanged}\r\n\t\t\t\t\t\t\t\tnavigation={this.props.navigation}\r\n\t\t\t\t\t\t\t/>;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<DynamoComponent\r\n\t\t\t\t\t\t\t{...x}\r\n\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\tvalidator={validator}\r\n\t\t\t\t\t\t\tkey={x.name}\r\n\t\t\t\t\t\t\tvalueChanged={this.onValueChanged}\r\n\t\t\t\t\t\t\tnavigation={this.props.navigation}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t\t/*jshint ignore:end*/\r\n\t\t\t\t});\r\n\r\n\t\t\tif (keys.length || notifyExtra.length) {\r\n\t\t\t\tif (!notifyExtra.length){\r\n\t\t\t\t\t// console.warn(\r\n\t\t\t\t\t// \t\"there are extra properties that no component cares about \" +\r\n\t\t\t\t\t// \t\tJSON.stringify(keys, null, \" \")\r\n\t\t\t\t\t// );\r\n\t\t\t\t\t// console.warn('shouldnt happen too often');\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\tkeys.forEach(x => {\r\n\t\t\t\t\textraVal[x] = self.props.value[x];\r\n\t\t\t\t});\r\n\r\n\t\t\t\tnotifyExtra.forEach(x => {\r\n\t\t\t\t\telements[x] = elements[x](Object.assign({}, extraVal));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/*jshint ignore:start*/\r\n\t\t\treturn (\r\n\t\t\t\t<Section>\r\n\t\t\t\t\t<Header text={this.props.label} />\r\n\t\t\t\t\t{elements}\r\n\t\t\t\t</Section>\r\n\t\t\t);\r\n\t\t\t/*jshint ignore:end*/\r\n\t\t}\r\n\t};\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchDynamoProcess, runDynamoProcess } from \"./actions\";\r\nimport _ from \"lodash\";\r\nimport invariants from \"./utils/invariants\";\r\n\r\n/**\r\n * Higher order function that recieves Platform specific implementation of Input\r\n * @param  {Function} Input Input class\r\n * @return {Function}       Wrapped class\r\n */\r\nexport default (ProgressBar, TextView, DynamoView) => {\r\n\tinvariants.validComponent(ProgressBar, \"ProgressBar\");\r\n\tinvariants.validComponent(TextView, \"TextView\");\r\n\tinvariants.validComponent(DynamoView, \"DynamoView\");\r\n\r\n\t//map elements in DynamoInput props to elements in store.\r\n\tconst mapStateToProps = (_, initialProps) => state => {\r\n\t\treturn {\r\n\t\t\tbusy: state.dynamo.busy,\r\n\t\t\tdescription: state.dynamo.description,\r\n\t\t\tinstanceId: state.dynamo.instanceId,\r\n\t\t\tmessage: state.dynamo.message,\r\n\t\t\tcompleted: state.dynamo.completed\r\n\t\t};\r\n\t};\r\n\r\n\tconst mapDispatchToProps = dispatch => {\r\n\t\treturn {\r\n\t\t\tfetch: (id, params) => {\r\n\t\t\t\tdispatch(fetchDynamoProcess(id, params));\r\n\t\t\t},\r\n\t\t\trunProcess: info => {\r\n\t\t\t\tdispatch(runDynamoProcess(info));\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tclass DynamoProcess extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.submit = this.submit.bind(this);\r\n\t\t}\r\n\t\tcomponentDidMount() {\r\n\t\t\tif (\r\n\t\t\t\t!this.props.description ||\r\n\t\t\t\tthis.props.id !== this.props.description._id\r\n\t\t\t) {\r\n\t\t\t\tthis.props.fetch(this.props.id, this.props.fetchParams);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcomponentWillReceiveProps(next) {\r\n\t\t\tif (next.completed && next.completed != this.props.completed)\r\n\t\t\t\treturn this.props.navigation.goBack();\r\n\r\n\t\t\tif (\r\n\t\t\t\t(next.id !== this.props.id ||\r\n\t\t\t\t\t!_.isEqual(next.fetchParams, this.props.fetchParams)) &&\r\n\t\t\t\t!this.props.busy\r\n\t\t\t)\r\n\t\t\t\tthis.props.fetch(next.id, next.fetchParams);\r\n\t\t}\r\n\t\tsubmit(form) {\r\n\t\t\tthis.props.runProcess({\r\n\t\t\t\tid: this.props.id,\r\n\t\t\t\tform,\r\n\t\t\t\tinstanceId: this.props.instanceId\r\n\t\t\t});\r\n\t\t}\r\n\t\trender() {\r\n\t\t\t/*jshint ignore:start */\r\n\t\t\tif (this.props.busy || typeof this.props.busy == \"undefined\") {\r\n\t\t\t\treturn <ProgressBar title=\"Please wait...\" />;\r\n\t\t\t}\r\n\t\t\tif (!this.props.description) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<TextView text=\"Sorry we couldnt load that process...please wait a few minutes and retry.\" />\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<DynamoView\r\n\t\t\t\t\tnavigation={this.props.navigation}\r\n\t\t\t\t\tsubmit={this.submit}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t\t/*jshint ignore:end */\r\n\t\t}\r\n\t}\r\n\t// DynamoProcess.propTypes = {\r\n\t// \tid: React.PropTypes.string.isRequired,\r\n\t// \tfetchParams: React.PropTypes.object,\r\n\t// \tdescription: React.PropTypes.object\r\n\t// };\r\n\treturn connect(mapStateToProps, mapDispatchToProps)(DynamoProcess);\r\n};\r\n","import React, { Component } from \"react\";\r\nimport invariants from \"./utils/invariants\";\r\n\r\nexport default (Layout, Header, Container) => {\r\n\tinvariants.validComponent(Layout, \"Layout\");\r\n\tinvariants.validComponent(Header, \"Header\");\r\n\tinvariants.validComponent(Container, \"Container\");\r\n\tclass DynamoSection extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t}\r\n\t\trender() {\r\n\t\t\t/*jshint ignore:start*/\r\n\t\t\t//get the container for retrieving\r\n\t\t\treturn (\r\n\t\t\t\t<Layout>\r\n\t\t\t\t\t<Header>\r\n\t\t\t\t\t\t{this.props.label}\r\n\t\t\t\t\t</Header>\r\n\t\t\t\t\t<Container\r\n\t\t\t\t\t\telements={this.props.args.elements}\r\n\t\t\t\t\t\tname={this.props.name}\r\n\t\t\t\t\t\tvalue={this.props.value}\r\n\t\t\t\t\t\tvalueChanged={this.props.valueChanged}\r\n\t\t\t\t\t\tvalidator={this.props.validator}\r\n\t\t\t\t\t\tnavigation={this.props.navigation}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Layout>\r\n\t\t\t);\r\n\t\t\t/*jshint ignore:end*/\r\n\t\t}\r\n\t}\r\n\r\n\treturn DynamoSection;\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { runDynamoProcessor } from \"./actions\";\r\nimport ValidationHelper, { VALIDATOR_TYPES } from \"./utils/validator\";\r\nimport invariants from \"./utils/invariants\";\r\nexport default (ProgressIndicator, Layout, Container) => {\r\n\tif (\r\n\t\tinvariants.validComponent(ProgressIndicator, \"ProgressIndicator\") &&\r\n\t\tinvariants.validComponent(Layout, \"Layout\") &&\r\n\t\t!Container\r\n\t)\r\n\t\tthrow new Error(\"Container cannot be null (dynamo_select)\");\r\n\r\n\t//map elements in DynamoView props to elements in store.\r\n\tconst mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n\t\tif (ownProps.args.type == \"PROCESSOR\") {\r\n\t\t\tlet st = state.dynamo[ownProps.component_uid];\r\n\t\t\treturn {\r\n\t\t\t\titems: st,\r\n\t\t\t\tbusy: !!state.dynamo[`${ownProps.component_uid}-busy`]\r\n\t\t\t};\r\n\t\t}\r\n\t\t//evaluate stuff in the parent container to retrieve the\r\n\t};\r\n\r\n\tconst mapDispatchToProps = dispatch => {\r\n\t\treturn {\r\n\t\t\tfetch: (id, params, key) => {\r\n\t\t\t\tdispatch(runDynamoProcessor(id, params, key));\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tclass DynamoSelect extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\r\n\t\t\tthis.fetchItems = this.fetchItems.bind(this);\r\n\t\t\tthis.onValueChanged = this.onValueChanged.bind(this);\r\n\t\t\tthis.selectFirstItem = this.selectFirstItem.bind(this);\r\n\t\t\tthis.props.validator.validate = () => {\r\n\t\t\t\treturn this.runValidators();\r\n\t\t\t};\r\n\t\t\tthis.isValidValue = this.isValidValue.bind(this);\r\n\t\t\tthis.state = {\r\n\t\t\t\tvalue:\r\n\t\t\t\t\tprops.value && typeof props.value == \"object\"\r\n\t\t\t\t\t\t? props.value.$objectID\r\n\t\t\t\t\t\t: props.value\r\n\t\t\t};\r\n\t\t\tthis.isObjectIdMode = this.isObjectIdMode.bind(this);\r\n\t\t}\r\n\t\thasValue() {\r\n\t\t\treturn !!this.state.value || \"is required\";\r\n\t\t}\r\n\t\trunValidators() {\r\n\t\t\treturn new ValidationHelper(this).run();\r\n\t\t}\r\n\t\tonValueChanged(value) {\r\n\t\t\tif (this._mounted) {\r\n\t\t\t\tlet obid = this.isObjectIdMode(),\r\n\t\t\t\t\tupdateValue =\r\n\t\t\t\t\t\t(obid &&\r\n\t\t\t\t\t\t\tvalue &&\r\n\t\t\t\t\t\t\ttypeof value == \"object\" &&\r\n\t\t\t\t\t\t\tvalue.$objectID) ||\r\n\t\t\t\t\t\tvalue;\r\n\t\t\t\tthis.props.valueChanged({\r\n\t\t\t\t\t[this.props.name]:\r\n\t\t\t\t\t\t(obid &&\r\n\t\t\t\t\t\ttypeof value !== \"object\" && {\r\n\t\t\t\t\t\t\t$objectID: value\r\n\t\t\t\t\t\t}) ||\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t});\r\n\t\t\t\tif (this.state.value !== updateValue) {\r\n\t\t\t\t\tconsole.log(\"onValueChanged value:\" + updateValue);\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tvalue: updateValue\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchItems(source, args, component_uid) {\r\n\t\t\tif (this._mounted)\r\n\t\t\t\tthis.props.fetch(\r\n\t\t\t\t\tsource,\r\n\t\t\t\t\tJSON.parse(\r\n\t\t\t\t\t\targs || this.props.args.config.customArgs || \"{}\"\r\n\t\t\t\t\t),\r\n\t\t\t\t\tcomponent_uid || this.props.component_uid || \"\"\r\n\t\t\t\t);\r\n\t\t}\r\n\t\tisValidValue(items = this.props.items, value = this.props.value) {\r\n\t\t\treturn (\r\n\t\t\t\titems &&\r\n\t\t\t\titems.length &&\r\n\t\t\t\titems.filter(x => x._id == value).length\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tcomponentWillReceiveProps(next) {\r\n\t\t\tif (\r\n\t\t\t\tnext.args.config.value !== this.props.args.config.value ||\r\n\t\t\t\t(next.args.config.customArgs !==\r\n\t\t\t\t\tthis.props.args.config.customArgs &&\r\n\t\t\t\t\t!this.props.busy) ||\r\n\t\t\t\tnext.component_uid !== this.props.component_uid ||\r\n\t\t\t\t(next.args.config.value &&\r\n\t\t\t\t\ttypeof next.items == \"undefined\" &&\r\n\t\t\t\t\t!next.busy)\r\n\t\t\t) {\r\n\t\t\t\treturn this.fetchItems(\r\n\t\t\t\t\tnext.args.config.value,\r\n\t\t\t\t\tnext.args.config.customArgs,\r\n\t\t\t\t\tnext.component_uid\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif (next.items && next.items.length == 1) {\r\n\t\t\t\treturn this.selectFirstItem(next.items[0]._id);\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\t(next.items &&\r\n\t\t\t\t\tnext.value &&\r\n\t\t\t\t\t!this.isValidValue(next.items, next.value)) ||\r\n\t\t\t\t!next.items\r\n\t\t\t) {\r\n\t\t\t\treturn this.onValueChanged(null);\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\t(next.items &&\r\n\t\t\t\t\tnext.value &&\r\n\t\t\t\t\tthis.isValidValue(next.items, next.value)) ||\r\n\t\t\t\t(this.props.items &&\r\n\t\t\t\t\tthis.isValidValue(this.props.items, next.value))\r\n\t\t\t) {\r\n\t\t\t\treturn this.onValueChanged(next.value);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tselectFirstItem(item) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.onValueChanged(item);\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t\tcomponentWillUnmount() {\r\n\t\t\tthis._mounted = false;\r\n\t\t}\r\n\t\tisObjectIdMode() {\r\n\t\t\treturn this.props.args && this.props.args.mode === \"ObjectId\";\r\n\t\t}\r\n\t\tcomponentDidMount() {\r\n\t\t\tthis._mounted = true;\r\n\t\t\tif (!this.props.items) {\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\t\"fetching items in componentDidMount for current:\" +\r\n\t\t\t\t\t\tthis.props.name\r\n\t\t\t\t);\r\n\t\t\t\tthis.fetchItems(this.props.args.config.value);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.props.items && this.props.items.length == 1) {\r\n\t\t\t\treturn this.selectFirstItem(this.props.items[0]._id);\r\n\t\t\t}\r\n\t\t\tif (this.isObjectIdMode() && this.props.value)\r\n\t\t\t\treturn setTimeout(() => {\r\n\t\t\t\t\tthis.onValueChanged(this.props.value);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\tisEmptyOrNull(v) {\r\n\t\t\treturn !v || !v.length;\r\n\t\t}\r\n\t\trender() {\r\n\t\t\t/*jshint ignore:start*/\r\n\r\n\t\t\tif (this.isEmptyOrNull(this.props.items)) {\r\n\t\t\t\t//console.log(\"items is null or undefined\");\r\n\t\t\t\t//console.log(this.props);\r\n\t\t\t\treturn <ProgressIndicator />;\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<Layout\r\n\t\t\t\t\tvalue={this.props.label}\r\n\t\t\t\t\tinner={\r\n\t\t\t\t\t\t<Container\r\n\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t!!this.props.args.disabled ||\r\n\t\t\t\t\t\t\t\t(this.props.items &&\r\n\t\t\t\t\t\t\t\t\tthis.props.items.length == 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\terrors={this.state.errors}\r\n\t\t\t\t\t\t\tlabel={this.props.label}\r\n\t\t\t\t\t\t\titems={this.props.items}\r\n\t\t\t\t\t\t\tdisplayProperty=\"displayLabel\"\r\n\t\t\t\t\t\t\tkeyProperty=\"_id\"\r\n\t\t\t\t\t\t\tvalue={this.state.value}\r\n\t\t\t\t\t\t\tvalueChanged={this.onValueChanged}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t\t/*jshint ignore:end*/\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(mapStateToProps, mapDispatchToProps)(DynamoSelect);\r\n};\r\n","import React, { Component } from \"react\";\r\nimport invariants from \"./utils/invariants\";\r\nimport { connect } from \"react-redux\";\r\nimport { runDynamoProcessor } from \"./actions\";\r\nimport ValidationHelper, { VALIDATOR_TYPES } from \"./utils/validator\";\r\nexport default (Layout, Picker, ProgressBar, Container) => {\r\n\t//map elements in DynamoView props to elements in store.\r\n\tinvariants.validComponent(Layout, \"Layout\");\r\n\tinvariants.validComponent(Picker, \"Picker\");\r\n\tinvariants.validComponent(Container, \"Container\");\r\n\r\n\tconst mapDispatchToProps = dispatch => {\r\n\t\treturn {\r\n\t\t\tgetItems: (id, args, key) =>\r\n\t\t\t\tdispatch(runDynamoProcessor(id, args, key, { returnsUI: true }))\r\n\t\t};\r\n\t};\r\n\tconst mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n\t\treturn {\r\n\t\t\tbusy: state.dynamo[`${ownProps.component_uid}-busy`],\r\n\t\t\titems: state.dynamo[ownProps.component_uid] || ownProps.args.items\r\n\t\t};\r\n\t};\r\n\r\n\tclass DynamoSelectSet extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.onPickerValueChanged = this.onPickerValueChanged.bind(this);\r\n\t\t\tthis.onContainerValueChanged = this.onContainerValueChanged.bind(\r\n\t\t\t\tthis\r\n\t\t\t);\r\n\t\t\tthis.getPickerValue = this.getPickerValue.bind(this);\r\n\t\t\tthis.getPickerItemsById = this.getPickerItemsById.bind(this);\r\n\t\t\tlet value =\r\n\t\t\t\tprops.value && typeof props.value == \"object\"\r\n\t\t\t\t\t? props.value.$objectID\r\n\t\t\t\t\t: props.value;\r\n\t\t\tthis.state = {\r\n\t\t\t\tpickerValue: value,\r\n\t\t\t\titems: this.getPickerItemsById(value),\r\n\t\t\t\tcontainerValidator: {}\r\n\t\t\t};\r\n\t\t\tthis.selectFirstItem = this.selectFirstItem.bind(this);\r\n\t\t\tthis.respondToPickerValueChanged = this.respondToPickerValueChanged.bind(\r\n\t\t\t\tthis\r\n\t\t\t);\r\n\t\t\tthis.oneOption = this.oneOption.bind(this);\r\n\t\t\tthis.props.validator.validate = () => {\r\n\t\t\t\treturn this.runValidators();\r\n\t\t\t};\r\n\t\t\tthis.getValueBasedOnMode = this.getValueBasedOnMode.bind(this);\r\n\t\t\tthis.isObjectIdMode = this.isObjectIdMode.bind(this);\r\n\t\t}\r\n\t\thasValue() {\r\n\t\t\treturn !!this.state.pickerValue || \"is required\";\r\n\t\t}\r\n\t\trunValidators() {\r\n\t\t\treturn Promise.all([\r\n\t\t\t\tnew ValidationHelper(this).run(),\r\n\t\t\t\tthis.state.containerValidator.validate()\r\n\t\t\t]);\r\n\t\t}\r\n\r\n\t\tcomponentWillReceiveProps(next) {\r\n\t\t\tif (\r\n\t\t\t\t(next.value && next.value !== this.state.pickerValue) ||\r\n\t\t\t\t(next.items &&\r\n\t\t\t\t\tnext.items.length &&\r\n\t\t\t\t\t(!this.props.items || !this.props.items.length)) ||\r\n\t\t\t\tnext.component_uid !== this.props.component_uid\r\n\t\t\t) {\r\n\t\t\t\tthis.respondToPickerValueChanged(next.value, next.items);\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tnext.args.processor !== this.props.args.processor ||\r\n\t\t\t\t(next.component_uid !== this.props.component_uid &&\r\n\t\t\t\t\tnext.args.processor)\r\n\t\t\t)\r\n\t\t\t\tthis.fetchItems(\r\n\t\t\t\t\tnext.args.processor,\r\n\t\t\t\t\tnext.args.processorArgs,\r\n\t\t\t\t\tnext.component_uid\r\n\t\t\t\t);\r\n\r\n\t\t\tif (next.items && next.items.length == 1) {\r\n\t\t\t\tthis.selectFirstItem(next.items);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchItems(source, args, component_uid) {\r\n\t\t\tlet _args = this._onContainerValueChanged.call(\r\n\t\t\t\tthis,\r\n\t\t\t\tthis._currentValue\r\n\t\t\t);\r\n\t\t\t_args.shift();\r\n\t\t\tthis.props.getItems(\r\n\t\t\t\tsource,\r\n\t\t\t\tObject.assign(\r\n\t\t\t\t\tJSON.parse(args || this.props.args.processorArgs || \"{}\"),\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t_args\r\n\t\t\t\t\t}\r\n\t\t\t\t),\r\n\t\t\t\tcomponent_uid || this.props.component_uid\r\n\t\t\t);\r\n\t\t}\r\n\t\tcomponentWillUnmount() {\r\n\t\t\tthis._mounted = false;\r\n\t\t}\r\n\t\tcomponentDidMount() {\r\n\t\t\tthis._mounted = true;\r\n\t\t\tif (this.props.args.processor) {\r\n\t\t\t\tthis.fetchItems(this.props.args.processor);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.props.items && this.props.items.length == 1) {\r\n\t\t\t\treturn setTimeout(() => {\r\n\t\t\t\t\tthis.selectFirstItem();\r\n\t\t\t\t}, 0);\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tthis.isObjectIdMode() &&\r\n\t\t\t\tthis.props.value &&\r\n\t\t\t\ttypeof this.props.value !== \"object\"\r\n\t\t\t) {\r\n\t\t\t\treturn setTimeout(() => {\r\n\t\t\t\t\tthis.props.valueChanged({\r\n\t\t\t\t\t\t[this.props.name]: this.getValueBasedOnMode(\r\n\t\t\t\t\t\t\tthis.props.value\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tisObjectIdMode() {\r\n\t\t\treturn this.props.args && this.props.args.mode === \"ObjectId\";\r\n\t\t}\r\n\t\toneOption() {\r\n\t\t\treturn this.props.items && this.props.items.length == 1;\r\n\t\t}\r\n\t\tselectFirstItem(items = this.props.items) {\r\n\t\t\tthis.onPickerValueChanged(items[0].id, items);\r\n\t\t}\r\n\t\tgetPickerValue(value = this.state.pickerValue) {\r\n\t\t\treturn {\r\n\t\t\t\t[this.props.name]: this.getValueBasedOnMode(value)\r\n\t\t\t};\r\n\t\t}\r\n\t\tgetPickerItemsById(v, items = this.props.items) {\r\n\t\t\tif (v && items && items.length) {\r\n\t\t\t\tlet r = items.filter(x => x.id == v);\r\n\t\t\t\treturn (r.length && r[0].elements) || [];\r\n\t\t\t}\r\n\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tonContainerValueChanged(value, pickerValue) {\r\n\t\t\tthis.props.valueChanged.apply(\r\n\t\t\t\tthis,\r\n\t\t\t\tthis._onContainerValueChanged.call(this, value, pickerValue)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t_onContainerValueChanged(value, pickerValue) {\r\n\t\t\tlet superCancel =\r\n\t\t\t\tthis._currentValue &&\r\n\t\t\t\tObject.keys(this._currentValue).reduce((sum, x) => {\r\n\t\t\t\t\treturn (sum[x] = undefined), sum;\r\n\t\t\t\t}, {});\r\n\t\t\tthis._currentValue = value;\r\n\t\t\tpickerValue = pickerValue || this.getPickerValue();\r\n\t\t\tif (this.props.args.path) {\r\n\t\t\t\tlet _p = [pickerValue];\r\n\t\t\t\tif (superCancel) _p.push(superCancel);\r\n\t\t\t\tif (value) _p.push(value);\r\n\t\t\t\treturn _p;\r\n\t\t\t}\r\n\t\t\t//path is not defined so unpack the properties and send.\r\n\t\t\tlet result = [\r\n\t\t\t\tpickerValue,\r\n\t\t\t\t...Object.keys((value && value._no_path) || {}).map(x => {\r\n\t\t\t\t\treturn { [x]: value._no_path[x] };\r\n\t\t\t\t})\r\n\t\t\t];\r\n\r\n\t\t\tif (superCancel) {\r\n\t\t\t\tresult.splice(1, 0, superCancel);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tgetValueBasedOnMode(v) {\r\n\t\t\treturn (\r\n\t\t\t\t(this.props.args &&\r\n\t\t\t\tthis.props.args.mode &&\r\n\t\t\t\ttypeof v !== \"object\" &&\r\n\t\t\t\tthis.props.args.mode == \"ObjectId\" && { $objectID: v }) ||\r\n\t\t\t\tv\r\n\t\t\t);\r\n\t\t}\r\n\t\trespondToPickerValueChanged(v, items = this.props.items) {\r\n\t\t\tlet _items = this.getPickerItemsById(v, items),\r\n\t\t\t\tpickerValue = null;\r\n\t\t\tif (items && items.length && items.filter(x => x.id == v).length) {\r\n\t\t\t\t//set the picker value.\r\n\t\t\t\tthis.onContainerValueChanged(null, this.getPickerValue(v));\r\n\t\t\t\tpickerValue = v;\r\n\t\t\t}\r\n\t\t\tif (this._mounted) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpickerValue,\r\n\t\t\t\t\titems: _items\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tonPickerValueChanged(v, items = this.props.items) {\r\n\t\t\tthis.respondToPickerValueChanged(\r\n\t\t\t\tv,\r\n\t\t\t\t(Array.prototype.isPrototypeOf(items) && items) || undefined\r\n\t\t\t);\r\n\t\t}\r\n\t\tisEmptyOrNull(v) {\r\n\t\t\treturn !v || !v.length;\r\n\t\t}\r\n\t\tstatic noPath() {\r\n\t\t\treturn \"_no_path\";\r\n\t\t}\r\n\t\trender() {\r\n\t\t\t/*jshint ignore:start*/\r\n\t\t\tif (this.props.busy) {\r\n\t\t\t\treturn <ProgressBar />;\r\n\t\t\t}\r\n\r\n\t\t\tlet initialElementsData = this.props.args.path\r\n\t\t\t\t? this.props.extra ? this.props.extra[this.props.args.path] : {}\r\n\t\t\t\t: this.props.extra;\r\n\t\t\treturn (\r\n\t\t\t\t<Layout\r\n\t\t\t\t\tvalue={this.props.label}\r\n\t\t\t\t\tinner={\r\n\t\t\t\t\t\t<Picker\r\n\t\t\t\t\t\t\tlabel={this.props.label}\r\n\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t!!this.props.args.disabled || this.oneOption()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\titems={this.props.items}\r\n\t\t\t\t\t\t\terrors={this.state.errors}\r\n\t\t\t\t\t\t\tdisplayProperty=\"displayLabel\"\r\n\t\t\t\t\t\t\tkeyProperty=\"id\"\r\n\t\t\t\t\t\t\tvalue={this.state.pickerValue}\r\n\t\t\t\t\t\t\tvalueChanged={this.onPickerValueChanged}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t\textraElements={\r\n\t\t\t\t\t\t<Container\r\n\t\t\t\t\t\t\tname={\r\n\t\t\t\t\t\t\t\tthis.props.args.path || DynamoSelectSet.noPath()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvalue={initialElementsData}\r\n\t\t\t\t\t\t\tvalueChanged={this.onContainerValueChanged}\r\n\t\t\t\t\t\t\telements={this.state.items}\r\n\t\t\t\t\t\t\tvalidator={this.state.containerValidator}\r\n\t\t\t\t\t\t\tnavigation={this.props.navigation}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t\t/*jshint ignore:end*/\r\n\t\t}\r\n\t}\r\n\r\n\tDynamoSelectSet.notifyExtra = true;\r\n\treturn connect(mapStateToProps, mapDispatchToProps)(DynamoSelectSet);\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport ValidatorHelper from \"./utils/validator\";\r\nimport invariants from \"./utils/invariants\";\r\nimport _ from \"lodash\";\r\nimport { runDynamoProcessor, openConfirmation } from \"./actions\";\r\n\r\nexport default (\r\n\tLayout,\r\n\tButton,\r\n\tList,\r\n\tModal,\r\n\tErrorText,\r\n\tProgressBar,\r\n\tContainer\r\n) => {\r\n\tinvariants.validComponent(Layout, \"Layout\");\r\n\tinvariants.validComponent(Button, \"Button\");\r\n\tinvariants.validComponent(List, \"List\");\r\n\tinvariants.validComponent(Modal, \"Modal\");\r\n\tinvariants.validComponent(ErrorText, \"ErrorText\");\r\n\tinvariants.validComponent(Container, \"Container\");\r\n\r\n\tconst mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n\t\treturn {\r\n\t\t\tconfirmation:\r\n\t\t\t\tstate.app &&\r\n\t\t\t\tstate.app.confirmationResult &&\r\n\t\t\t\tstate.app.confirmationResult[ownProps.component_uid],\r\n\t\t\ttemplateCache: state.dynamo.templateCache,\r\n\t\t\tdataTemplate: state.dynamo[ownProps.component_uid],\r\n\t\t\tbusy: state.dynamo[`${ownProps.component_uid}-busy`]\r\n\t\t};\r\n\t};\r\n\tconst equivalent = function(arr, arr2) {\r\n\t\tif (\r\n\t\t\t(!arr && !arr2) ||\r\n\t\t\t(arr && arr.length == 0 && arr2 && arr2.length == 0)\r\n\t\t)\r\n\t\t\treturn true;\r\n\r\n\t\tif ((arr && !arr2) || (arr2 && !arr) || arr.length !== arr2.length)\r\n\t\t\treturn false;\r\n\r\n\t\treturn _.isEqualWith(arr, arr2, (objValue, otherValue) => {\r\n\t\t\tif (objValue === arr || otherValue === arr2) return;\r\n\t\t\tif (typeof otherValue == \"string\") {\r\n\t\t\t\treturn !!_.findKey(objValue, function(v) {\r\n\t\t\t\t\treturn v == otherValue;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tlet r = _.isMatch(objValue, otherValue);\r\n\t\t\treturn r;\r\n\t\t});\r\n\t};\r\n\tconst mapDispatchToProps = dispatch => {\r\n\t\treturn {\r\n\t\t\tgetListItemDataTemplate: (id, args, key) =>\r\n\t\t\t\tdispatch(runDynamoProcessor(id, args, key)),\r\n\t\t\topenConfirmation: (id, message, params) =>\r\n\t\t\t\tdispatch(openConfirmation(id, message, params))\r\n\t\t};\r\n\t};\r\n\r\n\tclass DynamoList extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.state = {\r\n\t\t\t\tvalidator: {},\r\n\t\t\t\titems:\r\n\t\t\t\t\tthis.props.value ||\r\n\t\t\t\t\t(this.props.args && this.props.args.default) ||\r\n\t\t\t\t\t[],\r\n\t\t\t\tmodalVisible: false\r\n\t\t\t};\r\n\t\t\tthis.showModal = this.showModal.bind(this);\r\n\t\t\tthis.closeModal = this.closeModal.bind(this);\r\n\t\t\tthis.valueChanged = this.valueChanged.bind(this);\r\n\t\t\tthis.getItemTemplate = this.getItemTemplate.bind(this);\r\n\t\t\tthis.edit = this.edit.bind(this);\r\n\t\t\tthis.runValidators = this.runValidators.bind(this);\r\n\t\t\tthis.isDisabled = this.isDisabled.bind(this);\r\n\t\t\tthis.getListItemDataTemplate = this.getListItemDataTemplate.bind(\r\n\t\t\t\tthis\r\n\t\t\t);\r\n\t\t\tthis.props.validator.validate = () => {\r\n\t\t\t\treturn this.runValidators();\r\n\t\t\t};\r\n\t\t\tthis.remove = this.remove.bind(this);\r\n\t\t}\r\n\r\n\t\tcomponentWillReceiveProps(next) {\r\n\t\t\tif (\r\n\t\t\t\tnext.confirmation !== this.props.confirmation &&\r\n\t\t\t\tnext.confirmation &&\r\n\t\t\t\tnext.confirmation.params &&\r\n\t\t\t\ttypeof next.confirmation.params.index !== \"undefined\" &&\r\n\t\t\t\tthis.state.items.length\r\n\t\t\t) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tthis.state.items.splice(next.confirmation.params.index, 1),\r\n\t\t\t\t\tthis.props.valueChanged({ [this.props.name]: items })\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (this.props.component_uid !== next.component_uid) {\r\n\t\t\t\t//setTimeout(() => {\r\n\t\t\t\tif (this._mounted) {\r\n\t\t\t\t\tlet items =\r\n\t\t\t\t\t\tnext.dataTemplate ||\r\n\t\t\t\t\t\tnext.value ||\r\n\t\t\t\t\t\t(next.args && next.args.default) ||\r\n\t\t\t\t\t\t[];\r\n\t\t\t\t\titems = items.slice();\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tnext.args.listItemDataTemplateProcessor &&\r\n\t\t\t\t\t\titems.length\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tthis.getListItemDataTemplate(items, next);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tform: null,\r\n\t\t\t\t\t\titemTemplate: null,\r\n\t\t\t\t\t\titems,\r\n\t\t\t\t\t\tmodalVisible: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.props.valueChanged({ [this.props.name]: items });\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t\t//}, 0);\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tnext.dataTemplate &&\r\n\t\t\t\t(!equivalent(next.dataTemplate, this.props.dataTemplate) ||\r\n\t\t\t\t\t!equivalent(next.dataTemplate, this.state.items))\r\n\t\t\t) {\r\n\t\t\t\tif (this._mounted) {\r\n\t\t\t\t\tif (Array.prototype.isPrototypeOf(next.dataTemplate))\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\titems: next.dataTemplate.slice()\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.state.items.splice(\r\n\t\t\t\t\t\t\tthis.state.items.length - 1,\r\n\t\t\t\t\t\t\t1,\r\n\t\t\t\t\t\t\tnext.dataTemplate\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcomponentWillUnmount() {\r\n\t\t\tthis._mounted = false;\r\n\t\t}\r\n\t\tcomponentDidMount() {\r\n\t\t\tthis._mounted = true;\r\n\t\t\t//if its template is a reference then store it.\r\n\t\t\tif (this.isTemplateRef()) {\r\n\t\t\t\tthis.props.templateCache[\r\n\t\t\t\t\tthis.props.args.itemTemplate.dynamo_ref\r\n\t\t\t\t] = Array.prototype.isPrototypeOf(this.props.args.itemTemplate)\r\n\t\t\t\t\t? this.props.args.itemTemplate\r\n\t\t\t\t\t: this.props.args.itemTemplate.template;\r\n\t\t\t}\r\n\t\t\t//if theres a default then update everyone.\r\n\t\t\tif (this.state.items && this.state.items.length) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.props.valueChanged({\r\n\t\t\t\t\t\t[this.props.name]: this.state.items\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 0);\r\n\t\t\t}\r\n\t\t\tlet equal = equivalent(this.props.dataTemplate, this.state.items);\r\n\t\t\t//if theres a data template processor then run it.\r\n\t\t\tif (\r\n\t\t\t\tthis.props.args.listItemDataTemplateProcessor &&\r\n\t\t\t\tthis.state.items &&\r\n\t\t\t\tthis.state.items.length &&\r\n\t\t\t\t!equal\r\n\t\t\t) {\r\n\t\t\t\tthis.getListItemDataTemplate(this.state.items);\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tthis.props.dataTemplate &&\r\n\t\t\t\tthis.props.dataTemplate.length &&\r\n\t\t\t\tequal\r\n\t\t\t) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\titems: this.props.dataTemplate.slice()\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tgetListItemDataTemplate(i, props = this.props) {\r\n\t\t\tthis.props.getListItemDataTemplate(\r\n\t\t\t\tprops.args.listItemDataTemplateProcessor,\r\n\t\t\t\ti,\r\n\t\t\t\tprops.component_uid\r\n\t\t\t);\r\n\t\t}\r\n\t\tisTemplateRef() {\r\n\t\t\treturn (\r\n\t\t\t\t(this.props.args.itemTemplate &&\r\n\t\t\t\t\t!Array.prototype.isPrototypeOf(\r\n\t\t\t\t\t\tthis.props.args.itemTemplate\r\n\t\t\t\t\t) &&\r\n\t\t\t\t\tthis.props.args.itemTemplate.dynamo_ref) ||\r\n\t\t\t\t(this.props.args.behavior &&\r\n\t\t\t\t\tthis.props.args.behavior.dynamo_ref &&\r\n\t\t\t\t\tthis.props.args.itemTemplate)\r\n\t\t\t);\r\n\t\t}\r\n\t\trunValidators() {\r\n\t\t\treturn new ValidatorHelper(this).run();\r\n\t\t}\r\n\t\tisDisabled() {\r\n\t\t\treturn this.props.args && this.props.args.disabled;\r\n\t\t}\r\n\t\tshowModal() {\r\n\t\t\tif (!this.isDisabled()) this.setState({ modalVisible: true });\r\n\t\t}\r\n\t\thasValue() {\r\n\t\t\treturn (\r\n\t\t\t\t(this.state.items && this.state.items.length) ||\r\n\t\t\t\t\"Requires atleast one item to have been added to the list\"\r\n\t\t\t);\r\n\t\t}\r\n\t\tisLessThanMaxLength(element) {\r\n\t\t\treturn (\r\n\t\t\t\t(this.state.items &&\r\n\t\t\t\t\tthis.state.items.length &&\r\n\t\t\t\t\tthis.state.items.length <= element.args.max) ||\r\n\t\t\t\t(element.error ||\r\n\t\t\t\t\t\"The maximum number of items is \" + element.args.max)\r\n\t\t\t);\r\n\t\t}\r\n\t\tisGreaterThanMinLength(element) {\r\n\t\t\treturn (\r\n\t\t\t\t(this.state.items &&\r\n\t\t\t\t\tthis.state.items.length &&\r\n\t\t\t\t\tthis.state.items.length >= element.args.min) ||\r\n\t\t\t\t(element.error ||\r\n\t\t\t\t\t\"The minimum number of items is \" + element.args.min)\r\n\t\t\t);\r\n\t\t}\r\n\t\tcloseModal(result) {\r\n\t\t\t//he/she clicked ok\r\n\t\t\tif (result) {\r\n\t\t\t\tthis.state.validator.validate().then(() => {\r\n\t\t\t\t\tlet items = this.state.items || [];\r\n\r\n\t\t\t\t\tif (!this.state.edit) items.push(this.state.form);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\titems.splice(\r\n\t\t\t\t\t\t\titems.indexOf(this.state.edit),\r\n\t\t\t\t\t\t\t1,\r\n\t\t\t\t\t\t\tthis.state.form\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\tthis.props.valueChanged({ [this.props.name]: items });\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\titems: Object.assign([], items),\r\n\t\t\t\t\t\tmodalVisible: false,\r\n\t\t\t\t\t\tedit: null,\r\n\t\t\t\t\t\tform: null\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (this.props.args.listItemDataTemplateProcessor)\r\n\t\t\t\t\t\tthis.getListItemDataTemplate(items);\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//canceled the modal box.\r\n\r\n\t\t\tthis.setState({ modalVisible: false, form: null, edit: null });\r\n\t\t}\r\n\t\tvalueChanged(v) {\r\n\t\t\tthis.state.form = v && v[DynamoList.modalName()];\r\n\t\t}\r\n\t\tclone(item) {\r\n\t\t\treturn JSON.parse(JSON.stringify(item));\r\n\t\t}\r\n\t\tremove(index) {\r\n\t\t\tthis.props.openConfirmation(\r\n\t\t\t\tthis.props.component_uid,\r\n\t\t\t\t\"Are you sure you want to remove that item ?\",\r\n\t\t\t\t{ index }\r\n\t\t\t);\r\n\t\t}\r\n\t\tedit(index) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tedit: this.state.items[index],\r\n\t\t\t\tform: this.state.items[index],\r\n\t\t\t\tmodalVisible: true\r\n\t\t\t});\r\n\t\t}\r\n\t\tstatic modalName() {\r\n\t\t\treturn \"_modal_\";\r\n\t\t}\r\n\t\tgetItemTemplate() {\r\n\t\t\tif (this.state.itemTemplate) return this.state.itemTemplate;\r\n\r\n\t\t\tif (!this.props.args.itemTemplate) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t(!this.props.args.behavior ||\r\n\t\t\t\t\t\t!this.props.args.behavior.template_ref) &&\r\n\t\t\t\t\t!this.props.args.disabled\r\n\t\t\t\t)\r\n\t\t\t\t\tthrow new Error(\"Empty List view item template\");\r\n\r\n\t\t\t\tthis.props.args.itemTemplate =\r\n\t\t\t\t\tthis.props.templateCache[\r\n\t\t\t\t\t\tthis.props.args.behavior &&\r\n\t\t\t\t\t\t\tthis.props.args.behavior.template_ref\r\n\t\t\t\t\t] || [];\r\n\t\t\t}\r\n\r\n\t\t\tlet itemTemplate = this.clone(\r\n\t\t\t\tthis.isTemplateRef()\r\n\t\t\t\t\t? this.props.args.itemTemplate.template\r\n\t\t\t\t\t: this.props.args.itemTemplate\r\n\t\t\t);\r\n\r\n\t\t\tif (\r\n\t\t\t\tthis.props.args.behavior &&\r\n\t\t\t\tthis.props.args.behavior.extension &&\r\n\t\t\t\tthis.props.args.behavior.extension.length\r\n\t\t\t)\r\n\t\t\t\tthis.props.args.behavior.extension.forEach((element, index) => {\r\n\t\t\t\t\telement.key = index;\r\n\t\t\t\t\titemTemplate.push(this.clone(element));\r\n\t\t\t\t});\r\n\t\t\t//this happens asynchronously;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (this._mounted)\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\titemTemplate: itemTemplate\r\n\t\t\t\t\t});\r\n\t\t\t}, 0);\r\n\r\n\t\t\t//this.state.itemTemplate = itemTemplate;\r\n\t\t\treturn itemTemplate;\r\n\t\t}\r\n\r\n\t\trender() {\r\n\t\t\tif (this.props.busy) {\r\n\t\t\t\treturn <ProgressBar />;\r\n\t\t\t}\r\n\t\t\tlet template = this.getItemTemplate(),\r\n\t\t\t\tdisabled = this.isDisabled();\r\n\r\n\t\t\treturn (\r\n\t\t\t\t/*jshint ignore:start */\r\n\t\t\t\t<Layout value={this.props.label}>\r\n\t\t\t\t\t<Button disabled={disabled} click={this.showModal} />\r\n\t\t\t\t\t<List\r\n\t\t\t\t\t\titems={this.state.items}\r\n\t\t\t\t\t\trowClicked={this.edit}\r\n\t\t\t\t\t\trowRemoved={this.remove}\r\n\t\t\t\t\t\trowTemplate={\r\n\t\t\t\t\t\t\tthis.props.args.rowTemplate &&\r\n\t\t\t\t\t\t\tJSON.parse(this.props.args.rowTemplate)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ErrorText value={this.state.errors} />\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\ttemplate={\r\n\t\t\t\t\t\t\t<Container\r\n\t\t\t\t\t\t\t\telements={template}\r\n\t\t\t\t\t\t\t\tvalue={this.state.edit}\r\n\t\t\t\t\t\t\t\tname={DynamoList.modalName()}\r\n\t\t\t\t\t\t\t\tvalidator={this.state.validator}\r\n\t\t\t\t\t\t\t\tvalueChanged={this.valueChanged}\r\n\t\t\t\t\t\t\t\tnavigation={this.props.navigation}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvisibility={this.state.modalVisible}\r\n\t\t\t\t\t\tdone={this.closeModal}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Layout>\r\n\t\t\t\t/*jshint ignore:end */\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(mapStateToProps, mapDispatchToProps)(DynamoList);\r\n};\r\n","export default props => {\r\n\tsetTimeout(\r\n\t\t() =>\r\n\t\t\t(props.value || (props.args && props.args.default)) &&\r\n\t\t\tprops.valueChanged({\r\n\t\t\t\t[props.name]: props.value || (props.args && props.args.default)\r\n\t\t\t}),\r\n\t\t0\r\n\t);\r\n\treturn null;\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchDynamoProcess } from \"./actions\";\r\nimport invariants from \"./utils/invariants\";\r\n\r\nexport default (Link, NavigationActions) => {\r\n\tif (invariants.validComponent(Link, \"Link\") && !NavigationActions)\r\n\t\tthrow new Error(\"NavigationActions cannot be null (dynamo_nav)\");\r\n\r\n\tconst mapDispatchToState = dispatch => {\r\n\t\treturn {\r\n\t\t\tdispatch\r\n\t\t};\r\n\t};\r\n\r\n\tconst mapStateToProps = (_, initialProps) => state => {\r\n\t\treturn {\r\n\t\t\tcontext: state && state.dynamo && state.dynamo.navigationContext\r\n\t\t};\r\n\t};\r\n\r\n\t//{text:\"link text\",type:\"DYNAMO or CLIENT\",config:{value:\"\"}}\r\n\tclass DynamoNav extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.go = this.go.bind(this);\r\n\t\t\tthis.state = { link: this.props.value };\r\n\t\t}\r\n\t\tstatic getParams(firstItemIsLink, link) {\r\n\t\t\tlet key_value = link.split(\"|\");\r\n\t\t\tif (firstItemIsLink) link = key_value.shift();\r\n\t\t\tlet params = key_value.reduce((sum, x) => {\r\n\t\t\t\t\tlet sp = x.split(\"=\");\r\n\t\t\t\t\treturn (sum[sp[0]] = sp[1]), sum;\r\n\t\t\t\t}, {}),\r\n\t\t\t\tresult = { params };\r\n\t\t\tif (firstItemIsLink || !key_value.length) result.link = link;\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tgo() {\r\n\t\t\tlet params = null;\r\n\t\t\tlet link =\r\n\t\t\t\tthis.state.link ||\r\n\t\t\t\t(this.props.args.config && this.props.args.config.value);\r\n\t\t\tif (link) {\r\n\t\t\t\tlet linkAndParams = DynamoNav.getParams(true, link);\r\n\t\t\t\tif (this.props.args.params) {\r\n\t\t\t\t\tlet paramsOnly = DynamoNav.getParams(\r\n\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\tthis.props.args.params\r\n\t\t\t\t\t);\r\n\t\t\t\t\tObject.assign(linkAndParams.params, paramsOnly.params);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlink = linkAndParams.link;\r\n\t\t\t\tparams = linkAndParams.params;\r\n\t\t\t\tswitch (this.props.args.type) {\r\n\t\t\t\t\tcase DynamoNav.NAV_TYPE.CLIENT:\r\n\t\t\t\t\t\tthis.props.dispatch(\r\n\t\t\t\t\t\t\tNavigationActions.navigate({\r\n\t\t\t\t\t\t\t\tkey: link,\r\n\t\t\t\t\t\t\t\tparams\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase DynamoNav.NAV_TYPE.DYNAMO:\r\n\t\t\t\t\t\tconst setParamsAction = NavigationActions.setParams(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tparams: { id: link, fetchParams: params },\r\n\t\t\t\t\t\t\t\tkey: \"Dynamo\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tthis.props.context,\r\n\t\t\t\t\t\t\tthis.props.navigation\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.props.dispatch(setParamsAction);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\trender() {\r\n\t\t\treturn (\r\n\t\t\t\t/*jshint ignore:start */\r\n\t\t\t\t<Link\r\n\t\t\t\t\ttext={this.props.args.text}\r\n\t\t\t\t\tdisabled={this.props.args.disabled}\r\n\t\t\t\t\tgo={this.go}\r\n\t\t\t\t/>\r\n\t\t\t\t/*jshint ignore:end */\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\tDynamoNav.NAV_TYPE = { CLIENT: \"CLIENT\", DYNAMO: \"DYNAMO\" };\r\n\treturn connect(mapStateToProps, mapDispatchToState)(DynamoNav);\r\n};\r\n","import React from \"react\";\r\nimport invariants from \"./utils/invariants\";\r\nexport default Image => {\r\n\tinvariants.validComponent(Image, \"Image\");\r\n\treturn props => {\r\n\t\tlet { value, args, ...rest } = props;\r\n\t\tif (value && props.args.type == \"URL\") {\r\n\t\t\tlet data = props.args.config.data.replace(\r\n\t\t\t\t\tnew RegExp(`{${props.name}}`, \"g\"),\r\n\t\t\t\t\tvalue\r\n\t\t\t\t),\r\n\t\t\t\targs = Object.assign({}, props.args);\r\n\t\t\targs.config = { data };\r\n\t\t\treturn <Image args={args} {...rest} />;\r\n\t\t}\r\n\t\treturn <Image {...props} />;\r\n\t};\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n\trunDynamoProcessor,\r\n\tgetMoreForGrid,\r\n\tfilterGrid,\r\n\tgetSingleItemForGrid,\r\n\tgetFilterTemplate,\r\n\tgetItemTemplate,\r\n\tshowMessage\r\n} from \"./actions\";\r\nimport invariants from \"./utils/invariants\";\r\n\r\nexport const GRID_MODES = {\r\n\tCRUD: \"CRUD\",\r\n\tEDITONLY: \"EDITONLY\"\r\n};\r\nexport const ITEM_MODES = {\r\n\tNEW: \"NEW\",\r\n\tEDIT: \"EDIT\"\r\n};\r\n\r\nexport default (\r\n\tLayout,\r\n\tList,\r\n\tItemView,\r\n\tHeader,\r\n\tProgressBar,\r\n\tCommandsView,\r\n\tNavigationActions,\r\n\tCommandResultView,\r\n\tContainer\r\n) => {\r\n\tif (\r\n\t\tinvariants.validComponent(Layout, \"Layout\") &&\r\n\t\tinvariants.validComponent(Header, \"Header\") &&\r\n\t\tinvariants.validComponent(List, \"List\") &&\r\n\t\tinvariants.validComponent(ItemView, \"ItemView\") &&\r\n\t\tinvariants.validComponent(ProgressBar, \"ProgressBar\") &&\r\n\t\tinvariants.validComponent(CommandsView, \"CommandsView\") &&\r\n\t\tinvariants.validComponent(Container, \"Container\") &&\r\n\t\tinvariants.validComponent(CommandResultView, \"CommandResultView\") &&\r\n\t\t!NavigationActions\r\n\t)\r\n\t\tthrow new Error(\"NavigationActions cannot be null (dynamo_grid)\");\r\n\r\n\tconst mapDispatchToProps = dispatch => {\r\n\t\treturn {\r\n\t\t\trun: (id, args, key) =>\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\trunDynamoProcessor(id, args, key, { disableCache: true })\r\n\t\t\t\t),\r\n\t\t\tmore: (id, args, key) => dispatch(getMoreForGrid(id, args, key)),\r\n\t\t\tgo: value =>\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tNavigationActions.setParams({\r\n\t\t\t\t\t\tparams: { id: value },\r\n\t\t\t\t\t\tkey: \"Dynamo\"\r\n\t\t\t\t\t})\r\n\t\t\t\t),\r\n\t\t\tgetSingleItem: (id, args, key) =>\r\n\t\t\t\tdispatch(getSingleItemForGrid(id, args, key)),\r\n\t\t\tgetItemTemplate: (id, args, key) =>\r\n\t\t\t\tdispatch(getItemTemplate(id, args, key)),\r\n\t\t\tgetFilterTemplate: (id, args, key) =>\r\n\t\t\t\tdispatch(getFilterTemplate(id, args, key)),\r\n\t\t\tfilterGrid: (id, args, key) => dispatch(filterGrid(id, args, key)),\r\n\t\t\tshowMessage: message => dispatch(showMessage(message))\r\n\t\t};\r\n\t};\r\n\tconst mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n\t\tvar result = state.dynamo[ownProps.component_uid];\r\n\t\treturn {\r\n\t\t\titems: result && result.data ? result.data.items : null,\r\n\t\t\ttotal: result && result.data ? result.data.total : 0,\r\n\t\t\tbusy: result && !!result.fetchingGrid,\r\n\t\t\tfilterTemplate:\r\n\t\t\t\tresult &&\r\n\t\t\t\t(result.filterTemplate ||\r\n\t\t\t\t\t(ownProps.args && ownProps.args.filter) ||\r\n\t\t\t\t\tnull),\r\n\t\t\tfilter: result && result.filter,\r\n\t\t\tsingleItem: result && result.singleItem,\r\n\t\t\titemTemplate: result && result.itemTemplate,\r\n\t\t\tfetchingSingleItem: result && result.fetchingSingleItem,\r\n\t\t\tfetchingFilterTemplate: result && result.gettingFilterTemplate,\r\n\t\t\tfetchingItemTemplate: result && result.gettingTemplate,\r\n\t\t\tcommandProcessed:\r\n\t\t\t\tstate.dynamo[\r\n\t\t\t\t\townProps.component_uid + DynamoGrid.commandResultViewName()\r\n\t\t\t\t],\r\n\t\t\tcommandProcessing:\r\n\t\t\t\tstate.dynamo[\r\n\t\t\t\t\townProps.component_uid +\r\n\t\t\t\t\t\tDynamoGrid.commandResultViewName() +\r\n\t\t\t\t\t\t\"-busy\"\r\n\t\t\t\t],\r\n\t\t\tprocessed:\r\n\t\t\t\tstate.dynamo[ownProps.component_uid + DynamoGrid.itemViewName()]\r\n\t\t};\r\n\t};\r\n\tclass DynamoGrid extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.state = {\r\n\t\t\t\tvalidator: {},\r\n\t\t\t\tshowItemView: false,\r\n\t\t\t\tcount: this.props.args.pageCount || 5,\r\n\t\t\t\tshowCommandResultView: false\r\n\t\t\t};\r\n\t\t\tthis.showItemView = this.showItemView.bind(this);\r\n\t\t\tthis.cancel = this.cancel.bind(this);\r\n\t\t\tthis.showItemView = this.showItemView.bind(this);\r\n\t\t\tthis.isCRUD = this.isCRUD.bind(this);\r\n\t\t\tthis.isEDITONLY = this.isEDITONLY.bind(this);\r\n\t\t\tthis.valueChanged = this.valueChanged.bind(this);\r\n\t\t\tthis.getItemsFromSource = this.getItemsFromSource.bind(this);\r\n\t\t\tthis.done = this.done.bind(this);\r\n\t\t\tthis._filterValidator = {};\r\n\t\t\tthis.filter = this.filter.bind(this);\r\n\t\t\tthis.filterValueChanged = this.filterValueChanged.bind(this);\r\n\t\t\tthis.more = this.more.bind(this);\r\n\t\t\tthis.finished = this.finished.bind(this);\r\n\t\t\tthis.openCommandMenu = this.openCommandMenu.bind(this);\r\n\t\t\tthis.closeCommandView = this.closeCommandView.bind(this);\r\n\t\t\tthis.execCommand = this.execCommand.bind(this);\r\n\t\t\tthis.showCommandResult = this.showCommandResult.bind(this);\r\n\t\t\tthis.closeCommandResult = this.closeCommandResult.bind(this);\r\n\t\t\tif (\r\n\t\t\t\t(this.isCRUD() || this.isEDITONLY()) &&\r\n\t\t\t\t(!this.props.args.commands ||\r\n\t\t\t\t\t!this.props.args.commands.filter(\r\n\t\t\t\t\t\tx => x.commandType == \"$EDIT\"\r\n\t\t\t\t\t).length)\r\n\t\t\t) {\r\n\t\t\t\tlet cmd = {\r\n\t\t\t\t\tcommandText: \"Edit\",\r\n\t\t\t\t\tcommand: { value: \"\" },\r\n\t\t\t\t\tcommandType: \"$EDIT\",\r\n\t\t\t\t\tcommandIcon: \"mode-edit\"\r\n\t\t\t\t};\r\n\t\t\t\tif (!this.props.args.commands) this.props.args.commands = [];\r\n\t\t\t\tthis.props.args.commands.unshift(cmd);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcomponentDidMount() {\r\n\t\t\tif (\r\n\t\t\t\tthis.props.args.filterProcessor &&\r\n\t\t\t\t!this.props.fetchingFilterTemplate\r\n\t\t\t) {\r\n\t\t\t\tthis.props.getFilterTemplate(\r\n\t\t\t\t\tthis.props.args.filterProcessor,\r\n\t\t\t\t\tJSON.parse(this.props.args.gridArgs || \"{}\"),\r\n\t\t\t\t\tthis.props.component_uid\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\tshowCommandResult(props = this.props) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tshowCommandsView: false,\r\n\t\t\t\tshowCommandResultView: true,\r\n\t\t\t\tcommandResult: props.commandProcessed\r\n\t\t\t});\r\n\t\t}\r\n\t\tcloseCommandResult() {\r\n\t\t\tthis.setState({\r\n\t\t\t\tshowCommandResultView: false,\r\n\t\t\t\tresult: null\r\n\t\t\t});\r\n\t\t}\r\n\t\tcomponentWillReceiveProps(next) {\r\n\t\t\tif (next.processed !== this.props.processed) {\r\n\t\t\t\t//console.log(\"componentWillReceiveProps fired get items\");\r\n\t\t\t\tthis.getItemsFromSource(null, \"filterGrid\");\r\n\t\t\t}\r\n\r\n\t\t\tif (next.commandProcessed !== this.props.commandProcessed) {\r\n\t\t\t\tthis.showCommandResult(next);\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tnext.singleItem &&\r\n\t\t\t\tnext.singleItem !== this.props.singleItem &&\r\n\t\t\t\t(next.itemTemplate &&\r\n\t\t\t\t\tnext.itemTemplate !== this.props.itemTemplate)\r\n\t\t\t) {\r\n\t\t\t\treturn this.showItemView(\r\n\t\t\t\t\tITEM_MODES.EDIT,\r\n\t\t\t\t\tnext.singleItem,\r\n\t\t\t\t\ttrue,\r\n\t\t\t\t\tnext.itemTemplate\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tnext.singleItem &&\r\n\t\t\t\tnext.singleItem !== this.props.singleItem &&\r\n\t\t\t\t!next.fetchingItemTemplate\r\n\t\t\t) {\r\n\t\t\t\treturn this.showItemView(\r\n\t\t\t\t\tITEM_MODES.EDIT,\r\n\t\t\t\t\tnext.singleItem,\r\n\t\t\t\t\ttrue\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tnext.itemTemplate &&\r\n\t\t\t\tnext.itemTemplate !== this.props.itemTemplate\r\n\t\t\t) {\r\n\t\t\t\tthis.showItemView(\r\n\t\t\t\t\tthis.state.mode,\r\n\t\t\t\t\tthis.state.existingValue || this.props.singleItem,\r\n\t\t\t\t\ttrue,\r\n\t\t\t\t\tnext.itemTemplate\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetItemsFromSource(\r\n\t\t\tfilter = this.props.filter,\r\n\t\t\tmethodName = \"run\",\r\n\t\t\textra\r\n\t\t) {\r\n\t\t\tthis.props[methodName](\r\n\t\t\t\tthis.props.args.source,\r\n\t\t\t\tObject.assign(\r\n\t\t\t\t\t{},\r\n\t\t\t\t\tJSON.parse(this.props.args.gridArgs || \"{}\"),\r\n\t\t\t\t\t{ count: this.state.count, full: true },\r\n\t\t\t\t\tfilter ? { query: filter } : {},\r\n\t\t\t\t\textra || {}\r\n\t\t\t\t),\r\n\t\t\t\tthis.props.component_uid\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tfilter() {\r\n\t\t\tthis._filterValidator.validate().then(\r\n\t\t\t\t() => {\r\n\t\t\t\t\tthis.getItemsFromSource(this.state.filter, \"filterGrid\");\r\n\t\t\t\t},\r\n\t\t\t\t() => {\r\n\t\t\t\t\tconsole.warn(\"a field in filter is invalid\");\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\tstatic itemViewName() {\r\n\t\t\treturn \"_itemView_\";\r\n\t\t}\r\n\t\tstatic filterViewName() {\r\n\t\t\treturn \"_filterView_\";\r\n\t\t}\r\n\t\tstatic commandResultViewName() {\r\n\t\t\treturn \"_commandResultView_\";\r\n\t\t}\r\n\t\tvalueChanged(value) {\r\n\t\t\tthis.state.form = value ? value[DynamoGrid.itemViewName()] : null;\r\n\t\t}\r\n\t\tdone(submitted) {\r\n\t\t\tif (!submitted)\r\n\t\t\t\treturn this.setState({ showItemView: false, form: null });\r\n\r\n\t\t\tthis.state.validator.validate().then(\r\n\t\t\t\t() => {\r\n\t\t\t\t\tlet id;\r\n\t\t\t\t\tswitch (this.state.mode) {\r\n\t\t\t\t\t\tcase ITEM_MODES.NEW:\r\n\t\t\t\t\t\t\tid = this.props.args.extra.createProcessor;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase ITEM_MODES.EDIT:\r\n\t\t\t\t\t\t\tid =\r\n\t\t\t\t\t\t\t\tthis.props.args.extra.editProcessor ||\r\n\t\t\t\t\t\t\t\tthis.props.args.extra.createProcessor;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!id) {\r\n\t\t\t\t\t\treturn console.error(\r\n\t\t\t\t\t\t\t\"done  was called on a grid view in \" +\r\n\t\t\t\t\t\t\t\tthis.props.args.mode +\r\n\t\t\t\t\t\t\t\t\" and it does not have a processor for it. \\n\" +\r\n\t\t\t\t\t\t\t\tJSON.stringify(this.props, null, \" \")\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.props.run(\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tObject.assign(\r\n\t\t\t\t\t\t\tJSON.parse(this.props.args.gridArgs || \"{}\"),\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tentity: this.state.form\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tthis.props.component_uid + DynamoGrid.itemViewName()\r\n\t\t\t\t\t);\r\n\t\t\t\t\t//this.setState({ showItemView: false });\r\n\t\t\t\t\tthis.cancel();\r\n\t\t\t\t},\r\n\t\t\t\t() => {\r\n\t\t\t\t\tconsole.log(\"some modal fields are invalid\");\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\tshowItemView(mode, args, skipFetch, _itemTemplate) {\r\n\t\t\tlet template = _itemTemplate,\r\n\t\t\t\texistingValue;\r\n\t\t\tif (this.props.args.extra)\r\n\t\t\t\tswitch (mode) {\r\n\t\t\t\t\tcase ITEM_MODES.NEW:\r\n\t\t\t\t\t\ttemplate =\r\n\t\t\t\t\t\t\t_itemTemplate ||\r\n\t\t\t\t\t\t\t((this.props.args.extra.createTemplate &&\r\n\t\t\t\t\t\t\t\tthis.props.args.extra.createTemplate.length &&\r\n\t\t\t\t\t\t\t\tthis.props.args.extra.createTemplate) ||\r\n\t\t\t\t\t\t\t\tthis.props.itemTemplate ||\r\n\t\t\t\t\t\t\t\t[])\r\n\t\t\t\t\t\t\t\t.slice();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase ITEM_MODES.EDIT:\r\n\t\t\t\t\t\ttemplate =\r\n\t\t\t\t\t\t\t_itemTemplate ||\r\n\t\t\t\t\t\t\t((this.props.args.extra.editTemplate &&\r\n\t\t\t\t\t\t\t\tthis.props.args.extra.editTemplate.length &&\r\n\t\t\t\t\t\t\t\tthis.props.args.extra.editTemplate) ||\r\n\t\t\t\t\t\t\t\t(this.props.args.extra.createTemplate &&\r\n\t\t\t\t\t\t\t\t\tthis.props.args.extra.createTemplate\r\n\t\t\t\t\t\t\t\t\t\t.length &&\r\n\t\t\t\t\t\t\t\t\tthis.props.args.extra.createTemplate) ||\r\n\t\t\t\t\t\t\t\tthis.props.itemTemplate ||\r\n\t\t\t\t\t\t\t\t[])\r\n\t\t\t\t\t\t\t\t.slice();\r\n\t\t\t\t\t\texistingValue = args;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tthis.props.args.extra.fetchSingleItemProcessor &&\r\n\t\t\t\t\t\t\t!this.props.fetchingSingleItem &&\r\n\t\t\t\t\t\t\t!skipFetch\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\ttemplate = [];\r\n\t\t\t\t\t\t\texistingValue = null;\r\n\t\t\t\t\t\t\tthis.props.getSingleItem(\r\n\t\t\t\t\t\t\t\tthis.props.args.extra.fetchSingleItemProcessor,\r\n\t\t\t\t\t\t\t\targs,\r\n\t\t\t\t\t\t\t\tthis.props.component_uid\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\t(!template || !Array.prototype.isPrototypeOf(template)) &&\r\n\t\t\t\t!this.props.args.extra.fetchTemplateProcessor\r\n\t\t\t) {\r\n\t\t\t\treturn console.error(\r\n\t\t\t\t\t\"showItemTemplate was called on a grid view in \" +\r\n\t\t\t\t\t\tthis.props.args.mode +\r\n\t\t\t\t\t\t\" and it does not have a template. \\n\" +\r\n\t\t\t\t\t\tJSON.stringify(this.props, null, \" \")\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\t(!template || !template.length) &&\r\n\t\t\t\t!this.props.fetchingItemTemplate &&\r\n\t\t\t\tthis.props.args.extra.fetchTemplateProcessor &&\r\n\t\t\t\t!skipFetch\r\n\t\t\t) {\r\n\t\t\t\tthis.props.getItemTemplate(\r\n\t\t\t\t\tthis.props.args.extra.fetchTemplateProcessor,\r\n\t\t\t\t\targs,\r\n\t\t\t\t\tthis.props.component_uid\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tshowItemView: true,\r\n\t\t\t\tmode: mode,\r\n\t\t\t\tshowCommandsView: false,\r\n\t\t\t\titemViewElements: template,\r\n\t\t\t\texistingValue: existingValue\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tmore() {\r\n\t\t\tif (!this.finished() && !this.props.busy) {\r\n\t\t\t\t//console.log(\"more fired getItemsFromSource\");\r\n\t\t\t\tlet query = {\r\n\t\t\t\t\tcount: this.state.count\r\n\t\t\t\t};\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.props.items &&\r\n\t\t\t\t\tthis.props.items[this.props.items.length - 1]\r\n\t\t\t\t) {\r\n\t\t\t\t\tquery._id = this.props.items[\r\n\t\t\t\t\t\tthis.props.items.length - 1\r\n\t\t\t\t\t]._id;\r\n\t\t\t\t\tconsole.log(\"most recent id:\" + query._id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.getItemsFromSource(null, \"more\", query);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfinished() {\r\n\t\t\treturn (\r\n\t\t\t\tthis.props.items && this.props.total == this.props.items.length\r\n\t\t\t);\r\n\t\t}\r\n\t\tcancel() {\r\n\t\t\tthis.setState({\r\n\t\t\t\tmode: null,\r\n\t\t\t\tshowItemView: false,\r\n\t\t\t\titemViewElements: null,\r\n\t\t\t\tshowCommandsView: false,\r\n\t\t\t\texistingValue: null\r\n\t\t\t});\r\n\t\t}\r\n\t\tfilterValueChanged(value) {\r\n\t\t\tthis.state.filter = value\r\n\t\t\t\t? value[DynamoGrid.filterViewName()]\r\n\t\t\t\t: null;\r\n\t\t}\r\n\t\tcloseCommandView() {\r\n\t\t\tthis.setState({ showCommandsView: false });\r\n\t\t}\r\n\t\topenCommandMenu(item) {\r\n\t\t\tthis.setState({ item: item, showCommandsView: true });\r\n\t\t}\r\n\t\texecCommand(command, item = this.state.item) {\r\n\t\t\tswitch (command.commandType) {\r\n\t\t\t\tcase \"NAV\":\r\n\t\t\t\t\tthis.props.go(command.command.value, {\r\n\t\t\t\t\t\tfetchParams: { _id: item._id }\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"$EDIT\":\r\n\t\t\t\t\tthis.showItemView(ITEM_MODES.EDIT, item);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"PROCESSOR\":\r\n\t\t\t\t\tthis.props.run(\r\n\t\t\t\t\t\tcommand.command.value,\r\n\t\t\t\t\t\tObject.assign(\r\n\t\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t\tJSON.parse(this.props.args.gridArgs || \"{}\"),\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tthis.props.component_uid +\r\n\t\t\t\t\t\t\tDynamoGrid.commandResultViewName()\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tisCRUD() {\r\n\t\t\treturn this.props.args.mode == GRID_MODES.CRUD;\r\n\t\t}\r\n\t\tisEDITONLY() {\r\n\t\t\treturn this.props.args.mode == GRID_MODES.EDITONLY;\r\n\t\t}\r\n\t\trender() {\r\n\t\t\tlet args = this.props.args,\r\n\t\t\t\theader = this.props.filterTemplate ? (\r\n\t\t\t\t\t<Header filter={() => this.filter()}>\r\n\t\t\t\t\t\t<Container\r\n\t\t\t\t\t\t\telements={this.props.filterTemplate}\r\n\t\t\t\t\t\t\tvalue={this.state.filter}\r\n\t\t\t\t\t\t\tvalueChanged={this.filterValueChanged}\r\n\t\t\t\t\t\t\tname={DynamoGrid.filterViewName()}\r\n\t\t\t\t\t\t\tvalidator={this._filterValidator}\r\n\t\t\t\t\t\t\tnavigation={this.props.navigation}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Header>\r\n\t\t\t\t) : this.props.fetchingFilterTemplate ? (\r\n\t\t\t\t\t<ProgressBar />\r\n\t\t\t\t) : null,\r\n\t\t\t\tfooter =\r\n\t\t\t\t\t!this.finished() && this.props.busy ? (\r\n\t\t\t\t\t\t<ProgressBar />\r\n\t\t\t\t\t) : null;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Layout>\r\n\t\t\t\t\t<List\r\n\t\t\t\t\t\ttitle={this.props.label}\r\n\t\t\t\t\t\tcanAddOrEdit={this.isCRUD()}\r\n\t\t\t\t\t\theader={header}\r\n\t\t\t\t\t\tfooter={footer}\r\n\t\t\t\t\t\ttotal={this.props.total}\r\n\t\t\t\t\t\tshowItemView={this.showItemView}\r\n\t\t\t\t\t\titems={this.props.items}\r\n\t\t\t\t\t\ttemplateConfig={\r\n\t\t\t\t\t\t\tthis.props.args.templateConfig ? (\r\n\t\t\t\t\t\t\t\tJSON.parse(this.props.args.templateConfig)\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmore={this.more}\r\n\t\t\t\t\t\tcommands={this.props.args.commands}\r\n\t\t\t\t\t\texecCommand={this.execCommand}\r\n\t\t\t\t\t\topenCommandMenu={this.openCommandMenu}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ItemView\r\n\t\t\t\t\t\tvisibility={\r\n\t\t\t\t\t\t\t(this.isCRUD() || this.isEDITONLY()) &&\r\n\t\t\t\t\t\t\tthis.state.showItemView\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdone={this.done}\r\n\t\t\t\t\t\tbusy={\r\n\t\t\t\t\t\t\tthis.props.fetchingSingleItem ||\r\n\t\t\t\t\t\t\tthis.props.fetchingItemTemplate\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttemplate={\r\n\t\t\t\t\t\t\t<Container\r\n\t\t\t\t\t\t\t\telements={this.state.itemViewElements}\r\n\t\t\t\t\t\t\t\tvalue={this.state.existingValue}\r\n\t\t\t\t\t\t\t\tname={DynamoGrid.itemViewName()}\r\n\t\t\t\t\t\t\t\tvalidator={this.state.validator}\r\n\t\t\t\t\t\t\t\tvalueChanged={this.valueChanged}\r\n\t\t\t\t\t\t\t\tnavigation={this.props.navigation}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<CommandsView\r\n\t\t\t\t\t\tvisibility={this.state.showCommandsView}\r\n\t\t\t\t\t\tclose={this.closeCommandView}\r\n\t\t\t\t\t\tcommands={this.props.args.commands}\r\n\t\t\t\t\t\texecCommand={this.execCommand}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<CommandResultView\r\n\t\t\t\t\t\tvisibility={this.state.showCommandResultView}\r\n\t\t\t\t\t\tdone={this.closeCommandResult}\r\n\t\t\t\t\t\ttemplate={\r\n\t\t\t\t\t\t\t<Container\r\n\t\t\t\t\t\t\t\telements={this.state.commandResult}\r\n\t\t\t\t\t\t\t\tname={DynamoGrid.commandResultViewName()}\r\n\t\t\t\t\t\t\t\tvalidator={{}}\r\n\t\t\t\t\t\t\t\tnavigation={this.props.navigation}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttitle={\"\"}\r\n\t\t\t\t\t\tbusy={this.props.commandProcessing}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Layout>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(mapStateToProps, mapDispatchToProps)(DynamoGrid);\r\n};\r\n","import React, { Component } from \"react\";\r\n\r\nexport default PlatformComponent => {\r\n\treturn class DynamoHTMLViewer extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t}\r\n\t\trender() {\r\n\t\t\treturn (\r\n\t\t\t\t<PlatformComponent\r\n\t\t\t\t\thtml={this.props.value || this.props.args.html}\r\n\t\t\t\t\t{...this.props}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { uploadDynamoFile, getDynamoFilePreview } from \"./actions\";\r\nimport invariants from \"./utils/invariants\";\r\nimport ValidationHelper from \"./utils/validator\";\r\n/**\r\n * This component should render a file uploader\r\n * @param  {Class} Uploader Component responsible for uploading the file\r\n * @param  {Array} previews Array of component definitions with an id property\r\n * @return {Class}          Configured component.\r\n */\r\nexport default (Uploader, ProgressBar, Text, previews = []) => {\r\n\tinvariants.validComponent(Uploader, \"Uploader\");\r\n\tinvariants.validComponent(ProgressBar, \"ProgressBar\");\r\n\tinvariants.validComponent(Text, \"Text\");\r\n\r\n\tclass DynamoFileUpload extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.state = {};\r\n\t\t\tthis._previewType = this.getPreviewType.call(this);\r\n\t\t\tthis._supported = this.isSupported();\r\n\t\t\tthis._getPreview = this._getPreview.bind(this);\r\n\t\t\tthis._query = this.getPreviewQuery();\r\n\t\t\tthis.props.validator.validate = () => {\r\n\t\t\t\treturn this.runValidators();\r\n\t\t\t};\r\n\t\t\tthis.upload = this.upload.bind(this);\r\n\t\t}\r\n\t\trunValidators() {\r\n\t\t\treturn new ValidationHelper(this).run();\r\n\t\t}\r\n\t\thasValue() {\r\n\t\t\treturn !!this.props.uploadedId || \"is required\";\r\n\t\t}\r\n\t\tgetPreviewQuery() {\r\n\t\t\treturn Uploader.getPreviewQuery(this.props.args.fileType);\r\n\t\t}\r\n\t\tgetPreviewType() {\r\n\t\t\tfor (var i = 0; i < previews.length; i++) {\r\n\t\t\t\tif (previews[i].id.test(this.props.args.fileType)) {\r\n\t\t\t\t\treturn previews[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tisSupported() {\r\n\t\t\treturn Uploader.supports(this.props.args.fileType);\r\n\t\t}\r\n\t\tcomponentDidMount() {\r\n\t\t\tif (this.props.uploadedId) {\r\n\t\t\t\tthis._getPreview(this.props.uploadedId);\r\n\t\t\t}\r\n\t\t}\r\n\t\t_getPreview(id) {\r\n\t\t\tthis.props.getPreview(\r\n\t\t\t\tid,\r\n\t\t\t\tthis.props.component_uid,\r\n\t\t\t\tthis.props.args.fileType,\r\n\t\t\t\tthis._query\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tcomponentWillReceiveProps(next) {\r\n\t\t\tif (\r\n\t\t\t\tnext.uploadedId !== this.props.uploadedId ||\r\n\t\t\t\tnext.component_uid !== this.props.component_uid\r\n\t\t\t) {\r\n\t\t\t\tthis._getPreview(next.uploadedId);\r\n\t\t\t\t//setTimeout(() => {\r\n\t\t\t\tthis.props.valueChanged({\r\n\t\t\t\t\t[this.props.name]: next.uploadedId\r\n\t\t\t\t});\r\n\t\t\t\t//}, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t\tupload(file) {\r\n\t\t\tthis.props.upload(file, this.props.component_uid);\r\n\t\t}\r\n\t\trender() {\r\n\t\t\tif (this.props.busy) return <ProgressBar />;\r\n\t\t\tif (!this._supported)\r\n\t\t\t\treturn <Text message={\"unsupported file upload type\"} />;\r\n\t\t\treturn (\r\n\t\t\t\t<Uploader\r\n\t\t\t\t\tkey={this.props.component_uid}\r\n\t\t\t\t\ttitle={this.props.label}\r\n\t\t\t\t\tdescription={this.props.description}\r\n\t\t\t\t\tupload={this.upload}\r\n\t\t\t\t\tcomponent_uid={this.props.component_uid}\r\n\t\t\t\t\tallowed={this.props.args.fileType}\r\n\t\t\t\t\tpreviewType={this._previewType}\r\n\t\t\t\t\tpreview={this.props.preview}\r\n\t\t\t\t\terrors={this.state.errors}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tconst mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n\t\tlet st = state.dynamo[ownProps.component_uid] || {};\r\n\t\treturn {\r\n\t\t\tpreview: st.preview,\r\n\t\t\tbusy: st.busy,\r\n\t\t\tuploadedId: st.uploadedId || ownProps.value\r\n\t\t};\r\n\t};\r\n\tconst mapDispatchToProps = dispatch => {\r\n\t\treturn {\r\n\t\t\tupload: (file, key) => dispatch(uploadDynamoFile(file, key)),\r\n\t\t\tgetPreview: (id, key, fileType, query) =>\r\n\t\t\t\tdispatch(getDynamoFilePreview(id, key, fileType, query))\r\n\t\t};\r\n\t};\r\n\r\n\treturn connect(mapStateToProps, mapDispatchToProps)(DynamoFileUpload);\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { runDynamoProcessor } from \"./actions\";\r\nimport invariants from \"./utils/invariants\";\r\nimport _ from \"lodash\";\r\n\r\nexport default (\r\n\tLayout,\r\n\tProgressBar,\r\n\tFilter,\r\n\tFilterContainer,\r\n\tContentContainer\r\n) => {\r\n\tinvariants.validComponent(Filter, \"Filter\");\r\n\tinvariants.validComponent(FilterContainer, \"FilterContainer\");\r\n\tinvariants.validComponent(ContentContainer, \"ContentContainer\");\r\n\tinvariants.validComponent(ProgressBar, \"ProgressBar\");\r\n\tinvariants.validComponent(Layout, \"Layout\");\r\n\r\n\tconst mapDispatchToProps = dispatch => {\r\n\t\treturn {\r\n\t\t\trun: (id, args, key) =>\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\trunDynamoProcessor(id, args, key, { disableCache: true })\r\n\t\t\t\t),\r\n\t\t\tshowMessage: message => dispatch(showMessage(message))\r\n\t\t};\r\n\t};\r\n\tconst mapStateToProps = (_, initialProps) => (state, ownProps) => {\r\n\t\tvar _actionState = state.dynamo[ownProps.component_uid];\r\n\t\treturn {\r\n\t\t\tresultUI: _actionState && (_actionState.ui || _actionState),\r\n\t\t\tresultData: _actionState && _actionState.data,\r\n\t\t\tbusy: !!state.dynamo[ownProps.component_uid + \"-busy\"]\r\n\t\t};\r\n\t};\r\n\tclass DynamoActionView extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.state = { form: this.props.value };\r\n\t\t\tthis._filterValidator = {};\r\n\t\t\tthis.filter = this.filter.bind(this);\r\n\t\t\tthis.valueChanged = this.valueChanged.bind(this);\r\n\t\t}\r\n\t\tcomponentWillReceiveProps(next) {\r\n\t\t\tif (_.isEqual(next.value, this.state.form)) {\r\n\t\t\t\t//setTimeout(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tform: next.value\r\n\t\t\t\t});\r\n\t\t\t\t//}, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfilter() {\r\n\t\t\tthis._filterValidator.validate().then(\r\n\t\t\t\t() => {\r\n\t\t\t\t\tthis.props.run(\r\n\t\t\t\t\t\tthis.props.args.action,\r\n\t\t\t\t\t\tthis.state.form,\r\n\t\t\t\t\t\tthis.props.component_uid\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\t() => {\r\n\t\t\t\t\tconsole.warn(\"a field in filter is invalid\");\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\tstatic itemViewName() {\r\n\t\t\treturn \"_itemView_\";\r\n\t\t}\r\n\t\tvalueChanged(value) {\r\n\t\t\tthis.state.form = value\r\n\t\t\t\t? value[DynamoActionView.itemViewName()]\r\n\t\t\t\t: null;\r\n\t\t}\r\n\t\tdoNothing() {}\r\n\t\trender() {\r\n\t\t\tif (this.props.busy) return <ProgressBar />;\r\n\t\t\treturn (\r\n\t\t\t\t<Layout>\r\n\t\t\t\t\t<Filter\r\n\t\t\t\t\t\tactionLabel={this.props.args.commandText}\r\n\t\t\t\t\t\tfilter={this.filter}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<FilterContainer\r\n\t\t\t\t\t\t\telements={this.props.args.elements}\r\n\t\t\t\t\t\t\tvalue={this.state.form}\r\n\t\t\t\t\t\t\tname={DynamoActionView.itemViewName()}\r\n\t\t\t\t\t\t\tvalidator={this._filterValidator}\r\n\t\t\t\t\t\t\tvalueChanged={this.valueChanged}\r\n\t\t\t\t\t\t\tnavigation={this.props.navigation}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Filter>\r\n\t\t\t\t\t<ContentContainer\r\n\t\t\t\t\t\telements={this.props.resultUI}\r\n\t\t\t\t\t\tvalue={this.props.resultData}\r\n\t\t\t\t\t\tvalidator={{}}\r\n\t\t\t\t\t\tvalueChanged={this.doNothing}\r\n\t\t\t\t\t\tnavigation={this.props.navigation}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Layout>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(mapStateToProps, mapDispatchToProps)(DynamoActionView);\r\n};\r\n","import React from \"react\";\r\nimport invariants from \"./utils/invariants\";\r\nexport default Label => {\r\n\tinvariants.validComponent(Label, \"Label\");\r\n\treturn props => {\r\n\t\tlet { value, description, ...rest } = props;\r\n\t\tif (value) {\r\n            return <Label description={value} {...rest} />\r\n\t\t}\r\n\t\treturn <Label {...props} />;\r\n\t};\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nexport default (WebView, Text) => {\r\n\treturn class DynamoWebView extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t}\r\n\t\trender() {\r\n\t\t\tif (this.props.args &&  this.props.args.url) {\r\n\t\t\t\treturn <WebView url={this.props.args.url} />;\r\n\t\t\t} else {\r\n\t\t\t\treturn <Text>{\"Missing url\"}</Text>;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n","import React, { Component } from \"react\";\r\nimport SocketIOClient from \"socket.io-client\";\r\nimport invariants from \"./utils/invariants\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n\tsendMessage,\r\n\tloginChat,\r\n\tcreateGroup,\r\n\tsendFriendRequest,\r\n\tsearchForHandle,\r\n\tacceptInvite,\r\n\trejectInvite,\r\n\tfetchInvites,\r\n\tgetContacts,\r\n\taddToOpenChats,\r\n\topenChat,\r\n\tcloseChat\r\n} from \"./actions\";\r\n\r\nexport default (\r\n\tLayout,\r\n\tPane,\r\n\tOpenChats,\r\n\tEditor,\r\n\tContextMenu,\r\n\tNewChatButton,\r\n\tOpenChatsLayout,\r\n\tModal,\r\n\tProgressBar,\r\n\tLogin,\r\n\tContactList,\r\n\tChatHistory,\r\n\tAddNewContact,\r\n\tPendingInvites,\r\n\tChatLayout\r\n) => {\r\n\tinvariants.validComponent(Layout, \"Layout\");\r\n\tinvariants.validComponent(Pane, \"Pane\");\r\n\tinvariants.validComponent(Editor, \"Editor\");\r\n\tinvariants.validComponent(ContextMenu, \"ContextMenu\");\r\n\tinvariants.validComponent(OpenChats, \"OpenChats\");\r\n\tinvariants.validComponent(NewChatButton, \"NewChatButton\");\r\n\tinvariants.validComponent(ContactList, \"ContactList\");\r\n\tinvariants.validComponent(ChatHistory, \"ChatHistory\");\r\n\tinvariants.validComponent(OpenChatsLayout, \"OpenChatsLayout\");\r\n\tinvariants.validComponent(Modal, \"Modal\");\r\n\tinvariants.validComponent(ProgressBar, \"ProgressBar\");\r\n\tinvariants.validComponent(Login, \"Login\");\r\n\tinvariants.validComponent(AddNewContact, \"AddNewContact\");\r\n\tinvariants.validComponent(PendingInvites, \"PendingInvites\");\r\n\tinvariants.validComponent(ChatLayout, \"ChatLayout\");\r\n\r\n\tconst mapStateToProps = state => {\r\n\t\tlet _state = state.chat;\r\n\t\treturn {\r\n\t\t\tchat: _state.chat,\r\n\t\t\tcontacts: _state.contacts,\r\n\t\t\topenChats: _state.openChats,\r\n\t\t\tnewMessage: _state.newMessage,\r\n\t\t\thandle: _state.chatHandle,\r\n\t\t\tusername: state.authentication.username,\r\n\t\t\tmessageSent: _state.chatMessageSent,\r\n\t\t\tloggingIn: _state.busyWithChatLogin,\r\n\t\t\tsearchResult: _state.searchResult,\r\n\t\t\tbusyWithInvite: _state.busyWithInvite,\r\n\t\t\tbusyWithInvites: _state.busyWithInvites,\r\n\t\t\tbusyWithContacts: _state.busyWithContacts,\r\n\t\t\tinvites: _state.invites,\r\n\t\t\tmessageDelivered: _state.messageDelivered\r\n\t\t};\r\n\t};\r\n\tconst mapDispatchToProps = dispatch => {\r\n\t\treturn {\r\n\t\t\tsend: (type, msg) => dispatch(sendMessage(type, msg)),\r\n\t\t\tcreateGroup: msg => dispatch(createGroup(msg)),\r\n\t\t\tlogin: credentials => dispatch(loginChat(credentials)),\r\n\t\t\tsendFriendRequest: handle => dispatch(sendFriendRequest(handle)),\r\n\t\t\tacceptInvite: handle => dispatch(acceptInvite(handle)),\r\n\t\t\trejectInvite: handle => dispatch(rejectInvite(handle)),\r\n\t\t\tsearch: query => dispatch(searchForHandle(query)),\r\n\t\t\tfetchInvites: () => dispatch(fetchInvites()),\r\n\t\t\tgetContacts: () => dispatch(getContacts()),\r\n\t\t\taddToOpenChats: chat => dispatch(addToOpenChats(chat)),\r\n\t\t\topenChat: chat => dispatch(openChat(chat)),\r\n\t\t\tcloseChat: () => dispatch(closeChat())\r\n\t\t};\r\n\t};\r\n\tclass DynamoMessenger extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.renderChat = this.renderChat.bind(this);\r\n\t\t\tthis.renderPendingInvites = this.renderPendingInvites.bind(this);\r\n\t\t\tthis.sendMessage = this.sendMessage.bind(this);\r\n\t\t\tthis.openSelectContact = this.openSelectContact.bind(this);\r\n\t\t\tthis.getMessageLayout = this.getMessageLayout.bind(this);\r\n\t\t\tthis.selectedPaneChanged = this.selectedPaneChanged.bind(this);\r\n\t\t\tthis.hideModal = this.hideModal.bind(this);\r\n\t\t\tthis.openAddNewContact = this.openAddNewContact.bind(this);\r\n\t\t\tthis.openChatModal = this.openChatModal.bind(this);\r\n\t\t\tthis.state = {\r\n\t\t\t\tselectedPane: 0,\r\n\t\t\t\tmodalTemplate: null,\r\n\t\t\t\tshowModal: false,\r\n\t\t\t\t_panes: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"Chat\",\r\n\t\t\t\t\t\ticon: \"comment-multiple-outline\",\r\n\t\t\t\t\t\trender: this.renderChat\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"Pending Invites\",\r\n\t\t\t\t\t\ticon: \"account-plus\",\r\n\t\t\t\t\t\trender: this.renderPendingInvites\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t\tthis._chatLayoutCommands = [\r\n\t\t\t\t{ title: \"New Group\", uid: \"NEW_GROUP\" }\r\n\t\t\t];\r\n\t\t\tthis._chatCommands = [{ title: \"Delete Chat\", uid: \"DELETE_CHAT\" }];\r\n\t\t}\r\n\t\tsendMessage(contact, message) {\r\n\t\t\tthis.props.send(contact.type !== \"group\" ? \"msg\" : \"grpmsg\", {\r\n\t\t\t\tto: contact.handle,\r\n\t\t\t\tmessage\r\n\t\t\t});\r\n\t\t}\r\n\t\tcomponentWillReceiveProps(next) {\r\n\t\t\tif (next.chat && next.chat !== this.props.chat) {\r\n\t\t\t\tthis.openChatModal(next.chat);\r\n\t\t\t}\r\n\t\t}\r\n\t\topenChatModal(chat = this.props.chat) {\r\n\t\t   //\tsetTimeout(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tmodalTemplate: () => this.getMessageLayout(chat),\r\n\t\t\t\t\tshowModal: true\r\n\t\t\t\t});\r\n\t\t\t//}, 0);\r\n\t\t}\r\n\t\tcomponentDidMount() {\r\n\t\t\tconsole.log(\"logging in...\");\r\n\t\t\tthis.props.login({ username: this.props.username });\r\n\r\n\t\t\tif (this.props.chat) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.openChatModal(\r\n\t\t\t\t\t\tthis.props.openChats[this.props.chat.contact.handle]\r\n\t\t\t\t\t);\r\n\t\t\t\t}, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t\trenderPendingInvites() {\r\n\t\t\tif (this.props.busyWithInvites) {\r\n\t\t\t\treturn <ProgressBar />;\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<PendingInvites\r\n\t\t\t\t\tgetInvites={this.props.fetchInvites}\r\n\t\t\t\t\tinvites={this.props.invites}\r\n\t\t\t\t\tacceptInvite={this.props.acceptInvite}\r\n\t\t\t\t\trejectInvite={this.props.rejectInvite}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\t\trenderChat() {\r\n\t\t\tlet chats = Object.keys(this.props.openChats || {}).map(x => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\thandle: x,\r\n\t\t\t\t\tmessages: this.props.openChats[x].messages\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\treturn (\r\n\t\t\t\t<OpenChatsLayout>\r\n\t\t\t\t\t<ContextMenu commands={this._chatLayoutCommands} />\r\n\t\t\t\t\t{this.props.fetchingContacts ? (\r\n\t\t\t\t\t\t<ProgressBar />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<OpenChats\r\n\t\t\t\t\t\t\topen={handle => {\r\n\t\t\t\t\t\t\t\tthis.props.openChat(\r\n\t\t\t\t\t\t\t\t\tthis.props.openChats[handle]\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tnewMessage={this.props.newMessage}\r\n\t\t\t\t\t\t\tchats={chats}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<NewChatButton onClick={this.openSelectContact} />\r\n\t\t\t\t</OpenChatsLayout>\r\n\t\t\t);\r\n\t\t}\r\n\t\tgetMessageLayout(chat) {\r\n\t\t\treturn (\r\n\t\t\t\t<ChatLayout info={chat.contact.handle}>\r\n\t\t\t\t\t<ContextMenu commands={this._chatCommands} />\r\n\t\t\t\t\t<ChatHistory\r\n\t\t\t\t\t\tmessages={chat.messages}\r\n\t\t\t\t\t\tme={this.props.handle}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Editor\r\n\t\t\t\t\t\tmessageDelivered={this.props.messageDelivered}\r\n\t\t\t\t\t\tsend={message =>\r\n\t\t\t\t\t\t\tthis.sendMessage(chat.contact, message)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ChatLayout>\r\n\t\t\t);\r\n\t\t}\r\n\t\topenChat(chat) {\r\n\t\t\tthis.props.openChat(chat);\r\n\t\t}\r\n\t\topenSelectContact() {\r\n\t\t\tif (!this.props.busyWithContacts && !this.props.contacts) {\r\n\t\t\t\tthis.props.getContacts();\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tmodalTemplate: () =>\r\n\t\t\t\t\tthis.props.busyWithContacts ? (\r\n\t\t\t\t\t\t<ProgressBar />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<ContactList\r\n\t\t\t\t\t\t\tcontacts={this.props.contacts}\r\n\t\t\t\t\t\t\topenAddNewContact={this.openAddNewContact}\r\n\t\t\t\t\t\t\tcontactSelected={contact => {\r\n\t\t\t\t\t\t\t\t//add chat to history.\r\n\t\t\t\t\t\t\t\tlet chat = (this.props.openChats || {})[\r\n\t\t\t\t\t\t\t\t\tcontact.handle\r\n\t\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\t\tif (!chat)\r\n\t\t\t\t\t\t\t\t\tthis.props.addToOpenChats(\r\n\t\t\t\t\t\t\t\t\t\t(chat = { contact, messages: [] })\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tthis.openChat(chat);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t),\r\n\t\t\t\tshowModal: true\r\n\t\t\t});\r\n\t\t}\r\n\t\topenAddNewContact() {\r\n\t\t\tthis.setState({\r\n\t\t\t\tmodalTemplate: () => (\r\n\t\t\t\t\t<AddNewContact\r\n\t\t\t\t\t\tsearch={query => this.props.search(query)}\r\n\t\t\t\t\t\tsearchResult={this.props.searchResult}\r\n\t\t\t\t\t\tsendFriendRequest={handle =>\r\n\t\t\t\t\t\t\tthis.props.sendFriendRequest(handle)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\t\tshowModal: true\r\n\t\t\t});\r\n\t\t}\r\n\t\thideModal() {\r\n\t\t\tthis.setState({ showModal: false });\r\n\t\t\t//this will cause a useless rerender. need to change this later.\r\n\t\t\tthis.props.closeChat();\r\n\t\t}\r\n\t\tselectedPaneChanged(selectedPane) {\r\n\t\t\tthis.setState({ selectedPane });\r\n\t\t}\r\n\t\trender() {\r\n\t\t\tif (this.props.loggingIn) {\r\n\t\t\t\treturn <ProgressBar />;\r\n\t\t\t}\r\n\t\t\tif (!this.props.handle) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Login\r\n\t\t\t\t\t\tfirstTimer={this.props.firstTimer}\r\n\t\t\t\t\t\twelcomeMessage={\r\n\t\t\t\t\t\t\t(this.props.args &&\r\n\t\t\t\t\t\t\t\tthis.props.args.welcomeMessage) ||\r\n\t\t\t\t\t\t\t\"Please enter the name with which you want to be known. Please note once saved it cannot be changed\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsubmit={handle =>\r\n\t\t\t\t\t\t\tthis.props.login({\r\n\t\t\t\t\t\t\t\tusername: this.props.username,\r\n\t\t\t\t\t\t\t\thandle\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<Layout\r\n\t\t\t\t\tselectedPane={this.state.selectedPane}\r\n\t\t\t\t\tselectedPaneChanged={this.selectedPaneChanged}\r\n\t\t\t\t\tpanes={this.state._panes.map(x => ({\r\n\t\t\t\t\t\ttitle: x.title,\r\n\t\t\t\t\t\ticon: x.icon\r\n\t\t\t\t\t}))}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\ttemplate={\r\n\t\t\t\t\t\t\t(this.state.modalTemplate &&\r\n\t\t\t\t\t\t\t\tthis.state.modalTemplate()) ||\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thideDone={true}\r\n\t\t\t\t\t\tdone={this.hideModal}\r\n\t\t\t\t\t\tvisibility={this.state.showModal}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{this.state._panes[this.state.selectedPane].render()}\r\n\t\t\t\t</Layout>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\treturn connect(mapStateToProps, mapDispatchToProps)(DynamoMessenger);\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { runDynamoProcessor, dynamoDownloadUrl } from \"./actions\";\r\nimport invariants from \"./utils/invariants\";\r\n\r\nexport default (Link, customDownloadCommand) => {\r\n\tinvariants.validComponent(Link, \"Link\");\r\n\r\n\tconst mapDispatchToState = dispatch => {\r\n\t\treturn {\r\n\t\t\tdispatch\r\n\t\t};\r\n\t};\r\n\tclass DynamoCommand extends Component {\r\n\t\tconstructor(props) {\r\n\t\t\tsuper(props);\r\n\t\t\tthis.go = this.go.bind(this);\r\n\t\t\tthis.run = this.run.bind(this);\r\n\t\t}\r\n\t\trun() {\r\n\t\t\tthis.props.dispatch(\r\n\t\t\t\trunDynamoProcessor(\r\n\t\t\t\t\tthis.props.args.commmandProcessor,\r\n\t\t\t\t\tJSON.parse(this.props.args.commandProcessorArgs || {}),\r\n\t\t\t\t\tthis.props.component_uid\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\t\tgo() {\r\n\t\t\tswitch (this.props.args.commandType) {\r\n\t\t\t\tcase DynamoCommand.COMMAND_TYPE.DOWNLOAD:\r\n\t\t\t\t\tif (!this.props.args.commandProcessorArgs) {\r\n\t\t\t\t\t\tthrow new Error(\"Download is not properly setup.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet url;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\turl = dynamoDownloadUrl.replace(\r\n\t\t\t\t\t\t\t\":id\",\r\n\t\t\t\t\t\t\tJSON.parse(this.props.args.commandProcessorArgs).id\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tthrow new Error(\"Download is not properly setup.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.props.dispatch(customDownloadCommand(this.props.args, url));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthis.run();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\trender() {\r\n\t\t\treturn (\r\n\t\t\t\t/*jshint ignore:start */\r\n\t\t\t\t<Link\r\n\t\t\t\t\ttext={this.props.args.commandText}\r\n\t\t\t\t\ticon={this.props.args.commandIcon}\r\n\t\t\t\t\tgo={this.go}\r\n\t\t\t\t/>\r\n\t\t\t\t/*jshint ignore:end */\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\tDynamoCommand.COMMAND_TYPE = { DEFAULT: \"DEFAULT\", DOWNLOAD: \"DOWNLOAD\" };\r\n\treturn connect(null, mapDispatchToState)(DynamoCommand);\r\n};\r\n","import dynamo_input from \"./dynamo_input.js\";\r\nimport dynamo_view from \"./dynamo_view.js\";\r\nimport dynamo_container from \"./dynamo_container.js\";\r\nimport dynamo_process from \"./dynamo_process.js\";\r\nimport dynamo_section from \"./dynamo_section.js\";\r\nimport dynamo_select from \"./dynamo_select.js\";\r\nimport dynamo_selectset from \"./dynamo_selectset.js\";\r\nimport dynamo_list from \"./dynamo_list.js\";\r\nimport dynamo_hidden from \"./dynamo_hidden.js\";\r\nimport dynamo_nav from \"./dynamo_nav\";\r\nimport dynamo_image from \"./dynamo_image\";\r\nimport dynamo_grid from \"./dynamo_grid\";\r\nimport dynamo_htmlview from \"./dynamo_htmlview\";\r\nimport dynamo_fileupload from './dynamo_fileupload';\r\nimport dynamo_actionview from \"./dynamo_actionview\";\r\nimport dynamo_label from './dynamo_label';\r\nimport dynamo_webview from \"./dynamo_webview\";\r\nimport dynamo_messenger from \"./dynamo_messenger\";\r\nimport dynamo_command from \"./dynamo_command\";\r\n\r\nexport default {\r\n\tdynamo_input,\r\n\tdynamo_view,\r\n\tdynamo_container,\r\n\tdynamo_process, \r\n\tdynamo_section,\r\n\tdynamo_select,\r\n\tdynamo_selectset,\r\n\tdynamo_list,\r\n\tdynamo_hidden,\r\n\tdynamo_nav,\r\n\tdynamo_grid, \r\n\tdynamo_image,\r\n\tdynamo_fileupload,\r\n\tdynamo_actionview,\r\n\tdynamo_htmlview,\r\n\tdynamo_label,\r\n\tdynamo_webview,\r\n\tdynamo_messenger,\r\n\tdynamo_command\r\n}; \r\n","import components from \"./lib\";\r\nconst defaultMap = {\r\n\tINPUT: components.dynamo_input,\r\n\tVIEW: components.dynamo_view,\r\n\tCONTAINER: components.dynamo_container,\r\n\tPROCESS: components.dynamo_process,\r\n\tSECTION: components.dynamo_section,\r\n\tSELECT: components.dynamo_select,\r\n\tSELECTSET: components.dynamo_selectset,\r\n\tLIST: components.dynamo_list,\r\n\tHIDDEN: components.dynamo_hidden,\r\n\tNAV: components.dynamo_nav,\r\n\tIMAGE: components.dynamo_image,\r\n\tGRID: components.dynamo_grid,\r\n\tFILEUPLOAD: components.dynamo_fileupload,\r\n\tACTIONVIEW: components.dynamo_actionview,\r\n\tHTMLVIEW: components.dynamo_htmlview,\r\n\tLABEL: components.dynamo_label,\r\n\tWEBVIEW: components.dynamo_webview,\r\n\tMESSENGER: components.dynamo_messenger,\r\n\tCOMMAND: components.dynamo_command,\r\n\trecipes: {},\r\n\t_defaultMap: {},\r\n\tcook: function() {\r\n\t\tif (!this._cooked) {\r\n\t\t\tthis._cooked = true;\r\n\t\t\tObject.keys(this.recipes).forEach(recipe => {\r\n\t\t\t\tthis._defaultMap[recipe] = this[recipe];\r\n\t\t\t\tthis[recipe] = this[recipe].apply(null,this.recipes[recipe]);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\nexport default defaultMap;\r\n","import _ from \"lodash\";\r\nimport uuid from \"uuid/v4\";\r\nimport { ACTIONS } from \"../actions\";\r\nimport config from \"client_config\";\r\n\r\nexport default function(state = {}, action) {\r\n\tswitch (action.type) {\r\n\t\tcase \"persist/REHYDRATE\":\r\n\t\t\tvar incoming = action.payload.dynamo;\r\n\t\t\tif (incoming) {\r\n\t\t\t\ttoggleAllBusyIndicators(incoming);\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\t...incoming\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn state;\r\n\t\tcase ACTIONS.ADD_NAVIGATION_CONTEXT:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tnavigationContext: action.payload\r\n\t\t\t});\r\n\t\tcase ACTIONS.REMOVE_NAVIGATION_CONTEXT:\r\n\t\t\tdelete state.navigationContext;\r\n\t\t\treturn Object.assign({}, state);\r\n\t\tcase ACTIONS.DYNAMO_PROCESS_FAILED:\r\n\t\t\treturn Object.assign({}, state, { busy: false });\r\n\t\tcase ACTIONS.DYNAMO_PROCESS_RAN:\r\n\t\t\tlet currentState = {\r\n\t\t\t\tbusy: false,\r\n\t\t\t\tcurrentStep: state.currentStep || 0\r\n\t\t\t};\r\n\t\t\tif (\r\n\t\t\t\t(config.uiOnDemand &&\r\n\t\t\t\t\taction.payload.data.status == \"COMPLETED\") ||\r\n\t\t\t\t(!config.uiOnDemand &&\r\n\t\t\t\t\t(state.description.steps.length == 1 ||\r\n\t\t\t\t\t\tcurrentState.currentStep + 1 >\r\n\t\t\t\t\t\t\tstate.description.steps.length - 1))\r\n\t\t\t) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tbusy: false,\r\n\t\t\t\t\tcompleted: true,\r\n\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t(typeof action.payload.data == \"object\" &&\r\n\t\t\t\t\t\t\taction.payload.data.message) ||\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tcurrentState.instanceId =\r\n\t\t\t\taction.payload && action.payload.data\r\n\t\t\t\t\t? action.payload.data.instanceId\r\n\t\t\t\t\t: null;\r\n\t\t\tif (config.uiOnDemand)\r\n\t\t\t\tstate.description.steps[0] = action.payload.data.$nextStep;\r\n\t\t\telse currentState.currentStep = currentState.currentStep + 1;\r\n\t\t\t//potentially costly will have to test and see what happens.\r\n\t\t\t//currentState.templateCache = getTemplatesAndAddComponentUid(state.description.steps[currentState.currentStep].form.elements);\r\n\t\t\tcurrentState.value =\r\n\t\t\t\ttypeof action.payload.data == \"object\" &&\r\n\t\t\t\ttypeof action.payload.data.message == \"object\" &&\r\n\t\t\t\taction.payload.data.message;\r\n\t\t\treturn Object.assign({}, state, currentState);\r\n\r\n\t\tcase ACTIONS.FETCHING_GRID:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.meta.key]: fetchingGrid(state[action.meta.key], action)\r\n\t\t\t});\r\n\t\tcase ACTIONS.FILTERED_GRID:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.payload.key]: filteredGrid(\r\n\t\t\t\t\tstate[action.payload.key],\r\n\t\t\t\t\taction\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\tcase ACTIONS.GET_SINGLE_ITEM_FOR_GRID:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.meta.key]: getSingleItemForGrid(\r\n\t\t\t\t\tstate[action.meta.key],\r\n\t\t\t\t\taction\r\n\t\t\t\t)\r\n\t\t\t});\r\n\r\n\t\tcase ACTIONS.GOT_SINGLE_ITEM_FOR_GRID:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.payload.key]: gotSingleItemForGrid(\r\n\t\t\t\t\tstate[action.payload.key],\r\n\t\t\t\t\taction\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\tcase ACTIONS.ERROR_WHILE_GETTING_SINGLE_ITEM_FOR_GRID:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.payload.key]: errorWhileGettingSingleItemForGrid(\r\n\t\t\t\t\tstate[action.payload.key],\r\n\t\t\t\t\taction\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\tcase ACTIONS.ERROR_WHILE_FETCHING_GRID:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.payload.key]: failedToFetchGrid(\r\n\t\t\t\t\tstate[action.payload.key]\r\n\t\t\t\t)\r\n\t\t\t});\r\n\r\n\t\tcase ACTIONS.DYNAMO_GET_MORE_FOR_GRID:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.payload.key]: reduceGrid(\r\n\t\t\t\t\tstate[action.payload.key],\r\n\t\t\t\t\taction\r\n\t\t\t\t)\r\n\t\t\t});\r\n\r\n\t\tcase ACTIONS.DYNAMO_PROCESS_RUNNING:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tbusy: !action.error,\r\n\t\t\t\tvalue: action.meta.form\r\n\t\t\t});\r\n\t\tcase ACTIONS.DYNAMO_PROCESSOR_RAN:\r\n\t\t\tconfigureTemplates(state, action);\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.payload.key]: action.payload.data,\r\n\t\t\t\t[`${action.payload.key}-busy`]: false\r\n\t\t\t});\r\n\r\n\t\tcase ACTIONS.DYNAMO_PROCESSOR_RUNNING:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[`${action.meta.key}-busy`]: !action.error\r\n\t\t\t});\r\n\t\tcase ACTIONS.DYNAMO_PROCESSOR_FAILED:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[`${action.meta}-busy`]: false,\r\n\t\t\t\t[action.meta]: null\r\n\t\t\t});\r\n\t\tcase ACTIONS.FETCHED_PROCESS:\r\n\t\t\tlet fetchedValue = Object.assign({}, action.payload.data.data);\r\n\t\t\tlet fetchedDescription = Object.assign(\r\n\t\t\t\t{},\r\n\t\t\t\taction.payload.data.description\r\n\t\t\t);\r\n\t\t\treturn {\r\n\t\t\t\tdescription: fetchedDescription,\r\n\t\t\t\tcurrentStep: 0,\r\n\t\t\t\tbusy: false,\r\n\t\t\t\tvalue: fetchedValue,\r\n\t\t\t\ttemplateCache: {},\r\n\t\t\t\t//always carry over the navigationContext.\r\n\t\t\t\tnavigationContext: state.navigationContext\r\n\t\t\t};\r\n\t\tcase ACTIONS.FETCHING_PROCESS:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tbusy: !action.error\r\n\t\t\t});\r\n\t\tcase ACTIONS.FAILED_TO_FETCH_PROCESS:\r\n\t\t\treturn {\r\n\t\t\t\tbusy: false\r\n\t\t\t};\r\n\t\tcase ACTIONS.START_FILE_UPLOAD:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.meta]: startUpload(state[action.meta], action)\r\n\t\t\t});\r\n\t\tcase ACTIONS.FILE_UPLOADED:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.payload.key]: fileUpload(\r\n\t\t\t\t\tstate[action.payload.key],\r\n\t\t\t\t\taction\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\tcase ACTIONS.FILE_UPLOAD_FAILED:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.meta]: uploadFailed(state[action.meta], action)\r\n\t\t\t});\r\n\t\tcase ACTIONS.GET_PREVIEW:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.meta]: getPreview(state[action.meta], action)\r\n\t\t\t});\r\n\t\tcase ACTIONS.GOT_PREVIEW:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.payload.key]: gotPreview(\r\n\t\t\t\t\tstate[action.payload.key],\r\n\t\t\t\t\taction\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\tcase ACTIONS.FAILED_TO_GET_PREVIEW:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.meta]: failedToGetPreview(state[action.meta], action)\r\n\t\t\t});\r\n\t\tcase ACTIONS.GET_ITEM_TEMPLATE:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.meta.key]: getTemplate(\r\n\t\t\t\t\t\"gettingTemplate\",\r\n\t\t\t\t\tstate[action.meta.key],\r\n\t\t\t\t\taction\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\tcase ACTIONS.GOT_ITEM_TEMPLATE:\r\n\t\t\tconfigureTemplates(state, action);\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.payload.key]: gotTemplate(\r\n\t\t\t\t\t\"gettingTemplate\",\r\n\t\t\t\t\t\"itemTemplate\",\r\n\t\t\t\t\tstate[action.payload.key],\r\n\t\t\t\t\taction\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\tcase ACTIONS.FAILED_TO_GET_ITEM_TEMPLATE:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.meta]: failedToGetTemplate(\r\n\t\t\t\t\t\"gettingTemplate\",\r\n\t\t\t\t\tstate[action.meta],\r\n\t\t\t\t\taction\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\tcase ACTIONS.GET_FILTER_TEMPLATE:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.meta]: getTemplate(\r\n\t\t\t\t\t\"gettingFilterTemplate\",\r\n\t\t\t\t\tstate[action.meta],\r\n\t\t\t\t\taction\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\tcase ACTIONS.GOT_FILTER_TEMPLATE:\r\n\t\t\tif (action.error) {\r\n\t\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t\t[action.meta]: failedToGetTemplate(\r\n\t\t\t\t\t\t\"gettingFilterTemplate\",\r\n\t\t\t\t\t\tstate[action.meta],\r\n\t\t\t\t\t\taction\r\n\t\t\t\t\t)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconfigureTemplates(state, action);\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.payload.key]: gotTemplate(\r\n\t\t\t\t\t\"gettingFilterTemplate\",\r\n\t\t\t\t\t\"filterTemplate\",\r\n\t\t\t\t\tstate[action.payload.key],\r\n\t\t\t\t\taction\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\tcase ACTIONS.FAILED_TO_GET_FILTER_TEMPLATE:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\t[action.meta]: failedToGetTemplate(\r\n\t\t\t\t\t\"gettingFilterTemplate\",\r\n\t\t\t\t\tstate[action.meta],\r\n\t\t\t\t\taction\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nfunction configureTemplates(state, action) {\r\n\tif (action.payload.returnsUI) {\r\n\t\t//state.templateCache = Object.assign({}, state.templateCache, getTemplatesAndAddComponentUid(action.payload.data));\r\n\t}\r\n}\r\n\r\nfunction getTemplate(busyIndicator, state = {}, action) {\r\n\treturn Object.assign({}, state, { [busyIndicator]: !action.error });\r\n}\r\nfunction gotTemplate(busyIndicator, propName, state = {}, action) {\r\n\treturn Object.assign({}, state, {\r\n\t\t[propName]: action.payload.data,\r\n\t\t[busyIndicator]: false\r\n\t});\r\n}\r\nfunction failedToGetTemplate(busyIndicator, state = {}, action) {\r\n\treturn Object.assign({}, state, { [busyIndicator]: false });\r\n}\r\n\r\nfunction startUpload(state = {}, action) {\r\n\treturn Object.assign({}, state, { gettingTemplate: !action.error });\r\n}\r\nfunction fileUpload(state = {}, action) {\r\n\treturn Object.assign({}, state, {\r\n\t\tuploadedId: action.payload.id,\r\n\t\tbusy: false\r\n\t});\r\n}\r\nfunction uploadFailed(state = {}, action) {\r\n\treturn Object.assign({}, state, { busy: false });\r\n}\r\nfunction getPreview(state = {}, action) {\r\n\treturn Object.assign({}, state, { busy: !action.error });\r\n}\r\nfunction gotPreview(state = {}, action) {\r\n\treturn Object.assign({}, state, {\r\n\t\tpreview: action.payload.data,\r\n\t\tbusy: false\r\n\t});\r\n}\r\nfunction failedToGetPreview(state = {}, action) {\r\n\treturn Object.assign({}, state, { busy: false });\r\n}\r\nfunction runThroughObj(conditions, data, result = {}, parent = null) {\r\n\tif (data)\r\n\t\tObject.keys(data).forEach(key => {\r\n\t\t\tlet send = false;\r\n\t\t\tfor (var v = 0; v < conditions.length; v++) {\r\n\t\t\t\tif (conditions[v](key, data, result, parent)) return result;\r\n\t\t\t}\r\n\t\t\tif (Array.prototype.isPrototypeOf(data[key]))\r\n\t\t\t\treturn data[key].forEach(function(element) {\r\n\t\t\t\t\trunThroughObj(conditions, element, result, data);\r\n\t\t\t\t});\r\n\t\t\tif (data[key] && typeof data[key] == \"object\")\r\n\t\t\t\treturn runThroughObj(conditions, data[key], result, data);\r\n\t\t});\r\n\treturn result;\r\n}\r\n\r\n/**\r\n * This method retrieves all the recursively declared templates and returns them. it also assigns \r\n * unique ids to every element it finds.\r\n * @param  {[type]} null    [description]\r\n * @param  {[type]} [\t(key, data,         result, parent) [description]\r\n * @param  {[type]} (key,   data,         result, parent  [description]\r\n * @return {[type]}         [description]\r\n */\r\nconst getTemplatesAndAddComponentUid = runThroughObj.bind(null, [\r\n\t(key, data, result, parent) => {\r\n\t\tif (key === \"dynamo_ref\") {\r\n\t\t\tif (data.template)\r\n\t\t\t\treturn (result[data.dynamo_ref] = data.template), result;\r\n\t\t\tif (parent && parent.itemTemplate)\r\n\t\t\t\treturn (result[data.dynamo_ref] = parent.itemTemplate), result;\r\n\t\t}\r\n\t},\r\n\t(key, data, result, parent) => {\r\n\t\tif (key == \"elementType\" && !data.component_uid) {\r\n\t\t\tdata.component_uid = uuid();\r\n\t\t}\r\n\t\t//console.log(parent ? parent : \"n/a\");\r\n\t}\r\n]);\r\n\r\nexport const toggleAllBusyIndicators = runThroughObj.bind(null, [\r\n\t(key, data) => {\r\n\t\tif (\r\n\t\t\t/(getting|busy|fetching)+/i.test(key) &&\r\n\t\t\ttypeof data[key] == \"boolean\"\r\n\t\t) {\r\n\t\t\tdata[key] = false;\r\n\t\t}\r\n\t}\r\n]);\r\n\r\nfunction reduceGrid(state = {}, action) {\r\n\tif (!state.data || state.data.items.length < action.payload.data.total) {\r\n\t\tlet current = state.data ? state.data.items : [];\r\n\t\taction.payload.data.items = current.concat(action.payload.data.items);\r\n\t\tstate.data = action.payload.data;\r\n\t\treturn Object.assign({}, state, { fetchingGrid: false });\r\n\t}\r\n}\r\n\r\nfunction filteredGrid(state = {}, action) {\r\n\tlet current = state.data ? state.data.items : [];\r\n\tstate.data = action.payload.data;\r\n\treturn Object.assign({}, state, { fetchingGrid: false });\r\n}\r\n\r\nfunction fetchingGrid(state = {}, action) {\r\n\treturn Object.assign({}, state, {\r\n\t\tfetchingGrid: !action.error,\r\n\t\tfilter: action.meta && action.meta.args ? action.meta.args.query : null\r\n\t});\r\n}\r\n\r\nfunction failedToFetchGrid(state = {}) {\r\n\treturn Object.assign({}, state, {\r\n\t\tfetchingGrid: false\r\n\t});\r\n}\r\n\r\nfunction getSingleItemForGrid(state = {}, action) {\r\n\treturn Object.assign({}, state, { fetchingSingleItem: !action.error });\r\n}\r\n\r\nfunction gotSingleItemForGrid(state = {}, action) {\r\n\treturn Object.assign({}, state, {\r\n\t\tsingleItem: action.payload.data,\r\n\t\tfetchingSingleItem: false\r\n\t});\r\n}\r\n\r\nfunction errorWhileGettingSingleItemForGrid(state = {}, action) {\r\n\treturn Object.assign({}, state, {\r\n\t\tfetchingSingleItem: false,\r\n\t\tsingleItem: undefined\r\n\t});\r\n}\r\n","import { ACTIONS } from \"../actions\";\r\nimport { toggleAllBusyIndicators } from \"./index\";\r\nimport uuid from \"uuid/v4\";\r\nexport default function(state = {}, action) {\r\n\tswitch (action.type) {\r\n\t\tcase \"persist/REHYDRATE\":\r\n\t\t\tvar incoming = action.payload.chat;\r\n\t\t\tif (incoming) {\r\n\t\t\t\ttoggleAllBusyIndicators(incoming);\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\t...incoming\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn state;\r\n\t\tcase ACTIONS.LOGIN_CHAT:\r\n\t\t\treturn Object.assign({}, state, { busyWithChatLogin: true, chatHandle: null });\r\n\t\tcase ACTIONS.LOGGED_IN_CHAT:\r\n\t\t\treturn Object.assign({}, state, { busyWithChatLogin: false, chatHandle: action.payload.handle || action.meta.handle });\r\n\t\tcase ACTIONS.FAILED_TO_LOGIN_CHAT:\r\n\t\t\treturn Object.assign({}, state, { busyWithChatLogin: false });\r\n\t\tcase ACTIONS.SEND_FRIEND_REQUEST:\r\n\t\t\treturn Object.assign({}, state, { sentFriendRequest: false, busyWithFriendRequest: true });\r\n\t\tcase ACTIONS.SENT_FRIEND_REQUEST:\r\n\t\t\treturn Object.assign({}, state, { sentFriendRequest: true, busyWithFriendRequest: false });\r\n\t\tcase ACTIONS.FAILED_TO_SEND_FRIEND_REQUEST:\r\n\t\t\treturn Object.assign({}, state, { busyWithFriendRequest: false, sentFriendRequest: false });\r\n\r\n\t\tcase ACTIONS.SEARCH:\r\n\t\t\treturn Object.assign({}, state, { busyWithSearch: true, searchResult: [] });\r\n\t\tcase ACTIONS.FOUND:\r\n\t\t\treturn Object.assign({}, state, { busyWithSearch: false, searchResult: action.payload });\r\n\t\tcase ACTIONS.NOT_FOUND:\r\n\t\t\treturn Object.assign({}, state, { busyWithSearch: false });\r\n\r\n\t\tcase ACTIONS.ACCEPT_FRIEND_REQUEST:\r\n\t\tcase ACTIONS.REJECT_FRIEND_REQUEST:\r\n\t\t\treturn Object.assign({}, state, { busyWithInvite: true });\r\n\t\tcase ACTIONS.ACCEPTED_FRIEND_REQUEST:\r\n\t\tcase ACTIONS.REJECTED_FRIEND_REQUEST:\r\n\t\t\tif (state.invites) {\r\n\t\t\t\tlet req = state.invites.filter(x => x.handle == action.payload)[0];\r\n\t\t\t\tstate.invites.splice(state.invites.indexOf(req), 1);\r\n\t\t\t}\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tbusyWithInvite: false,\r\n\t\t\t\tpendingInvites: (state.invites && state.invites.slice()) || null\r\n\t\t\t});\r\n\t\tcase ACTIONS.FAILED_TO_ACCEPT_FRIEND_REQUEST:\r\n\t\tcase ACTIONS.FAILED_TO_REJECT_FRIEND_REQUEST:\r\n\t\t\treturn Object.assign({}, state, { busyWithInvite: false });\r\n\r\n\t\tcase ACTIONS.GET_INVITES:\r\n\t\t\treturn Object.assign({}, state, { busyWithInvites: true });\r\n\t\tcase ACTIONS.GOT_INVITES:\r\n\t\t\treturn Object.assign({}, state, { busyWithInvites: false, invites: action.payload });\r\n\t\tcase ACTIONS.FAILED_TO_GET_INVITES:\r\n\t\t\treturn Object.assign({}, state, { busyWithInvites: false });\r\n\t\tcase ACTIONS.GET_CONTACTS:\r\n\t\t\treturn Object.assign({}, state, { busyWithContacts: true });\r\n\t\tcase ACTIONS.GOT_CONTACTS:\r\n\t\t\treturn Object.assign({}, state, { busyWithContacts: false, contacts: action.payload });\r\n\t\tcase ACTIONS.FAILED_TO_GET_CONTACTS:\r\n\t\t\treturn Object.assign({}, state, { busyWithContacts: false });\r\n\t\tcase ACTIONS.ADD_TO_OPEN_CHATS:\r\n\t\t\tlet chat = action.payload,\r\n\t\t\t\topen = state.openChats || {};\r\n\t\t\topen[chat.contact.handle] = chat;\r\n\t\t\treturn Object.assign({}, state, { openChats: open });\r\n\t\tcase ACTIONS.NEW_MESSAGE:\r\n\t\tcase ACTIONS.NEW_GROUP_MESSAGE:\r\n\t\t\tlet openChats = state.openChats || {},\r\n\t\t\t\tmsg = action.payload;\r\n\t\t\tif (!openChats[msg.from]) {\r\n\t\t\t\topenChats[msg.from] = {\r\n\t\t\t\t\tcontact: { handle: msg.from, type: action.type == ACTIONS.NEW_GROUP_MESSAGE && \"group\" },\r\n\t\t\t\t\tmessages: []\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tmsg.id = uuid();\r\n\t\t\topenChats[msg.from].messages.push(msg);\r\n\t\t\treturn Object.assign({}, state, { openChats, newMessage: msg });\r\n\t\tcase ACTIONS.OPEN_CHAT:\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tchat: action.payload,\r\n\t\t\t\tnewMessage: state.newMessage && state.newMessage.from == action.payload.contact.handle ? null : state.newMessage\r\n\t\t\t});\r\n\t\tcase ACTIONS.CLOSE_CHAT:\r\n\t\t\treturn Object.assign({}, state, { chat: null });\r\n\t\tcase ACTIONS.SEND_CHAT:\r\n\t\t\treturn Object.assign({}, state, { messageDelivered: false });\r\n\t\tcase ACTIONS.SENT_CHAT:\r\n\t\t\tlet _openChats = state.openChats,\r\n\t\t\t\t_msg = action.meta;\r\n\t\t\t_openChats[_msg.to].messages.push(Object.assign({}, _msg, { from: state.chatHandle, id: uuid() }));\r\n\t\t\t_openChats[_msg.to].messages = _openChats[_msg.to].messages.slice();\r\n\t\t\treturn Object.assign({}, state, { openChats: Object.assign({}, _openChats), messageDelivered: true });\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n"],"names":["MemCache","opts","defaultTTL","ttl","store","bind","get","_items","obj","JSON","stringify","key","hasOwnProperty","getKey","_key","value","undefined","handle","setTimeout","remove","preDispatch","config","BASE_URL","global","baseUrl","CHAT_URL","chatUrl","preLogin","cache","processorsCacheTimeout","ACTIONS","socket","displayMessage","text","getQueryParams","args","Object","keys","map","x","index","arr","encodeURIComponent","length","join","removeNavigationContext","REMOVE_NAVIGATION_CONTEXT","addNavigationContext","ADD_NAVIGATION_CONTEXT","openConfirmation","id","message","params","OPEN_CONFIRMATION","defaultError","dispatch","customType","meta","action","state","res","status","statusText","headers","errormessage","showMessage","type","SESSION_MAY_HAVE_EXPIRED","dynamoDownloadUrl","fetchDynamoProcess","getState","CALL_API","assign","$uiOnDemand","uiOnDemand","FETCHING_PROCESS","FETCHED_PROCESS","json","then","data","d","FAILED_TO_FETCH_PROCESS","getMoreForGrid","runDynamoProcessor","FETCHING_GRID","DYNAMO_GET_MORE_FOR_GRID","ERROR_WHILE_FETCHING_GRID","filterGrid","FILTERED_GRID","getItemTemplate","GET_ITEM_TEMPLATE","GOT_ITEM_TEMPLATE","FAILED_TO_GET_ITEM_TEMPLATE","getFilterTemplate","GET_FILTER_TEMPLATE","GOT_FILTER_TEMPLATE","FAILED_TO_GET_FILTER_TEMPLATE","getSingleItemForGrid","GET_SINGLE_ITEM_FOR_GRID","GOT_SINGLE_ITEM_FOR_GRID","ERROR_WHILE_GETTING_SINGLE_ITEM_FOR_GRID","requestCustomType","resultCustomType","errorCustomType","returnsUI","disableCache","cacheProcessorResponses","cacheKey","hasKey","payload","DYNAMO_PROCESSOR_RAN","DYNAMO_PROCESSOR_RUNNING","response","DYNAMO_PROCESSOR_FAILED","runDynamoProcess","details","DYNAMO_PROCESS_RUNNING","form","DYNAMO_PROCESS_RAN","catch","DYNAMO_PROCESS_FAILED","instanceId","getDynamoFilePreview","fileType","query","GET_PREVIEW","GOT_PREVIEW","FAILED_TO_GET_PREVIEW","uploadDynamoFile","file","formData","FormData","append","START_FILE_UPLOAD","FILE_UPLOADED","FILE_UPLOAD_FAILED","loginChat","credentials","extra","LOGIN_CHAT","emit","msg","error","isSignedUp","FAILED_TO_LOGIN_CHAT","LOGGED_IN_CHAT","sendMessage","SEND_CHAT","SENT_CHAT","FAILED_TO_SEND_CHAT","createGroup","CREATE_GROUP","CREATED_GROUP","sendFriendRequest","SEND_FRIEND_REQUEST","SENT_FRIEND_REQUEST","FAILED_TO_SEND_FRIEND_REQUEST","getContacts","GET_CONTACTS","GOT_CONTACTS","FAILED_TO_GET_CONTACTS","fetchInvites","GET_INVITES","GOT_INVITES","FAILED_TO_GET_INVITES","acceptInvite","ACCEPT_FRIEND_REQUEST","ACCEPTED_FRIEND_REQUEST","FAILED_TO_ACCEPT_FRIEND_REQUEST","rejectInvite","REJECT_FRIEND_REQUEST","REJECTED_FRIEND_REQUEST","FAILED_TO_REJECT_FRIEND_REQUEST","searchForHandle","SEARCH","FOUND","NOT_FOUND","requestType","resultType","errorType","Array","prototype","slice","call","arguments","result","authentication","username","apply","addToOpenChats","chat","ADD_TO_OPEN_CHATS","openChat","OPEN_CHAT","closeChat","CLOSE_CHAT","startReceivingMessages","openSocket","on","fn","NEW_MESSAGE","NEW_GROUP_MESSAGE","Validator","context","run","Promise","resolve","reject","props","validators","asyncValidators","reduce","current","element","valid","validatorType","VALIDATOR_TYPES","REQUIRED","hasValue","MAXLENGTH","isLessThanMaxLength","MINLENGTH","isGreaterThanMinLength","REGEX","matchesRegex","errors","push","setState","component","name","Error","Component","isPrototypeOf","LabelWrapper","Input","DatePicker","Checkbox","validComponent","DynamoInput","valueChanged","default","runValidators","runAsyncValidators","validator","validate","next","component_uid","ValidationHelper","runAsyncValidator","filter","max","min","RegExp","exp","test","Result","passThrough","React","label","isRequired","propTypes","PropTypes","func","Page","Container","mapStateToProps","_","initialProps","description","dynamo","step","currentStep","elements","steps","mode","hideSubmit","title","DynamoView","onValueChanged","submit","dynamo_view","warn","log","er","navigation","connect","Section","Header","ComponentLocator","invariants","_validations","setValidator","all","self","extraVal","notifyExtra","sort","y","order","DynamoComponent","source","indexOf","splice","forEach","ProgressBar","TextView","busy","completed","mapDispatchToProps","info","DynamoProcess","_id","fetch","fetchParams","goBack","isEqual","runProcess","Layout","DynamoSection","ProgressIndicator","ownProps","st","DynamoSelect","fetchItems","selectFirstItem","isValidValue","babelHelpers.typeof","$objectID","isObjectIdMode","_mounted","obid","updateValue","parse","customArgs","items","item","v","isEmptyOrNull","disabled","Picker","DynamoSelectSet","onPickerValueChanged","onContainerValueChanged","getPickerValue","getPickerItemsById","respondToPickerValueChanged","oneOption","getValueBasedOnMode","pickerValue","containerValidator","processor","processorArgs","_args","_onContainerValueChanged","_currentValue","shift","getItems","r","superCancel","sum","path","_p","_no_path","initialElementsData","noPath","Button","List","Modal","ErrorText","app","confirmationResult","templateCache","equivalent","arr2","isEqualWith","objValue","otherValue","findKey","isMatch","DynamoList","showModal","closeModal","edit","isDisabled","getListItemDataTemplate","confirmation","dataTemplate","listItemDataTemplateProcessor","isTemplateRef","itemTemplate","dynamo_ref","template","equal","i","behavior","ValidatorHelper","modalVisible","modalName","template_ref","clone","extension","rowTemplate","Link","NavigationActions","mapDispatchToState","navigationContext","DynamoNav","go","link","linkAndParams","getParams","paramsOnly","NAV_TYPE","CLIENT","navigate","DYNAMO","setParamsAction","setParams","firstItemIsLink","key_value","split","sp","Image","rest","replace","GRID_MODES","ITEM_MODES","ItemView","CommandsView","CommandResultView","total","fetchingGrid","filterTemplate","singleItem","fetchingSingleItem","gettingFilterTemplate","gettingTemplate","DynamoGrid","commandResultViewName","itemViewName","pageCount","showItemView","cancel","isCRUD","isEDITONLY","getItemsFromSource","done","_filterValidator","filterValueChanged","more","finished","openCommandMenu","closeCommandView","execCommand","showCommandResult","closeCommandResult","commands","commandType","cmd","unshift","filterProcessor","fetchingFilterTemplate","gridArgs","commandProcessed","processed","EDIT","fetchingItemTemplate","existingValue","methodName","count","full","submitted","NEW","createProcessor","editProcessor","console","skipFetch","_itemTemplate","createTemplate","editTemplate","fetchSingleItemProcessor","getSingleItem","fetchTemplateProcessor","filterViewName","showCommandsView","command","CRUD","EDITONLY","header","footer","templateConfig","itemViewElements","showCommandResultView","commandResult","commandProcessing","html","Uploader","Text","previews","DynamoFileUpload","_previewType","getPreviewType","_supported","isSupported","_getPreview","_query","getPreviewQuery","upload","uploadedId","supports","getPreview","preview","Filter","FilterContainer","ContentContainer","_actionState","ui","DynamoActionView","commandText","resultUI","resultData","doNothing","Label","WebView","url","Pane","OpenChats","Editor","ContextMenu","NewChatButton","OpenChatsLayout","Login","ContactList","ChatHistory","AddNewContact","PendingInvites","ChatLayout","_state","contacts","openChats","newMessage","chatHandle","chatMessageSent","busyWithChatLogin","searchResult","busyWithInvite","busyWithInvites","busyWithContacts","invites","messageDelivered","DynamoMessenger","renderChat","renderPendingInvites","openSelectContact","getMessageLayout","selectedPaneChanged","hideModal","openAddNewContact","openChatModal","_chatLayoutCommands","uid","_chatCommands","contact","send","login","chats","messages","fetchingContacts","search","selectedPane","loggingIn","firstTimer","welcomeMessage","_panes","icon","modalTemplate","render","customDownloadCommand","DynamoCommand","commmandProcessor","commandProcessorArgs","COMMAND_TYPE","DOWNLOAD","e","commandIcon","DEFAULT","defaultMap","components","dynamo_input","dynamo_container","dynamo_process","dynamo_section","dynamo_select","dynamo_selectset","dynamo_list","dynamo_hidden","dynamo_nav","dynamo_image","dynamo_grid","dynamo_fileupload","dynamo_actionview","dynamo_htmlview","dynamo_label","dynamo_webview","dynamo_messenger","dynamo_command","_cooked","recipes","_defaultMap","recipe","incoming","currentState","$nextStep","filteredGrid","gotSingleItemForGrid","errorWhileGettingSingleItemForGrid","failedToFetchGrid","reduceGrid","fetchedValue","fetchedDescription","startUpload","fileUpload","uploadFailed","gotPreview","failedToGetPreview","getTemplate","gotTemplate","failedToGetTemplate","configureTemplates","busyIndicator","propName","runThroughObj","conditions","parent","getTemplatesAndAddComponentUid","uuid","toggleAllBusyIndicators","concat","sentFriendRequest","busyWithFriendRequest","busyWithSearch","req","open","from","_openChats","_msg","to"],"mappings":"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"}